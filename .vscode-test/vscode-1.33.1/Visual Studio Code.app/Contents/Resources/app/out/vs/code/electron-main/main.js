/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/
(function(){function e(e){e._performanceEntries=e._performanceEntries||[];const t=2,i="function"==typeof console.timeStamp?console.timeStamp.bind(console):()=>{};return{mark:function(t){e._performanceEntries.push(t,Date.now()),i(t)},getEntries:function(){const i=[],n=e._performanceEntries;for(let e=0;e<n.length;e+=t)i.push({name:n[e],timestamp:n[e+1]});return i},getEntry:function(i){const n=e._performanceEntries;for(let e=0;e<n.length;e+=t)if(n[e]===i)return{name:n[e],timestamp:n[e+1]}},getDuration:function(i,n){const r=e._performanceEntries;let o=n,s=0;for(let e=r.length-t;e>=0;e-=t)if(r[e]===o){if(o!==n)return r[s+1]-r[e+1];s=e,o=i}return 0},importEntries:function(t){e._performanceEntries.splice(0,0,...t)},exportEntries:function(){return e._performanceEntries.slice(0)}}}
var t=["require","exports","vs/base/common/platform","vs/base/common/event","vs/platform/instantiation/common/instantiation","vs/base/common/path","vs/base/common/lifecycle","vs/platform/log/common/log","vs/base/common/uri","vs/platform/environment/common/environment","vs/nls!vs/code/electron-main/main","electron","vs/base/common/async","vs/nls","vs/platform/configuration/common/configuration","fs","vs/base/common/objects","vs/base/common/types","vs/base/common/errors","vs/base/common/strings","vs/platform/product/node/product","vs/base/common/arrays","vs/base/node/pfs","os","vs/platform/lifecycle/electron-main/lifecycleMain","vs/base/common/resources","vs/platform/workspaces/common/workspaces","vs/base/common/map","vs/base/common/uuid","vs/platform/state/common/state","vs/base/common/network","vs/platform/telemetry/common/telemetry","vs/platform/update/common/update","vs/base/node/extfs","vs/base/common/cancellation","vs/platform/environment/node/argv","vs/platform/registry/common/platform","vs/platform/history/common/history","vs/platform/windows/electron-main/windows","vs/base/common/json","vs/base/common/extpath","vs/platform/request/node/request","vs/base/common/labels","vs/platform/configuration/common/configurationRegistry","vs/base/common/amd","child_process","vs/base/parts/ipc/common/ipc","vs/base/node/request","vs/base/common/buffer","vs/platform/product/node/package","vs/platform/windows/common/windows","vs/base/parts/ipc/node/ipc.net","vs/base/common/keyCodes","vs/base/common/decorators","vs/platform/url/common/url","vs/platform/backup/common/backup","vs/platform/instantiation/common/descriptors","vs/code/electron-main/theme","vs/platform/instantiation/common/serviceCollection","crypto","vs/platform/update/electron-main/abstractUpdateService","vs/base/common/functional","vs/platform/launch/electron-main/launchService","vs/base/node/id","vs/platform/files/common/files","vs/base/parts/ipc/common/ipc.net","vs/platform/menubar/common/menubar","vs/platform/telemetry/node/commonProperties","vs/platform/diagnostics/electron-main/diagnosticsService","vs/platform/configuration/common/configurationModels","vs/base/common/normalization","vs/base/common/scanCode","vs/base/common/iterator","vs/platform/remote/common/remoteHosts","vs/code/node/paths","vs/platform/workspaces/electron-main/workspacesMainService","vs/platform/extensionManagement/common/extensionManagementUtil","vs/nls!vs/platform/configuration/common/configurationRegistry","vs/nls!vs/platform/environment/node/argv","vs/nls!vs/platform/environment/node/argvHelper","vs/nls!vs/platform/extensionManagement/common/extensionManagement","vs/nls!vs/platform/extensions/node/extensionValidator","vs/nls!vs/platform/history/electron-main/historyMainService","vs/nls!vs/platform/issue/electron-main/issueService","vs/nls!vs/platform/label/common/label","vs/nls!vs/platform/menubar/electron-main/menubar","vs/nls!vs/platform/request/node/request","vs/nls!vs/platform/telemetry/common/telemetryService","vs/nls!vs/platform/update/node/update.config.contribution","vs/nls!vs/platform/windows/electron-main/windowsService","vs/nls!vs/platform/workspaces/common/workspaces","vs/base/common/keybindingParser","vs/base/node/paths","vs/base/node/proxy","url","vs/platform/instantiation/common/graph","vs/base/node/ps","vs/base/common/glob","vs/platform/driver/node/driver","vs/base/node/stream","vs/platform/extensionManagement/common/extensionManagement","vs/base/node/encoding","vs/platform/environment/node/argvHelper","vs/base/common/assert","vs/platform/history/electron-main/historyStorage","vs/base/node/config","vs/platform/instantiation/common/instantiationService","vs/platform/issue/common/issue","vs/platform/issue/node/issueIpc","vs/platform/keybinding/common/baseResolvedKeybinding","vs/platform/keybinding/common/usLayoutResolvedKeybinding","vs/platform/lifecycle/common/lifecycle","vs/base/common/date","vs/platform/log/common/bufferLog","vs/platform/log/node/logIpc","vs/platform/log/node/spdlogService","vs/base/node/storage","vs/platform/menubar/node/menubarIpc","vs/base/parts/contextmenu/common/contextmenu","vs/platform/extensions/node/extensionValidator","vs/base/parts/contextmenu/electron-main/contextmenu","vs/code/electron-main/logUploader","vs/base/common/collections","vs/platform/environment/node/environmentService","vs/base/common/linkedList","vs/platform/jsonschemas/common/jsonContributionRegistry","vs/base/node/crypto","vs/base/parts/ipc/node/ipc.electron","vs/base/parts/ipc/electron-main/ipc.electron-main","vs/platform/configuration/node/configuration","vs/platform/configuration/node/configurationService","vs/platform/remote/common/remoteAgentConnection","vs/platform/remote/common/remoteAgentFileSystemChannel","vs/base/common/process","vs/platform/remote/node/nodeWebSocketFactory","vs/code/electron-main/keyboard","vs/base/common/jsonFormatter","vs/code/electron-main/windowsStateStorage","vs/code/electron-main/sharedProcess","vs/platform/state/node/stateService","vs/platform/storage/node/storageMainService","vs/base/node/flow","vs/platform/telemetry/common/telemetryService","vs/platform/telemetry/common/telemetryUtils","vs/code/node/shellEnv","vs/platform/telemetry/node/telemetryIpc","vs/platform/telemetry/node/workbenchCommonProperties","vs/platform/storage/node/storageIpc","vs/nls!vs/base/common/keybindingLabels","assert","vs/platform/update/electron-main/updateService.darwin","vs/platform/update/electron-main/updateService.snap","vs/platform/update/node/update.config.contribution","vs/code/code.main","vs/platform/update/node/updateIpc","vs/base/common/jsonEdit","vs/platform/url/common/urlService","vs/platform/url/node/urlIpc","vs/base/common/keybindingLabels","vs/nls!vs/code/electron-main/app","vs/code/electron-main/auth","vs/platform/driver/electron-main/driver","vs/platform/menubar/electron-main/menubar","vs/platform/menubar/electron-main/menubarService","vs/platform/url/electron-main/electronUrlListener","vs/platform/windows/electron-main/windowsService","vs/nls!vs/code/electron-main/auth","vs/code/node/windowsFinder","vs/platform/backup/electron-main/backupMainService","vs/platform/label/common/label","vs/platform/history/electron-main/historyMainService","vs/nls!vs/code/electron-main/logUploader","vs/platform/issue/electron-main/issueService","vs/platform/windows/node/windowsIpc","vs/platform/workspace/common/workspace","vs/nls!vs/code/electron-main/window","vs/platform/workspaces/node/workspacesIpc","vs/nls!vs/code/electron-main/windows","vs/platform/extensionManagement/node/extensionGalleryService","vs/code/electron-main/window","vs/code/electron-main/windows","vs/platform/request/node/requestService","vs/platform/request/electron-main/requestService","vs/platform/update/electron-main/updateService.linux","vs/platform/update/electron-main/updateService.win32","vs/code/electron-main/app","stream","vs/base/common/performance","net","vs/code/electron-main/main","path","native-keymap","zlib","iconv-lite","minimist"],i=function(e){
for(var i=[],n=0,r=e.length;n<r;n++)i[n]=t[e[n]];return i};define(t[103],i([0,1]),function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ok=function(e,t){if(!e)throw new Error(t?"Assertion failed ("+t+")":"Assertion Failed")}}),define(t[48],i([0,1]),function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i="undefined"!=typeof Buffer;class n{static alloc(e){return new n(i?Buffer.allocUnsafe(e):new Uint8Array(e))}static wrap(e){return new n(e)}static fromString(e){return new n(Buffer.from(e))}static concat(e,t){if(void 0===t){t=0;for(let i=0,n=e.length;i<n;i++)t+=e[i].byteLength}const i=n.alloc(t);let r=0;for(let t=0,n=e.length;t<n;t++){const n=e[t];i.set(n,r),r+=n.byteLength}return i}constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}toString(){return this.buffer.toString()}slice(e,t){return new n(this.buffer.slice(e,t))}set(e,t){this.buffer.set(e.buffer,t)}readUint32BE(e){return function(e,t){
return e[t]*Math.pow(2,24)+e[t+1]*Math.pow(2,16)+e[t+2]*Math.pow(2,8)+e[t+3]}(this.buffer,e)}writeUint32BE(e,t){!function(e,t,i){e[i+3]=t,t>>>=8,e[i+2]=t,t>>>=8,e[i+1]=t,t>>>=8,e[i]=t}(this.buffer,e,t)}readUint8(e){return function(e,t){return e[t]}(this.buffer,e)}writeUint8(e,t){!function(e,t,i){e[i]=t}(this.buffer,e,t)}}t.VSBuffer=n}),define(t[122],i([0,1]),function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=Object.prototype.hasOwnProperty;t.values=function(e){const t=[];for(let n in e)i.call(e,n)&&t.push(e[n]);return t},t.size=function(e){let t=0;for(let n in e)i.call(e,n)&&(t+=1);return t},t.first=function(e){for(let t in e)if(i.call(e,t))return e[t]},t.forEach=function(e,t){for(let n in e)if(i.call(e,n)&&!1===t({key:n,value:e[n]},function(){delete e[n]}))return},t.groupBy=function(e,t){const i=Object.create(null);for(const n of e){const e=t(n);let r=i[e];r||(r=i[e]=[]),r.push(n)}return i},t.fromMap=function(e){const t=Object.create(null);return e&&e.forEach((e,i)=>{t[i]=e
}),t}}),define(t[53],i([0,1]),function(e,t){"use strict";function i(e){return(t,i,n)=>{let r=null,o=null;if("function"==typeof n.value?(r="value",o=n.value):"function"==typeof n.get&&(r="get",o=n.get),!o)throw new Error("not supported");n[r]=e(o,i)}}Object.defineProperty(t,"__esModule",{value:!0}),t.createDecorator=i,t.memoize=function(e,t,i){let n=null,r=null;if("function"==typeof i.value?(n="value",0!==(r=i.value).length&&console.warn("Memoize should only be used in functions with zero parameters")):"function"==typeof i.get&&(n="get",r=i.get),!r)throw new Error("not supported");const o=`$memoize$${t}`;i[n]=function(...e){return this.hasOwnProperty(o)||Object.defineProperty(this,o,{configurable:!1,enumerable:!1,writable:!1,value:r.apply(this,e)}),this[o]}},t.debounce=function(e,t,n){return i((i,r)=>{const o=`$debounce$${r}`,s=`$debounce$result$${r}`;return function(...r){this[s]||(this[s]=n?n():void 0),clearTimeout(this[o]),t&&(this[s]=t(this[s],...r),r=[this[s]]),this[o]=setTimeout(()=>{i.apply(this,r),
this[s]=n?n():void 0},e)}})}}),define(t[18],i([0,1]),function(e,t){"use strict";function i(e){return e instanceof Error&&e.name===r&&e.message===r}Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{if(e.stack)throw new Error(e.message+"\n\n"+e.stack);throw e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(t=>{t(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}}t.ErrorHandler=n,t.errorHandler=new n,t.setUnexpectedErrorHandler=function(e){t.errorHandler.setUnexpectedErrorHandler(e)},t.onUnexpectedError=function(e){i(e)||t.errorHandler.onUnexpectedError(e)},
t.onUnexpectedExternalError=function(e){i(e)||t.errorHandler.onUnexpectedExternalError(e)},t.transformErrorForSerialization=function(e){if(e instanceof Error){let{name:t,message:i}=e;return{$isError:!0,name:t,message:i,stack:e.stacktrace||e.stack}}return e};const r="Canceled";t.isPromiseCanceledError=i,t.canceled=function(){const e=new Error(r);return e.name=e.message,e},t.illegalArgument=function(e){return e?new Error(`Illegal argument: ${e}`):new Error("Illegal argument")},t.illegalState=function(e){return e?new Error(`Illegal state: ${e}`):new Error("Illegal state")},t.readonly=function(e){return e?new Error(`readonly property '${e} cannot be changed'`):new Error("readonly property cannot be changed")},t.disposed=function(e){const t=new Error(`${e} has been disposed`);return t.name="DISPOSED",t},t.getErrorMessage=function(e){return e?e.message?e.message:e.stack?e.stack.split("\n")[0]:String(e):"Error"}});var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(r,o){function s(e){
try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):new i(function(t){t(e.value)}).then(s,a)}c((n=n.apply(e,t||[])).next())})};define(t[21],i([0,1,18]),function(e,t,i){"use strict";function r(e,t){let i=0,n=e.length;if(0===n)return 0;for(;i<n;){const r=Math.floor((i+n)/2);t(e[r])?n=r:i=r+1}return i}function o(e,t){return s(e,t,0,e.length-1,[]),e}function s(e,t,i,n,r){if(n<=i)return;const o=i+(n-i)/2|0;s(e,t,i,o,r),s(e,t,o+1,n,r),t(e[o],e[o+1])<=0||function(e,t,i,n,r,o){let s=i,a=n+1;for(let t=i;t<=r;t++)o[t]=e[t];for(let c=i;c<=r;c++)s>n?e[c]=o[a++]:a>r?e[c]=o[s++]:t(o[a],o[s])<0?e[c]=o[a++]:e[c]=o[s++]}(e,t,i,o,n,r)}function a(e,t,i){function n(e,t,i){if(0===t&&0===i.length)return;const n=r[r.length-1];n&&n.start+n.deleteCount===e?(n.deleteCount+=t,n.toInsert.push(...i)):r.push({start:e,deleteCount:t,toInsert:i})}const r=[];let o=0,s=0;for(;;){if(o===e.length){n(o,0,t.slice(s));break}if(s===t.length){n(o,e.length-o,[]);break}
const r=e[o],a=t[s],c=i(r,a);0===c?(o+=1,s+=1):c<0?(n(o,1,[]),o+=1):c>0&&(n(o,0,[a]),s+=1)}return r}function c(e,t,i,n,o){for(const s=i.length;n<o;n++){const o=e[n];if(t(o,i[s-1])<0){i.pop();const e=r(i,e=>t(o,e)<0);i.splice(e,0,o)}}}function l(e,t){for(let i=0;i<e.length;i++){if(t(e[i]))return i}return-1}Object.defineProperty(t,"__esModule",{value:!0}),t.tail=function(e,t=0){return e[e.length-(1+t)]},t.tail2=function(e){if(0===e.length)throw new Error("Invalid tail call");return[e.slice(0,e.length-1),e[e.length-1]]},t.equals=function(e,t,i=((e,t)=>e===t)){if(e===t)return!0;if(!e||!t)return!1;if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(!i(e[n],t[n]))return!1;return!0},t.binarySearch=function(e,t,i){let n=0,r=e.length-1;for(;n<=r;){const o=(n+r)/2|0,s=i(e[o],t);if(s<0)n=o+1;else{if(!(s>0))return o;r=o-1}}return-(n+1)},t.findFirstInSorted=r,t.mergeSort=o,t.groupBy=function(e,t){const i=[];let n=void 0;for(const r of o(e.slice(0),t))n&&0===t(n[0],r)?n.push(r):(n=[r],i.push(n));return i},
t.sortedDiff=a,t.delta=function(e,t,i){const n=a(e,t,i),r=[],o=[];for(const t of n)r.push(...e.slice(t.start,t.start+t.deleteCount)),o.push(...t.toInsert);return{removed:r,added:o}},t.top=function(e,t,i){if(0===i)return[];const n=e.slice(0,i).sort(t);return c(e,t,n,i,e.length),n},t.topAsync=function(e,t,r,o,s){return 0===r?Promise.resolve([]):new Promise((a,l)=>{(()=>n(this,void 0,void 0,function*(){const n=e.length,a=e.slice(0,r).sort(t);for(let l=r,u=Math.min(r+o,n);l<n;l=u,u=Math.min(u+o,n)){if(l>r&&(yield new Promise(e=>setTimeout(e))),s&&s.isCancellationRequested)throw i.canceled();c(e,t,a,l,u)}return a}))().then(a,l)})},t.coalesce=function(e){return e?e.filter(e=>!!e):e},t.coalesceInPlace=function(e){if(!e)return;let t=0;for(let i=0;i<e.length;i++)e[i]&&(e[t]=e[i],t+=1);e.length=t},t.move=function(e,t,i){e.splice(i,0,e.splice(t,1)[0])},t.isFalsyOrEmpty=function(e){return!Array.isArray(e)||0===e.length},t.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},t.distinct=function(e,t){
if(!t)return e.filter((t,i)=>e.indexOf(t)===i);const i=Object.create(null);return e.filter(e=>{const n=t(e);return!i[n]&&(i[n]=!0,!0)})},t.distinctES6=function(e){const t=new Set;return e.filter(e=>!t.has(e)&&(t.add(e),!0))},t.uniqueFilter=function(e){const t=Object.create(null);return i=>{const n=e(i);return!t[n]&&(t[n]=!0,!0)}},t.lastIndex=function(e,t){for(let i=e.length-1;i>=0;i--)if(t(e[i]))return i;return-1},t.firstIndex=l,t.first=function(e,t,i){const n=l(e,t);return n<0?i:e[n]},t.commonPrefixLength=function(e,t,i=((e,t)=>e===t)){let n=0;for(let r=0,o=Math.min(e.length,t.length);r<o&&i(e[r],t[r]);r++)n++;return n},t.flatten=function(e){return[].concat(...e)},t.range=function(e,t){let i="number"==typeof t?e:0;"number"==typeof t?i=e:(i=0,t=e);const n=[];if(i<=t)for(let e=i;e<t;e++)n.push(e);else for(let e=i;e>t;e--)n.push(e);return n},t.fill=function(e,t,i=[]){for(let n=0;n<e;n++)i[n]=t;return i},t.index=function(e,t,i=(e=>e)){return e.reduce((e,n)=>{const r=t(n);return e[r]=i(n,e[r]),e
},Object.create(null))},t.insert=function(e,t){return e.push(t),()=>{const i=e.indexOf(t);i>-1&&e.splice(i,1)}},t.arrayInsert=function(e,t,i){const n=e.slice(0,t),r=e.slice(t);return n.concat(i,r)},t.shuffle=function(e,t){let i;if("number"==typeof t){let e=t;i=(()=>{const t=179426549*Math.sin(e++);return t-Math.floor(t)})}else i=Math.random;for(let t=e.length-1;t>0;t-=1){const n=Math.floor(i()*(t+1)),r=e[t];e[t]=e[n],e[n]=r}},t.pushToStart=function(e,t){const i=e.indexOf(t);i>-1&&(e.splice(i,1),e.unshift(t))},t.pushToEnd=function(e,t){const i=e.indexOf(t);i>-1&&(e.splice(i,1),e.push(t))},t.find=function(e,t){for(let i=0;i<e.length;i++){const n=e[i];if(t(n,i,e))return n}},t.mapArrayOrNot=function(e,t){return Array.isArray(e)?e.map(t):t(e)},t.asArray=function(e){return Array.isArray(e)?e:[e]}}),define(t[61],i([0,1]),function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.once=function(e){const t=this;let i,n=!1;return function(){return n?i:(n=!0,i=e.apply(t,arguments))}}}),
define(t[72],i([0,1]),function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FIN={done:!0,value:void 0};var i;!function(e){function i(e,t){for(let i=e.next();!i.done;i=e.next())t(i.value)}const n={next:()=>t.FIN};e.empty=function(){return n},e.fromArray=function(e,i=0,n=e.length){return{next:()=>i>=n?t.FIN:{done:!1,value:e[i++]}}},e.from=function(t){return t?Array.isArray(t)?e.fromArray(t):t:e.empty()},e.map=function(e,i){return{next(){const n=e.next();return n.done?t.FIN:{done:!1,value:i(n.value)}}}},e.filter=function(e,i){return{next(){for(;;){const n=e.next();if(n.done)return t.FIN;if(i(n.value))return{done:!1,value:n.value}}}}},e.forEach=i,e.collect=function(e){const t=[];return i(e,e=>t.push(e)),t}}(i=t.Iterator||(t.Iterator={})),t.getSequenceIterator=function(e){return Array.isArray(e)?i.fromArray(e):e};class n{constructor(e,t=0,i=e.length,n=t-1){this.items=e,this.start=t,this.end=i,this.index=n}first(){return this.index=this.start,this.current()}next(){
return this.index=Math.min(this.index+1,this.end),this.current()}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}}t.ArrayIterator=n;class r extends n{constructor(e,t=0,i=e.length,n=t-1){super(e,t,i,n)}current(){return super.current()}previous(){return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}parent(){return null}}t.ArrayNavigator=r;class o{constructor(e,t){this.iterator=e,this.fn=t}next(){return this.fn(this.iterator.next())}}t.MappedIterator=o;class s extends o{constructor(e,t){super(e,t),this.navigator=e}current(){return this.fn(this.navigator.current())}previous(){return this.fn(this.navigator.previous())}parent(){return this.fn(this.navigator.parent())}first(){return this.fn(this.navigator.first())}last(){return this.fn(this.navigator.last())}next(){return this.fn(this.navigator.next())}}t.MappedNavigator=s}),
define(t[39],i([0,1]),function(e,t){"use strict";function i(e,t=!1){function i(t){let i=0,n=0;for(;i<t;){const t=e.charCodeAt(a);if(t>=48&&t<=57)n=16*n+t-48;else if(t>=65&&t<=70)n=16*n+t-65+10;else{if(!(t>=97&&t<=102))break;n=16*n+t-97+10}a++,i++}return i<t&&(n=-1),n}function s(){if(l="",h=0,u=a,a>=c)return u=c,d=17;let t=e.charCodeAt(a);if(n(t)){do{a++,l+=String.fromCharCode(t),t=e.charCodeAt(a)}while(n(t));return d=15}if(r(t))return a++,l+=String.fromCharCode(t),13===t&&10===e.charCodeAt(a)&&(a++,l+="\n"),d=14;switch(t){case 123:return a++,d=1;case 125:return a++,d=2;case 91:return a++,d=3;case 93:return a++,d=4;case 58:return a++,d=6;case 44:return a++,d=5;case 34:return a++,l=function(){let t="",n=a;for(;;){if(a>=c){t+=e.substring(n,a),h=2;break}let o=e.charCodeAt(a);if(34===o){t+=e.substring(n,a),a++;break}if(92!==o){if(o>=0&&o<=31){if(r(o)){t+=e.substring(n,a),h=2;break}h=6}a++}else{if(t+=e.substring(n,a),++a>=c){h=2;break}switch(n=e.charCodeAt(a++)){case 34:t+='"';break;case 92:t+="\\";break;case 47:
t+="/";break;case 98:t+="\b";break;case 102:t+="\f";break;case 110:t+="\n";break;case 114:t+="\r";break;case 116:t+="\t";break;case 117:const n=i(4);n>=0?t+=String.fromCharCode(n):h=4;break;default:h=5}n=a}}return t}(),d=10;case 47:const s=a-1;if(47===e.charCodeAt(a+1)){for(a+=2;a<c&&!r(e.charCodeAt(a));)a++;return l=e.substring(s,a),d=12}if(42===e.charCodeAt(a+1)){a+=2;const t=c-1;let i=!1;for(;a<t;){if(42===e.charCodeAt(a)&&47===e.charCodeAt(a+1)){a+=2,i=!0;break}a++}return i||(a++,h=1),l=e.substring(s,a),d=13}return l+=String.fromCharCode(t),a++,d=16;case 45:if(l+=String.fromCharCode(t),++a===c||!o(e.charCodeAt(a)))return d=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return l+=function(){const t=a;if(48===e.charCodeAt(a))a++;else for(a++;a<e.length&&o(e.charCodeAt(a));)a++;if(a<e.length&&46===e.charCodeAt(a)){if(!(++a<e.length&&o(e.charCodeAt(a))))return h=3,e.substring(t,a);for(a++;a<e.length&&o(e.charCodeAt(a));)a++}let i=a
;if(a<e.length&&(69===e.charCodeAt(a)||101===e.charCodeAt(a)))if((++a<e.length&&43===e.charCodeAt(a)||45===e.charCodeAt(a))&&a++,a<e.length&&o(e.charCodeAt(a))){for(a++;a<e.length&&o(e.charCodeAt(a));)a++;i=a}else h=3;return e.substring(t,i)}(),d=11;default:for(;a<c&&function(e){if(n(e)||r(e))return!1;switch(e){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}(t);)a++,t=e.charCodeAt(a);if(u!==a){switch(l=e.substring(u,a)){case"true":return d=8;case"false":return d=9;case"null":return d=7}return d=16}return l+=String.fromCharCode(t),a++,d=16}}let a=0,c=e.length,l="",u=0,d=16,h=0;return{setPosition:function(e){a=e,l="",u=0,d=16,h=0},getPosition:()=>a,scan:t?function(){let e;do{e=s()}while(e>=12&&e<=15);return e}:s,getToken:()=>d,getTokenValue:()=>l,getTokenOffset:()=>u,getTokenLength:()=>a-u,getTokenError:()=>h}}function n(e){return 32===e||9===e||11===e||12===e||160===e||5760===e||e>=8192&&e<=8203||8239===e||8287===e||12288===e||65279===e}function r(e){
return 10===e||13===e||8232===e||8233===e}function o(e){return e>=48&&e<=57}function s(e){if(!e.parent||!e.parent.children)return[];const t=s(e.parent);if("property"===e.parent.type){const i=e.parent.children[0].value;t.push(i)}else if("array"===e.parent.type){const i=e.parent.children.indexOf(e);-1!==i&&t.push(i)}return t}function a(e){switch(e.type){case"array":return e.children.map(a);case"object":const t=Object.create(null);for(let i of e.children){const e=i.children[1];e&&(t[i.children[0].value]=a(e))}return t;case"null":case"string":case"number":case"boolean":return e.value;default:return}}function c(e,t,i=!1){return t>=e.offset&&t<e.offset+e.length||i&&t===e.offset+e.length}function l(e,t,i=!1){if(c(e,t,i)){const n=e.children;if(Array.isArray(n))for(let e=0;e<n.length&&n[e].offset<=t;e++){const r=l(n[e],t,i);if(r)return r}return e}}function u(e,t,n=h.DEFAULT){function r(e){return e?()=>e(d.getTokenOffset(),d.getTokenLength()):()=>!0}function o(e){
return e?t=>e(t,d.getTokenOffset(),d.getTokenLength()):()=>!0}function s(){for(;;){const e=d.scan();switch(d.getTokenError()){case 4:a(14);break;case 5:a(15);break;case 3:a(13);break;case 1:_||a(11);break;case 2:a(12);break;case 6:a(16)}switch(e){case 12:case 13:_?a(10):S();break;case 16:a(1);break;case 15:case 14:break;default:return e}}}function a(e,t=[],i=[]){if(b(e),t.length+i.length>0){let e=d.getToken();for(;17!==e;){if(-1!==t.indexOf(e)){s();break}if(-1!==i.indexOf(e))break;e=s()}}}function c(e){const t=d.getTokenValue();return e?w(t):p(t),s(),!0}function l(){return 10!==d.getToken()?(a(3,[],[2,5]),!1):(c(!1),6===d.getToken()?(y(":"),s(),u()||a(4,[],[2,5])):a(5,[],[2,5]),!0)}function u(){switch(d.getToken()){case 3:return function(){m(),s();let e=!1;for(;4!==d.getToken()&&17!==d.getToken();){if(5===d.getToken()){if(e||a(4,[],[]),y(","),s(),4===d.getToken()&&C)break}else e&&a(6,[],[]);u()||a(4,[],[4,5]),e=!0}return v(),4!==d.getToken()?a(8,[4],[]):s(),!0}();case 1:return function(){f(),s();let e=!1
;for(;2!==d.getToken()&&17!==d.getToken();){if(5===d.getToken()){if(e||a(4,[],[]),y(","),s(),2===d.getToken()&&C)break}else e&&a(6,[],[]);l()||a(4,[],[2,5]),e=!0}return g(),2!==d.getToken()?a(7,[2],[]):s(),!0}();case 10:return c(!0);default:return function(){switch(d.getToken()){case 11:let e=0;try{"number"!=typeof(e=JSON.parse(d.getTokenValue()))&&(a(2),e=0)}catch(e){a(2)}w(e);break;case 7:w(null);break;case 8:w(!0);break;case 9:w(!1);break;default:return!1}return s(),!0}()}}const d=i(e,!1),f=r(t.onObjectBegin),p=o(t.onObjectProperty),g=r(t.onObjectEnd),m=r(t.onArrayBegin),v=r(t.onArrayEnd),w=o(t.onLiteralValue),y=o(t.onSeparator),S=r(t.onComment),b=o(t.onError),_=n&&n.disallowComments,C=n&&n.allowTrailingComma;return s(),17===d.getToken()||(u()?(17!==d.getToken()&&a(9,[],[]),!0):(a(4,[],[]),!1))}function d(e){switch(typeof e){case"boolean":return"boolean";case"number":return"number";case"string":return"string";default:return"null"}}Object.defineProperty(t,"__esModule",{value:!0});!function(e){
e[e.None=0]="None",e[e.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=2]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",e[e.InvalidUnicode=4]="InvalidUnicode",e[e.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",e[e.InvalidCharacter=6]="InvalidCharacter"}(t.ScanError||(t.ScanError={}));!function(e){e[e.OpenBraceToken=1]="OpenBraceToken",e[e.CloseBraceToken=2]="CloseBraceToken",e[e.OpenBracketToken=3]="OpenBracketToken",e[e.CloseBracketToken=4]="CloseBracketToken",e[e.CommaToken=5]="CommaToken",e[e.ColonToken=6]="ColonToken",e[e.NullKeyword=7]="NullKeyword",e[e.TrueKeyword=8]="TrueKeyword",e[e.FalseKeyword=9]="FalseKeyword",e[e.StringLiteral=10]="StringLiteral",e[e.NumericLiteral=11]="NumericLiteral",e[e.LineCommentTrivia=12]="LineCommentTrivia",e[e.BlockCommentTrivia=13]="BlockCommentTrivia",e[e.LineBreakTrivia=14]="LineBreakTrivia",e[e.Trivia=15]="Trivia",e[e.Unknown=16]="Unknown",e[e.EOF=17]="EOF"}(t.SyntaxKind||(t.SyntaxKind={}));!function(e){
e[e.InvalidSymbol=1]="InvalidSymbol",e[e.InvalidNumberFormat=2]="InvalidNumberFormat",e[e.PropertyNameExpected=3]="PropertyNameExpected",e[e.ValueExpected=4]="ValueExpected",e[e.ColonExpected=5]="ColonExpected",e[e.CommaExpected=6]="CommaExpected",e[e.CloseBraceExpected=7]="CloseBraceExpected",e[e.CloseBracketExpected=8]="CloseBracketExpected",e[e.EndOfFileExpected=9]="EndOfFileExpected",e[e.InvalidCommentToken=10]="InvalidCommentToken",e[e.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=12]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",e[e.InvalidUnicode=14]="InvalidUnicode",e[e.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",e[e.InvalidCharacter=16]="InvalidCharacter"}(t.ParseErrorCode||(t.ParseErrorCode={}));var h;!function(e){e.DEFAULT={allowTrailingComma:!0}}(h=t.ParseOptions||(t.ParseOptions={})),t.createScanner=i;var f;!function(e){e[e.nullCharacter=0]="nullCharacter",e[e.maxAsciiCharacter=127]="maxAsciiCharacter",
e[e.lineFeed=10]="lineFeed",e[e.carriageReturn=13]="carriageReturn",e[e.lineSeparator=8232]="lineSeparator",e[e.paragraphSeparator=8233]="paragraphSeparator",e[e.nextLine=133]="nextLine",e[e.space=32]="space",e[e.nonBreakingSpace=160]="nonBreakingSpace",e[e.enQuad=8192]="enQuad",e[e.emQuad=8193]="emQuad",e[e.enSpace=8194]="enSpace",e[e.emSpace=8195]="emSpace",e[e.threePerEmSpace=8196]="threePerEmSpace",e[e.fourPerEmSpace=8197]="fourPerEmSpace",e[e.sixPerEmSpace=8198]="sixPerEmSpace",e[e.figureSpace=8199]="figureSpace",e[e.punctuationSpace=8200]="punctuationSpace",e[e.thinSpace=8201]="thinSpace",e[e.hairSpace=8202]="hairSpace",e[e.zeroWidthSpace=8203]="zeroWidthSpace",e[e.narrowNoBreakSpace=8239]="narrowNoBreakSpace",e[e.ideographicSpace=12288]="ideographicSpace",e[e.mathematicalSpace=8287]="mathematicalSpace",e[e.ogham=5760]="ogham",e[e._=95]="_",e[e.$=36]="$",e[e._0=48]="_0",e[e._1=49]="_1",e[e._2=50]="_2",e[e._3=51]="_3",e[e._4=52]="_4",e[e._5=53]="_5",e[e._6=54]="_6",e[e._7=55]="_7",e[e._8=56]="_8",
e[e._9=57]="_9",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.ampersand=38]="ampersand",e[e.asterisk=42]="asterisk",e[e.at=64]="at",e[e.backslash=92]="backslash",e[e.bar=124]="bar",e[e.caret=94]="caret",e[e.closeBrace=125]="closeBrace",e[e.closeBracket=93]="closeBracket",e[e.closeParen=41]="closeParen",
e[e.colon=58]="colon",e[e.comma=44]="comma",e[e.dot=46]="dot",e[e.doubleQuote=34]="doubleQuote",e[e.equals=61]="equals",e[e.exclamation=33]="exclamation",e[e.greaterThan=62]="greaterThan",e[e.lessThan=60]="lessThan",e[e.minus=45]="minus",e[e.openBrace=123]="openBrace",e[e.openBracket=91]="openBracket",e[e.openParen=40]="openParen",e[e.percent=37]="percent",e[e.plus=43]="plus",e[e.question=63]="question",e[e.semicolon=59]="semicolon",e[e.singleQuote=39]="singleQuote",e[e.slash=47]="slash",e[e.tilde=126]="tilde",e[e.backspace=8]="backspace",e[e.formFeed=12]="formFeed",e[e.byteOrderMark=65279]="byteOrderMark",e[e.tab=9]="tab",e[e.verticalTab=11]="verticalTab"}(f||(f={})),t.getLocation=function(e,t){function i(e,t,i,n){s.value=e,s.offset=t,s.length=i,s.type=n,s.colonOffset=void 0,o=s}const n=[],r=new Object;let o=void 0;const s={value:{},offset:0,length:0,type:"object",parent:void 0};let a=!1;try{u(e,{onObjectBegin:(e,i)=>{if(t<=e)throw r;o=void 0,a=t>e,n.push("")},onObjectProperty:(e,o,s)=>{if(t<o)throw r
;if(i(e,o,s,"property"),n[n.length-1]=e,t<=o+s)throw r},onObjectEnd:(e,i)=>{if(t<=e)throw r;o=void 0,n.pop()},onArrayBegin:(e,i)=>{if(t<=e)throw r;o=void 0,n.push(0)},onArrayEnd:(e,i)=>{if(t<=e)throw r;o=void 0,n.pop()},onLiteralValue:(e,n,o)=>{if(t<n)throw r;if(i(e,n,o,d(e)),t<=n+o)throw r},onSeparator:(e,i,s)=>{if(t<=i)throw r;if(":"===e&&o&&"property"===o.type)o.colonOffset=i,a=!1,o=void 0;else if(","===e){const e=n[n.length-1];"number"==typeof e?n[n.length-1]=e+1:(a=!0,n[n.length-1]=""),o=void 0}}})}catch(e){if(e!==r)throw e}return{path:n,previousNode:o,isAtPropertyKey:a,matches:e=>{let t=0;for(let i=0;t<e.length&&i<n.length;i++)if(e[t]===n[i]||"*"===e[t])t++;else if("**"!==e[t])return!1;return t===e.length}}},t.parse=function(e,t=[],i=h.DEFAULT){function n(e){Array.isArray(o)?o.push(e):r&&(o[r]=e)}let r=null,o=[];const s=[];return u(e,{onObjectBegin:()=>{const e={};n(e),s.push(o),o=e,r=null},onObjectProperty:e=>{r=e},onObjectEnd:()=>{o=s.pop()},onArrayBegin:()=>{const e=[];n(e),s.push(o),o=e,r=null},
onArrayEnd:()=>{o=s.pop()},onLiteralValue:n,onError:(e,i,n)=>{t.push({error:e,offset:i,length:n})}},i),o[0]},t.parseTree=function(e,t=[],i=h.DEFAULT){function n(e){"property"===o.type&&(o.length=e-o.offset,o=o.parent)}function r(e){return o.children.push(e),e}let o={type:"array",offset:-1,length:-1,children:[],parent:void 0};u(e,{onObjectBegin:e=>{o=r({type:"object",offset:e,length:-1,parent:o,children:[]})},onObjectProperty:(e,t,i)=>{(o=r({type:"property",offset:t,length:-1,parent:o,children:[]})).children.push({type:"string",value:e,offset:t,length:i,parent:o})},onObjectEnd:(e,t)=>{o.length=e+t-o.offset,o=o.parent,n(e+t)},onArrayBegin:(e,t)=>{o=r({type:"array",offset:e,length:-1,parent:o,children:[]})},onArrayEnd:(e,t)=>{o.length=e+t-o.offset,o=o.parent,n(e+t)},onLiteralValue:(e,t,i)=>{r({type:d(e),offset:t,length:i,parent:o,value:e}),n(t+i)},onSeparator:(e,t,i)=>{"property"===o.type&&(":"===e?o.colonOffset=t:","===e&&n(t))},onError:(e,i,n)=>{t.push({error:e,offset:i,length:n})}},i);const s=o.children[0]
;return s&&delete s.parent,s},t.findNodeAtLocation=function(e,t){if(!e)return;let i=e;for(let e of t)if("string"==typeof e){if("object"!==i.type||!Array.isArray(i.children))return;let t=!1;for(const n of i.children)if(Array.isArray(n.children)&&n.children[0].value===e){i=n.children[1],t=!0;break}if(!t)return}else{const t=e;if("array"!==i.type||t<0||!Array.isArray(i.children)||t>=i.children.length)return;i=i.children[t]}return i},t.getNodePath=s,t.getNodeValue=a,t.contains=c,t.findNodeAtOffset=l,t.visit=u,t.stripComments=function(e,t){let n,r,o=i(e),s=[],a=0;do{switch(r=o.getPosition(),n=o.scan()){case 12:case 13:case 17:a!==r&&s.push(e.substring(a,r)),void 0!==t&&s.push(o.getTokenValue().replace(/[^\r\n]/g,t)),a=o.getPosition()}}while(17!==n);return s.join("")}}),define(t[136],i([0,1,39]),function(e,t,i){"use strict";function n(e,t,n){function s(){return p+r(g,l+v)}function a(){let e=w.scan();for(m=!1;15===e||14===e;)m=m||14===e,e=w.scan();return y=16===e||0!==w.getTokenError(),e}function c(t,i,n){
!y&&i<f&&n>h&&e.substring(i,n)!==t&&S.push({offset:i,length:n-i,content:t})}let l,u,d,h,f;if(t){for(h=t.offset,f=h+t.length,d=h;d>0&&!o(e,d-1);)d--;let i=f;for(;i<e.length&&!o(e,i);)i++;u=e.substring(d,i),l=function(e,t){let i=0,n=0;const r=t.tabSize||4;for(;i<e.length;){const t=e.charAt(i);if(" "===t)n++;else{if("\t"!==t)break;n+=r}i++}return Math.floor(n/r)}(u,n)}else u=e,l=0,d=0,h=0,f=e.length;const p=function(e,t){for(let e=0;e<t.length;e++){const i=t.charAt(e);if("\r"===i)return e+1<t.length&&"\n"===t.charAt(e+1)?"\r\n":"\r";if("\n"===i)return"\n"}return e&&e.eol||"\n"}(n,e);let g,m=!1,v=0;g=n.insertSpaces?r(" ",n.tabSize||4):"\t";const w=i.createScanner(u,!1);let y=!1;const S=[];let b=a();if(17!==b){const e=w.getTokenOffset()+d;c(r(g,l),d,e)}for(;17!==b;){let e=w.getTokenOffset()+w.getTokenLength()+d,t=a(),i="";for(;!m&&(12===t||13===t);){c(" ",e,w.getTokenOffset()+d),e=w.getTokenOffset()+w.getTokenLength()+d,i=12===t?s():"",t=a()}if(2===t)1!==b&&(v--,i=s());else if(4===t)3!==b&&(v--,i=s());else{
switch(b){case 3:case 1:v++,i=s();break;case 5:case 12:i=s();break;case 13:i=m?s():" ";break;case 6:i=" ";break;case 10:if(6===t){i="";break}case 7:case 8:case 9:case 11:case 2:case 4:12===t||13===t?i=" ":5!==t&&17!==t&&(y=!0);break;case 16:y=!0}!m||12!==t&&13!==t||(i=s())}c(i,e,w.getTokenOffset()+d),b=t}return S}function r(e,t){let i="";for(let n=0;n<t;n++)i+=e;return i}function o(e,t){return-1!=="\r\n".indexOf(e.charAt(t))}Object.defineProperty(t,"__esModule",{value:!0}),t.format=n,t.isEOL=o}),define(t[155],i([0,1,39,136]),function(e,t,i,n){"use strict";function r(e,t,n,r,s){const a=t.slice(),c=i.parseTree(e,[]);let l=void 0,u=void 0;for(;a.length>0&&(u=a.pop(),void 0===(l=i.findNodeAtLocation(c,a))&&void 0!==n);)n="string"==typeof u?{[u]:n}:[n];if(l){if("object"===l.type&&"string"==typeof u&&Array.isArray(l.children)){const t=i.findNodeAtLocation(l,[u]);if(void 0!==t){if(void 0===n){if(!t.parent)throw new Error("Malformed AST");const i=l.children.indexOf(t.parent);let n,s=t.parent.offset+t.parent.length
;if(i>0){const e=l.children[i-1];n=e.offset+e.length}else if(n=l.offset+1,l.children.length>1){s=l.children[1].offset}return o(e,{offset:n,length:s-n,content:""},r)}return o(e,{offset:t.offset,length:t.length,content:JSON.stringify(n)},r)}{if(void 0===n)return[];const t=`${JSON.stringify(u)}: ${JSON.stringify(n)}`,i=s?s(l.children.map(e=>e.children[0].value)):l.children.length;let a;if(i>0){const e=l.children[i-1];a={offset:e.offset+e.length,length:0,content:","+t}}else a=0===l.children.length?{offset:l.offset+1,length:0,content:t}:{offset:l.offset+1,length:0,content:t+","};return o(e,a,r)}}if("array"===l.type&&"number"==typeof u&&Array.isArray(l.children)){if(-1===u){const t=`${JSON.stringify(n)}`;let i;if(0===l.children.length)i={offset:l.offset+1,length:0,content:t};else{const e=l.children[l.children.length-1];i={offset:e.offset+e.length,length:0,content:","+t}}return o(e,i,r)}if(void 0===n&&l.children.length>=0){const t=u,i=l.children[t];let n;if(1===l.children.length)n={offset:l.offset+1,
length:l.length-2,content:""};else if(l.children.length-1===t){const e=l.children[t-1],i=e.offset+e.length;n={offset:i,length:l.offset+l.length-2-i,content:""}}else n={offset:i.offset,length:l.children[t+1].offset-i.offset,content:""};return o(e,n,r)}throw new Error("Array modification not supported yet")}throw new Error(`Can not add ${"number"!=typeof u?"index":"property"} to parent of type ${l.type}`)}if(void 0===n)throw new Error("Can not delete in empty document");return o(e,{offset:c?c.offset:0,length:c?c.length:0,content:JSON.stringify(n)},r)}function o(e,t,i){let r=s(e,t),o=t.offset,a=t.offset+t.content.length;if(0===t.length||0===t.content.length){for(;o>0&&!n.isEOL(r,o-1);)o--;for(;a<r.length&&!n.isEOL(r,a);)a++}const c=n.format(r,{offset:o,length:a-o},i);for(let e=c.length-1;e>=0;e--){const t=c[e];r=s(r,t),o=Math.min(o,t.offset),a=Math.max(a,t.offset+t.length),a+=t.content.length-t.length}return[{offset:o,length:e.length-(r.length-a)-o,content:r.substring(o,a)}]}function s(e,t){
return e.substring(0,t.offset)+t.content+e.substring(t.offset+t.length)}Object.defineProperty(t,"__esModule",{value:!0}),t.removeProperty=function(e,t,i){return r(e,t,void 0,i)},t.setProperty=r,t.applyEdit=s,t.isWS=function(e,t){return-1!=="\r\n \t".indexOf(e.charAt(t))}}),define(t[52],i([0,1,18]),function(e,t,i){"use strict";function n(e,t){const i=!!(2048&e),n=!!(256&e);return new l(2===t?n:i,!!(1024&e),!!(512&e),2===t?i:n,255&e)}Object.defineProperty(t,"__esModule",{value:!0});!function(e){e[e.Unknown=0]="Unknown",e[e.Backspace=1]="Backspace",e[e.Tab=2]="Tab",e[e.Enter=3]="Enter",e[e.Shift=4]="Shift",e[e.Ctrl=5]="Ctrl",e[e.Alt=6]="Alt",e[e.PauseBreak=7]="PauseBreak",e[e.CapsLock=8]="CapsLock",e[e.Escape=9]="Escape",e[e.Space=10]="Space",e[e.PageUp=11]="PageUp",e[e.PageDown=12]="PageDown",e[e.End=13]="End",e[e.Home=14]="Home",e[e.LeftArrow=15]="LeftArrow",e[e.UpArrow=16]="UpArrow",e[e.RightArrow=17]="RightArrow",e[e.DownArrow=18]="DownArrow",e[e.Insert=19]="Insert",e[e.Delete=20]="Delete",
e[e.KEY_0=21]="KEY_0",e[e.KEY_1=22]="KEY_1",e[e.KEY_2=23]="KEY_2",e[e.KEY_3=24]="KEY_3",e[e.KEY_4=25]="KEY_4",e[e.KEY_5=26]="KEY_5",e[e.KEY_6=27]="KEY_6",e[e.KEY_7=28]="KEY_7",e[e.KEY_8=29]="KEY_8",e[e.KEY_9=30]="KEY_9",e[e.KEY_A=31]="KEY_A",e[e.KEY_B=32]="KEY_B",e[e.KEY_C=33]="KEY_C",e[e.KEY_D=34]="KEY_D",e[e.KEY_E=35]="KEY_E",e[e.KEY_F=36]="KEY_F",e[e.KEY_G=37]="KEY_G",e[e.KEY_H=38]="KEY_H",e[e.KEY_I=39]="KEY_I",e[e.KEY_J=40]="KEY_J",e[e.KEY_K=41]="KEY_K",e[e.KEY_L=42]="KEY_L",e[e.KEY_M=43]="KEY_M",e[e.KEY_N=44]="KEY_N",e[e.KEY_O=45]="KEY_O",e[e.KEY_P=46]="KEY_P",e[e.KEY_Q=47]="KEY_Q",e[e.KEY_R=48]="KEY_R",e[e.KEY_S=49]="KEY_S",e[e.KEY_T=50]="KEY_T",e[e.KEY_U=51]="KEY_U",e[e.KEY_V=52]="KEY_V",e[e.KEY_W=53]="KEY_W",e[e.KEY_X=54]="KEY_X",e[e.KEY_Y=55]="KEY_Y",e[e.KEY_Z=56]="KEY_Z",e[e.Meta=57]="Meta",e[e.ContextMenu=58]="ContextMenu",e[e.F1=59]="F1",e[e.F2=60]="F2",e[e.F3=61]="F3",e[e.F4=62]="F4",e[e.F5=63]="F5",e[e.F6=64]="F6",e[e.F7=65]="F7",e[e.F8=66]="F8",e[e.F9=67]="F9",e[e.F10=68]="F10",
e[e.F11=69]="F11",e[e.F12=70]="F12",e[e.F13=71]="F13",e[e.F14=72]="F14",e[e.F15=73]="F15",e[e.F16=74]="F16",e[e.F17=75]="F17",e[e.F18=76]="F18",e[e.F19=77]="F19",e[e.NumLock=78]="NumLock",e[e.ScrollLock=79]="ScrollLock",e[e.US_SEMICOLON=80]="US_SEMICOLON",e[e.US_EQUAL=81]="US_EQUAL",e[e.US_COMMA=82]="US_COMMA",e[e.US_MINUS=83]="US_MINUS",e[e.US_DOT=84]="US_DOT",e[e.US_SLASH=85]="US_SLASH",e[e.US_BACKTICK=86]="US_BACKTICK",e[e.US_OPEN_SQUARE_BRACKET=87]="US_OPEN_SQUARE_BRACKET",e[e.US_BACKSLASH=88]="US_BACKSLASH",e[e.US_CLOSE_SQUARE_BRACKET=89]="US_CLOSE_SQUARE_BRACKET",e[e.US_QUOTE=90]="US_QUOTE",e[e.OEM_8=91]="OEM_8",e[e.OEM_102=92]="OEM_102",e[e.NUMPAD_0=93]="NUMPAD_0",e[e.NUMPAD_1=94]="NUMPAD_1",e[e.NUMPAD_2=95]="NUMPAD_2",e[e.NUMPAD_3=96]="NUMPAD_3",e[e.NUMPAD_4=97]="NUMPAD_4",e[e.NUMPAD_5=98]="NUMPAD_5",e[e.NUMPAD_6=99]="NUMPAD_6",e[e.NUMPAD_7=100]="NUMPAD_7",e[e.NUMPAD_8=101]="NUMPAD_8",e[e.NUMPAD_9=102]="NUMPAD_9",e[e.NUMPAD_MULTIPLY=103]="NUMPAD_MULTIPLY",e[e.NUMPAD_ADD=104]="NUMPAD_ADD",
e[e.NUMPAD_SEPARATOR=105]="NUMPAD_SEPARATOR",e[e.NUMPAD_SUBTRACT=106]="NUMPAD_SUBTRACT",e[e.NUMPAD_DECIMAL=107]="NUMPAD_DECIMAL",e[e.NUMPAD_DIVIDE=108]="NUMPAD_DIVIDE",e[e.KEY_IN_COMPOSITION=109]="KEY_IN_COMPOSITION",e[e.ABNT_C1=110]="ABNT_C1",e[e.ABNT_C2=111]="ABNT_C2",e[e.MAX_VALUE=112]="MAX_VALUE"}(t.KeyCode||(t.KeyCode={}));class r{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}}const o=new r,s=new r,a=new r;!function(){function e(e,t,i=t,n=i){o.define(e,t),s.define(e,i),a.define(e,n)}e(0,"unknown"),e(1,"Backspace"),e(2,"Tab"),e(3,"Enter"),e(4,"Shift"),e(5,"Ctrl"),e(6,"Alt"),e(7,"PauseBreak"),e(8,"CapsLock"),e(9,"Escape"),e(10,"Space"),e(11,"PageUp"),e(12,"PageDown"),e(13,"End"),e(14,"Home"),e(15,"LeftArrow","Left"),e(16,"UpArrow","Up"),e(17,"RightArrow","Right"),e(18,"DownArrow","Down"),
e(19,"Insert"),e(20,"Delete"),e(21,"0"),e(22,"1"),e(23,"2"),e(24,"3"),e(25,"4"),e(26,"5"),e(27,"6"),e(28,"7"),e(29,"8"),e(30,"9"),e(31,"A"),e(32,"B"),e(33,"C"),e(34,"D"),e(35,"E"),e(36,"F"),e(37,"G"),e(38,"H"),e(39,"I"),e(40,"J"),e(41,"K"),e(42,"L"),e(43,"M"),e(44,"N"),e(45,"O"),e(46,"P"),e(47,"Q"),e(48,"R"),e(49,"S"),e(50,"T"),e(51,"U"),e(52,"V"),e(53,"W"),e(54,"X"),e(55,"Y"),e(56,"Z"),e(57,"Meta"),e(58,"ContextMenu"),e(59,"F1"),e(60,"F2"),e(61,"F3"),e(62,"F4"),e(63,"F5"),e(64,"F6"),e(65,"F7"),e(66,"F8"),e(67,"F9"),e(68,"F10"),e(69,"F11"),e(70,"F12"),e(71,"F13"),e(72,"F14"),e(73,"F15"),e(74,"F16"),e(75,"F17"),e(76,"F18"),e(77,"F19"),e(78,"NumLock"),e(79,"ScrollLock"),e(80,";",";","OEM_1"),e(81,"=","=","OEM_PLUS"),e(82,",",",","OEM_COMMA"),e(83,"-","-","OEM_MINUS"),e(84,".",".","OEM_PERIOD"),e(85,"/","/","OEM_2"),e(86,"`","`","OEM_3"),e(110,"ABNT_C1"),e(111,"ABNT_C2"),e(87,"[","[","OEM_4"),e(88,"\\","\\","OEM_5"),e(89,"]","]","OEM_6"),e(90,"'","'","OEM_7"),e(91,"OEM_8"),e(92,"OEM_102"),e(93,"NumPad0"),
e(94,"NumPad1"),e(95,"NumPad2"),e(96,"NumPad3"),e(97,"NumPad4"),e(98,"NumPad5"),e(99,"NumPad6"),e(100,"NumPad7"),e(101,"NumPad8"),e(102,"NumPad9"),e(103,"NumPad_Multiply"),e(104,"NumPad_Add"),e(105,"NumPad_Separator"),e(106,"NumPad_Subtract"),e(107,"NumPad_Decimal"),e(108,"NumPad_Divide")}();!function(e){e.toString=function(e){return o.keyCodeToStr(e)},e.fromString=function(e){return o.strToKeyCode(e)},e.toUserSettingsUS=function(e){return s.keyCodeToStr(e)},e.toUserSettingsGeneral=function(e){return a.keyCodeToStr(e)},e.fromUserSettings=function(e){return s.strToKeyCode(e)||a.strToKeyCode(e)}}(t.KeyCodeUtils||(t.KeyCodeUtils={}));var c;!function(e){e[e.CtrlCmd=2048]="CtrlCmd",e[e.Shift=1024]="Shift",e[e.Alt=512]="Alt",e[e.WinCtrl=256]="WinCtrl",e[e.KeyCode=255]="KeyCode"}(c||(c={}));!function(e){e[e.CtrlCmd=2048]="CtrlCmd",e[e.Shift=1024]="Shift",e[e.Alt=512]="Alt",e[e.WinCtrl=256]="WinCtrl"}(t.KeyMod||(t.KeyMod={})),t.KeyChord=function(e,t){return(e|(65535&t)<<16>>>0)>>>0},t.createKeybinding=function(e,t){
if(0===e)return null;const i=(65535&e)>>>0,r=(4294901760&e)>>>16;return new u(0!==r?[n(i,t),n(r,t)]:[n(i,t)])},t.createSimpleKeybinding=n;class l{constructor(e,t,i,n,r){this.ctrlKey=e,this.shiftKey=t,this.altKey=i,this.metaKey=n,this.keyCode=r}equals(e){return this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}getHashCode(){return`${this.ctrlKey?"1":"0"}${this.shiftKey?"1":"0"}${this.altKey?"1":"0"}${this.metaKey?"1":"0"}${this.keyCode}`}isModifierKey(){return 0===this.keyCode||5===this.keyCode||57===this.keyCode||6===this.keyCode||4===this.keyCode}toChord(){return new u([this])}isDuplicateModifierCase(){return this.ctrlKey&&5===this.keyCode||this.shiftKey&&4===this.keyCode||this.altKey&&6===this.keyCode||this.metaKey&&57===this.keyCode}}t.SimpleKeybinding=l;class u{constructor(e){if(0===e.length)throw i.illegalArgument("parts");this.parts=e}getHashCode(){let e="";for(let t=0,i=this.parts.length;t<i;t++)0!==t&&(e+=";"),
e+=this.parts[t].getHashCode();return e}equals(e){if(null===e)return!1;if(this.parts.length!==e.parts.length)return!1;for(let t=0;t<this.parts.length;t++)if(!this.parts[t].equals(e.parts[t]))return!1;return!0}}t.ChordKeybinding=u;class d{constructor(e,t,i,n,r,o){this.ctrlKey=e,this.shiftKey=t,this.altKey=i,this.metaKey=n,this.keyLabel=r,this.keyAriaLabel=o}}t.ResolvedKeybindingPart=d;class h{}t.ResolvedKeybinding=h}),define(t[6],i([0,1,61]),function(e,t,i){"use strict";function n(e,...t){if(Array.isArray(e))return e.forEach(e=>e&&e.dispose()),[];if(0!==t.length)return n(e),n(t),[];if(e)return e.dispose(),e}Object.defineProperty(t,"__esModule",{value:!0}),t.isDisposable=function(e){return"function"==typeof e.dispose&&0===e.dispose.length},t.dispose=n,t.combinedDisposable=function(e){return{dispose:()=>n(e)}},t.toDisposable=function(e){return{dispose(){e()}}};class r{constructor(){this._toDispose=[],this._lifecycle_disposable_isDisposed=!1}get toDispose(){return this._toDispose}dispose(){
this._lifecycle_disposable_isDisposed=!0,this._toDispose=n(this._toDispose)}_register(e){return this._lifecycle_disposable_isDisposed?(console.warn("Registering disposable on object that has already been disposed."),e.dispose()):this._toDispose.push(e),e}}r.None=Object.freeze({dispose(){}}),t.Disposable=r;class o{constructor(){this.references=Object.create(null)}acquire(e){let t=this.references[e];t||(t=this.references[e]={counter:0,object:this.createReferencedObject(e)});const{object:n}=t,r=i.once(()=>{0==--t.counter&&(this.destroyReferencedObject(e,t.object),delete this.references[e])});return t.counter++,{object:n,dispose:r}}}t.ReferenceCollection=o;class s{constructor(e){this.object=e}dispose(){}}t.ImmortalReference=s}),define(t[124],i([0,1,72]),function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(e){this.element=e}}class r{constructor(){this._size=0}get size(){return this._size}isEmpty(){return!this._first}clear(){this._first=void 0,this._last=void 0,
this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){const i=new n(e);if(this._first)if(t){const e=this._last;this._last=i,i.prev=e,e.next=i}else{const e=this._first;this._first=i,i.next=e,e.prev=i}else this._first=i,this._last=i;return this._size+=1,this._remove.bind(this,i)}shift(){if(this._first){const e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last){const e=this._last.element;return this._remove(this._last),e}}_remove(e){let t=this._first;for(;t instanceof n;){if(t===e){if(t.prev&&t.next){const e=t.prev;e.next=t.next,t.next.prev=e}else t.prev||t.next?t.next?t.prev||(this._first=this._first.next,this._first.prev=void 0):(this._last=this._last.prev,this._last.next=void 0):(this._first=void 0,this._last=void 0);this._size-=1;break}t=t.next}}iterator(){let e,t=this._first;return{next:()=>t?(e?e.value=t.element:e={done:!1,value:t.element},t=t.next,e):i.FIN}}toArray(){const e=[]
;for(let t=this._first;t instanceof n;t=t.next)e.push(t.element);return e}}t.LinkedList=r}),define(t[3],i([0,1,18,61,6,124]),function(e,t,i,r,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a;!function(e){function t(e){return(t,i=null,n)=>{let r,o=!1;return r=e(e=>{if(!o)return r?r.dispose():o=!0,t.call(i,e)},null,n),o&&r.dispose(),r}}function i(e,t){return a((i,n=null,r)=>e(e=>i.call(n,t(e)),null,r))}function n(e,t){return a((i,n=null,r)=>e(e=>{t(e),i.call(n,e)},null,r))}function r(e,t){return a((i,n=null,r)=>e(e=>t(e)&&i.call(n,e),null,r))}function s(e,t,n){let r=n;return i(e,e=>r=t(r,e))}function a(e){let t;const i=new u({onFirstListenerAdd(){t=e(i.fire,i)},onLastListenerRemove(){t.dispose()}});return i.event}function c(e){let t,i=!0;return r(e,e=>{const n=i||e!==t;return i=!1,t=e,n})}const l={dispose(){}};e.None=function(){return l},e.once=t,e.map=i,e.forEach=n,e.filter=r,e.signal=function(e){return e},e.any=function(...e){
return(t,i=null,n)=>o.combinedDisposable(e.map(e=>e(e=>t.call(i,e),null,n)))},e.reduce=s,e.snapshot=a,e.debounce=function(e,t,i=100,n=!1,r){let o,s=void 0,a=void 0,c=0;const l=new u({leakWarningThreshold:r,onFirstListenerAdd(){o=e(e=>{c++,s=t(s,e),n&&!a&&l.fire(s),clearTimeout(a),a=setTimeout(()=>{const e=s;s=void 0,a=void 0,(!n||c>1)&&l.fire(e),c=0},i)})},onLastListenerRemove(){o.dispose()}});return l.event},e.stopwatch=function(e){const n=(new Date).getTime();return i(t(e),e=>(new Date).getTime()-n)},e.latch=c,e.buffer=function(e,t=!1,i=[]){let n=i.slice(),r=e(e=>{n?n.push(e):s.fire(e)});const o=()=>{n&&n.forEach(e=>s.fire(e)),n=null},s=new u({onFirstListenerAdd(){r||(r=e(e=>s.fire(e)))},onFirstListenerDidAdd(){n&&(t?setTimeout(o):o())},onLastListenerRemove(){r&&r.dispose(),r=null}});return s.event},e.echo=function(e,t=!1,i=[]){i=i.slice(),e(e=>{i.push(e),r.fire(e)});const n=(e,t)=>i.forEach(i=>e.call(t,i)),r=new u({onListenerDidAdd(e,i,r){t?setTimeout(()=>n(i,r)):n(i,r)}});return r.event};class d{
constructor(e){this.event=e}map(e){return new d(i(this.event,e))}forEach(e){return new d(n(this.event,e))}filter(e){return new d(r(this.event,e))}reduce(e,t){return new d(s(this.event,e,t))}latch(){return new d(c(this.event))}on(e,t,i){return this.event(e,t,i)}once(e,i,n){return t(this.event)(e,i,n)}}e.chain=function(e){return new d(e)},e.fromNodeEventEmitter=function(e,t,i=(e=>e)){const n=(...e)=>r.fire(i(...e)),r=new u({onFirstListenerAdd:()=>e.on(t,n),onLastListenerRemove:()=>e.removeListener(t,n)});return r.event},e.fromPromise=function(e){const t=new u;let i=!1;return e.then(void 0,()=>null).then(()=>{i?t.fire(void 0):setTimeout(()=>t.fire(void 0),0)}),i=!0,t.event},e.toPromise=function(e){return new Promise(i=>t(e)(i))}}(a=t.Event||(t.Event={}));let c=-1;t.setGlobalLeakWarningThreshold=function(e){const t=c;return c=e,{dispose(){c=t}}};class l{constructor(e,t=Math.random().toString(18).slice(2,5)){this.customThreshold=e,this.name=t,this._warnCountdown=0}dispose(){this._stacks&&this._stacks.clear()}
check(e){let t=c;if("number"==typeof this.customThreshold&&(t=this.customThreshold),t<=0||e<t)return;this._stacks||(this._stacks=new Map);const i=(new Error).stack.split("\n").slice(3).join("\n"),n=this._stacks.get(i)||0;if(this._stacks.set(i,n+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=.5*t;let i,n=0;this._stacks.forEach((e,t)=>{(!i||n<e)&&(i=t,n=e)}),console.warn(`[${this.name}] potential listener LEAK detected, having ${e} listeners already. MOST frequent listener (${n}):`),console.warn(i)}return()=>{const e=this._stacks.get(i)||0;this._stacks.set(i,e-1)}}}class u{constructor(e){this._disposed=!1,this._options=e,this._leakageMon=c>0?new l(this._options&&this._options.leakWarningThreshold):void 0}get event(){return this._event||(this._event=((e,t,i)=>{this._listeners||(this._listeners=new s.LinkedList);const n=this._listeners.isEmpty();n&&this._options&&this._options.onFirstListenerAdd&&this._options.onFirstListenerAdd(this);const r=this._listeners.push(t?[e,t]:e)
;n&&this._options&&this._options.onFirstListenerDidAdd&&this._options.onFirstListenerDidAdd(this),this._options&&this._options.onListenerDidAdd&&this._options.onListenerDidAdd(this,e,t);let o;this._leakageMon&&(o=this._leakageMon.check(this._listeners.size));let a;return a={dispose:()=>{if(o&&o(),a.dispose=u._noop,!this._disposed&&(r(),this._options&&this._options.onLastListenerRemove)){this._listeners&&!this._listeners.isEmpty()||this._options.onLastListenerRemove(this)}}},Array.isArray(i)&&i.push(a),a})),this._event}fire(e){if(this._listeners){this._deliveryQueue||(this._deliveryQueue=[]);for(let t=this._listeners.iterator(),i=t.next();!i.done;i=t.next())this._deliveryQueue.push([i.value,e]);for(;this._deliveryQueue.length>0;){const[e,t]=this._deliveryQueue.shift();try{"function"==typeof e?e.call(void 0,t):e[0].call(e[1],t)}catch(e){i.onUnexpectedError(e)}}}}dispose(){this._listeners&&(this._listeners=void 0),this._deliveryQueue&&(this._deliveryQueue.length=0),this._leakageMon&&this._leakageMon.dispose(),
this._disposed=!0}}u._noop=function(){},t.Emitter=u;class d extends u{fireAsync(e){return n(this,void 0,void 0,function*(){if(this._listeners){this._asyncDeliveryQueue||(this._asyncDeliveryQueue=[]);for(let t=this._listeners.iterator(),i=t.next();!i.done;i=t.next()){const t=[];this._asyncDeliveryQueue.push([i.value,e(t,"function"==typeof i.value?i.value:i.value[0]),t])}for(;this._asyncDeliveryQueue.length>0;){const[e,t,n]=this._asyncDeliveryQueue.shift();try{"function"==typeof e?e.call(void 0,t):e[0].call(e[1],t)}catch(e){i.onUnexpectedError(e);continue}Object.freeze(n),yield Promise.all(n)}}})}}t.AsyncEmitter=d;class h{constructor(){this.hasListeners=!1,this.events=[],this.emitter=new u({onFirstListenerAdd:()=>this.onFirstListenerAdd(),onLastListenerRemove:()=>this.onLastListenerRemove()})}get event(){return this.emitter.event}add(e){const t={event:e,listener:null};this.events.push(t),this.hasListeners&&this.hook(t);return o.toDisposable(r.once(()=>{this.hasListeners&&this.unhook(t)
;const e=this.events.indexOf(t);this.events.splice(e,1)}))}onFirstListenerAdd(){this.hasListeners=!0,this.events.forEach(e=>this.hook(e))}onLastListenerRemove(){this.hasListeners=!1,this.events.forEach(e=>this.unhook(e))}hook(e){e.listener=e.event(e=>this.emitter.fire(e))}unhook(e){e.listener&&e.listener.dispose(),e.listener=null}dispose(){this.emitter.dispose()}}t.EventMultiplexer=h;class f{constructor(){this.buffers=[]}wrapEvent(e){return(t,i,n)=>e(e=>{const n=this.buffers[this.buffers.length-1];n?n.push(()=>t.call(i,e)):t.call(i,e)},void 0,n)}bufferEvents(e){const t=[];this.buffers.push(t);const i=e();return this.buffers.pop(),t.forEach(e=>e()),i}}t.EventBufferer=f;class p{constructor(){this.listening=!1,this.inputEvent=a.None,this.inputEventListener=o.Disposable.None,this.emitter=new u({onFirstListenerDidAdd:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onLastListenerRemove:()=>{this.listening=!1,this.inputEventListener.dispose()}}),
this.event=this.emitter.event}set input(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}}t.Relay=p}),define(t[34],i([0,1,3]),function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=Object.freeze(function(e,t){const i=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(i)}}});var r;!function(e){e.isCancellationToken=function(t){return t===e.None||t===e.Cancelled||t instanceof o||!(!t||"object"!=typeof t)&&"boolean"==typeof t.isCancellationRequested&&"function"==typeof t.onCancellationRequested},e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:i.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:n})}(r=t.CancellationToken||(t.CancellationToken={}));class o{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,
this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?n:(this._emitter||(this._emitter=new i.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}class s{get token(){return this._token||(this._token=new o),this._token}cancel(){this._token?this._token instanceof o&&this._token.cancel():this._token=r.Cancelled}dispose(){this._token?this._token instanceof o&&this._token.dispose():this._token=r.None}}t.CancellationTokenSource=s}),define(t[12],i([0,1,34,18,3,6]),function(e,t,i,r,o,s){"use strict";function a(e){return e&&"function"==typeof e.then}function c(e){const t=new i.CancellationTokenSource,n=e(t.token),o=new Promise((e,i)=>{t.token.onCancellationRequested(()=>{i(r.canceled())}),Promise.resolve(n).then(i=>{t.dispose(),e(i)},e=>{t.dispose(),i(e)})});return new class{cancel(){t.cancel()}then(e,t){return o.then(e,t)}catch(e){
return this.then(void 0,e)}finally(e){return o.finally(e)}}}function l(e,t){return t?new Promise((i,n)=>{const o=setTimeout(i,e);t.onCancellationRequested(()=>{clearTimeout(o),n(r.canceled())})}):c(t=>l(e,t))}function u(e){function t(o){void 0!==o&&null!==o&&i.push(o);const s=n<r?e[n++]():null;return s?s.then(t):Promise.resolve(i)}const i=[];let n=0;const r=e.length;return Promise.resolve(null).then(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.isThenable=a,t.createCancelablePromise=c,t.asPromise=function(e){return new Promise((t,i)=>{const n=e();a(n)?n.then(t,i):t(n)})};class d{constructor(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){const e=()=>{this.queuedPromise=null;const e=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,e};this.queuedPromise=new Promise(t=>{this.activePromise.then(e,e).then(t)})}return new Promise((e,t)=>{this.queuedPromise.then(e,t)
})}return this.activePromise=e(),new Promise((e,t)=>{this.activePromise.then(t=>{this.activePromise=null,e(t)},e=>{this.activePromise=null,t(e)})})}}t.Throttler=d;class h{constructor(){this.current=Promise.resolve(null)}queue(e){return this.current=this.current.then(()=>e())}}t.Sequencer=h;class f{constructor(e){this.defaultDelay=e,this.timeout=null,this.completionPromise=null,this.doResolve=null,this.task=null}trigger(e,t=this.defaultDelay){return this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((e,t)=>{this.doResolve=e,this.doReject=t}).then(()=>{this.completionPromise=null,this.doResolve=null;const e=this.task;return this.task=null,e()})),this.timeout=setTimeout(()=>{this.timeout=null,this.doResolve(null)},t),this.completionPromise}isTriggered(){return null!==this.timeout}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject(r.canceled()),this.completionPromise=null)}cancelTimeout(){null!==this.timeout&&(clearTimeout(this.timeout),
this.timeout=null)}dispose(){this.cancelTimeout()}}t.Delayer=f;class p{constructor(e){this.delayer=new f(e),this.throttler=new d}trigger(e,t){return this.delayer.trigger(()=>this.throttler.queue(e),t)}isTriggered(){return this.delayer.isTriggered()}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose()}}t.ThrottledDelayer=p;class g{constructor(){this._isOpen=!1,this._promise=new Promise((e,t)=>{this._completePromise=e})}isOpen(){return this._isOpen}open(){this._isOpen=!0,this._completePromise(!0)}wait(){return this._promise}}t.Barrier=g,t.timeout=l,t.disposableTimeout=function(e,t=0){const i=setTimeout(e,t);return s.toDisposable(()=>clearTimeout(i))},t.ignoreErrors=function(e){return e.then(void 0,e=>void 0)},t.sequence=u,t.first=function(e,t=(e=>!!e),i=null){let n=0;const r=e.length,o=()=>{if(n>=r)return Promise.resolve(i);const s=e[n++];return Promise.resolve(s()).then(e=>t(e)?Promise.resolve(e):o())};return o()};class m{constructor(e){this._size=0,this.maxDegreeOfParalellism=e,
this.outstandingPromises=[],this.runningPromises=0,this._onFinished=new o.Emitter}get onFinished(){return this._onFinished.event}get size(){return this._size}queue(e){return this._size++,new Promise((t,i)=>{this.outstandingPromises.push({factory:e,c:t,e:i}),this.consume()})}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){const e=this.outstandingPromises.shift();this.runningPromises++;const t=e.factory();t.then(e.c,e.e),t.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this._size--,this.runningPromises--,this.outstandingPromises.length>0?this.consume():this._onFinished.fire()}dispose(){this._onFinished.dispose()}}t.Limiter=m;class v extends m{constructor(){super(1)}}t.Queue=v;class w{constructor(){this.queues=Object.create(null)}queueFor(e){const t=e.toString();if(!this.queues[t]){const e=new v;e.onFinished(()=>{e.dispose(),delete this.queues[t]}),this.queues[t]=e}return this.queues[t]}}t.ResourceQueue=w;class y extends s.Disposable{constructor(e,t){
super(),this._token=-1,"function"==typeof e&&"number"==typeof t&&this.setIfNotSet(e,t)}dispose(){this.cancel(),super.dispose()}cancel(){-1!==this._token&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){-1===this._token&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}}t.TimeoutTimer=y;class S extends s.Disposable{constructor(){super(),this._token=-1}dispose(){this.cancel(),super.dispose()}cancel(){-1!==this._token&&(clearInterval(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setInterval(()=>{e()},t)}}t.IntervalTimer=S;class b{constructor(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}isScheduled(){
return-1!==this.timeoutToken}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner&&this.runner()}}t.RunOnceScheduler=b;class _ extends b{constructor(e,t){super(e,t),this.units=[]}work(e){this.units.push(e),this.isScheduled()||this.schedule()}doRun(){const e=this.units;this.units=[],this.runner&&this.runner(e)}dispose(){this.units=[],super.dispose()}}t.RunOnceWorker=_,t.nfcall=function(e,...t){return new Promise((i,n)=>e(...t,(e,t)=>e?n(e):i(t)))},t.ninvoke=function(e,t,...i){return new Promise((n,r)=>t.call(e,...i,(e,t)=>e?r(e):n(t)))},function(){if("function"!=typeof requestIdleCallback||"function"!=typeof cancelIdleCallback){const e=Object.freeze({didTimeout:!0,timeRemaining:()=>15});t.runWhenIdle=(t=>{const i=setTimeout(()=>t(e));let n=!1;return{dispose(){n||(n=!0,clearTimeout(i))}}})}else t.runWhenIdle=((e,t)=>{const i=requestIdleCallback(e,"number"==typeof t?{timeout:t}:void 0);let n=!1;return{dispose(){n||(n=!0,cancelIdleCallback(i))}}})}();class C{constructor(e){
this._didRun=!1,this._executor=(()=>{try{this._value=e()}catch(e){this._error=e}finally{this._didRun=!0}}),this._handle=t.runWhenIdle(()=>this._executor())}dispose(){this._handle.dispose()}getValue(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}}t.IdleValue=C,t.retry=function(e,t,i){return n(this,void 0,void 0,function*(){let n;for(let r=0;r<i;r++)try{return yield e()}catch(e){n=e,yield l(t)}return Promise.reject(n)})}}),define(t[30],i([0,1]),function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e.inMemory="inmemory",e.vscode="vscode",e.internal="private",e.walkThrough="walkThrough",e.walkThroughSnippet="walkThroughSnippet",e.http="http",e.https="https",e.file="file",e.mailto="mailto",e.untitled="untitled",e.data="data",e.command="command"}(t.Schemas||(t.Schemas={}))});let r;r="object"==typeof global?global:"object"==typeof self?self:{},"function"==typeof define?define("vs/base/common/performance",[],function(){
return e(r)}):"object"==typeof module&&"object"==typeof module.exports&&(module.exports=e(r)),define(t[2],i([0,1]),function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=!1,n=!1,r=!1,o=!1,s=!1,a=void 0,c="en",l=void 0;const u="undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.electron&&"renderer"===process.type;if("object"!=typeof navigator||u){if("object"==typeof process){i="win32"===process.platform,n="darwin"===process.platform,r="linux"===process.platform,a="en",c="en";const e=process.env.VSCODE_NLS_CONFIG;if(e)try{const t=JSON.parse(e),i=t.availableLanguages["*"];a=t.locale,c=i||"en",l=t._translationsConfigFile}catch(e){}o=!0}}else{const e=navigator.userAgent;i=e.indexOf("Windows")>=0,n=e.indexOf("Macintosh")>=0,r=e.indexOf("Linux")>=0,s=!0,c=a=navigator.language}!function(e){e[e.Web=0]="Web",e[e.Mac=1]="Mac",e[e.Linux=2]="Linux",e[e.Windows=3]="Windows"}(t.Platform||(t.Platform={})),t.PlatformToString=function(e){switch(e){case 0:return"Web"
;case 1:return"Mac";case 2:return"Linux";case 3:return"Windows"}};let d=0;o&&(n?d=1:i?d=3:r&&(d=2)),t.isWindows=i,t.isMacintosh=n,t.isLinux=r,t.isNative=o,t.isWeb=s,t.platform=d,t.isRootUser=function(){return o&&!i&&0===process.getuid()},t.language=c;!function(e){e.value=function(){return t.language},e.isDefaultVariant=function(){return 2===t.language.length?"en"===t.language:t.language.length>=3&&"e"===t.language[0]&&"n"===t.language[1]&&"-"===t.language[2]},e.isDefault=function(){return"en"===t.language}}(t.Language||(t.Language={})),t.locale=a,t.translationsConfigFile=l;const h="object"==typeof self?self:"object"==typeof global?global:{};t.globals=h;let f=null;t.setImmediate=function(e){return null===f&&(f=t.globals.setImmediate?t.globals.setImmediate.bind(t.globals):"undefined"!=typeof process&&"function"==typeof process.nextTick?process.nextTick.bind(process):t.globals.setTimeout.bind(t.globals)),f(e)};!function(e){e[e.Windows=1]="Windows",e[e.Macintosh=2]="Macintosh",e[e.Linux=3]="Linux"
}(t.OperatingSystem||(t.OperatingSystem={})),t.OS=n?2:i?1:3}),define(t[133],i([0,1,2]),function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n="undefined"==typeof process?{cwd:()=>"/",env:Object.create(null),get platform(){return i.isWindows?"win32":i.isMacintosh?"darwin":"linux"},nextTick:e=>i.setImmediate(e)}:process;t.cwd=n.cwd,t.env=n.env,t.platform=n.platform,t.nextTick=n.nextTick}),define(t[5],i([0,1,133]),function(e,t,i){"use strict";function n(e,t){if("string"!=typeof e)throw new m(t,"string",e)}function r(e){return e===p||e===g}function o(e){return e===p}function s(e){return e>=l&&e<=d||e>=u&&e<=h}function a(e,t,i,n){let r,o="",s=0,a=-1,c=0;for(let l=0;l<=e.length;++l){if(l<e.length)r=e.charCodeAt(l);else{if(n(r))break;r=p}if(n(r)){if(a===l-1||1===c);else if(a!==l-1&&2===c){if(o.length<2||2!==s||o.charCodeAt(o.length-1)!==f||o.charCodeAt(o.length-2)!==f){if(o.length>2){const e=o.lastIndexOf(i);-1===e?(o="",s=0):s=(o=o.slice(0,e)).length-1-o.lastIndexOf(i),a=l,c=0
;continue}if(2===o.length||1===o.length){o="",s=0,a=l,c=0;continue}}t&&(o.length>0?o+=`${i}..`:o="..",s=2)}else o.length>0?o+=i+e.slice(a+1,l):o=e.slice(a+1,l),s=l-a-1;a=l,c=0}else r===f&&-1!==c?++c:c=-1}return o}function c(e,t){const i=t.dir||t.root,n=t.base||(t.name||"")+(t.ext||"");return i?i===t.root?i+n:i+e+n:n}Object.defineProperty(t,"__esModule",{value:!0});const l=65,u=97,d=90,h=122,f=46,p=47,g=92;class m extends Error{constructor(e,t,i){let n;"string"==typeof t&&0===t.indexOf("not ")?(n="must not be",t=t.replace(/^not /,"")):n="must be";let r=`The "${e}" ${-1!==e.indexOf(".")?"property":"argument"} ${n} of type ${t}`;super(r+=`. Received type ${typeof i}`)}}t.win32={resolve(...e){let t="",o="",c=!1;for(let a=e.length-1;a>=-1;a--){let l;if(a>=0?l=e[a]:t?void 0!==(l=i.env["="+t]||i.cwd())&&l.slice(0,3).toLowerCase()===t.toLowerCase()+"\\"||(l=t+"\\"):l=i.cwd(),n(l,"path"),0===l.length)continue;const u=l.length;let d=0,h="",f=!1;const p=l.charCodeAt(0);if(u>1)if(r(p))if(f=!0,r(l.charCodeAt(1))){
let e=2,t=e;for(;e<u&&!r(l.charCodeAt(e));++e);if(e<u&&e!==t){const i=l.slice(t,e);for(t=e;e<u&&r(l.charCodeAt(e));++e);if(e<u&&e!==t){for(t=e;e<u&&!r(l.charCodeAt(e));++e);e===u?(h="\\\\"+i+"\\"+l.slice(t),d=e):e!==t&&(h="\\\\"+i+"\\"+l.slice(t,e),d=e)}}}else d=1;else s(p)&&58===l.charCodeAt(1)&&(h=l.slice(0,2),d=2,u>2&&r(l.charCodeAt(2))&&(f=!0,d=3));else r(p)&&(d=1,f=!0);if(!(h.length>0&&t.length>0&&h.toLowerCase()!==t.toLowerCase())&&(0===t.length&&h.length>0&&(t=h),c||(o=l.slice(d)+"\\"+o,c=f),t.length>0&&c))break}return o=a(o,!c,"\\",r),t+(c?"\\":"")+o||"."},normalize(e){n(e,"path");const t=e.length;if(0===t)return".";let i,o=0,c=!1;const l=e.charCodeAt(0);if(t>1)if(r(l))if(c=!0,r(e.charCodeAt(1))){let n=2,s=n;for(;n<t&&!r(e.charCodeAt(n));++n);if(n<t&&n!==s){const a=e.slice(s,n);for(s=n;n<t&&r(e.charCodeAt(n));++n);if(n<t&&n!==s){for(s=n;n<t&&!r(e.charCodeAt(n));++n);if(n===t)return"\\\\"+a+"\\"+e.slice(s)+"\\";n!==s&&(i="\\\\"+a+"\\"+e.slice(s,n),o=n)}}
}else o=1;else s(l)&&58===e.charCodeAt(1)&&(i=e.slice(0,2),o=2,t>2&&r(e.charCodeAt(2))&&(c=!0,o=3));else if(r(l))return"\\";let u;return 0!==(u=o<t?a(e.slice(o),!c,"\\",r):"").length||c||(u="."),u.length>0&&r(e.charCodeAt(t-1))&&(u+="\\"),void 0===i?c?u.length>0?"\\"+u:"\\":u.length>0?u:"":c?u.length>0?i+"\\"+u:i+"\\":u.length>0?i+u:i},isAbsolute(e){n(e,"path");const t=e.length;if(0===t)return!1;const i=e.charCodeAt(0);return!!r(i)||!!(s(i)&&t>2&&58===e.charCodeAt(1)&&r(e.charCodeAt(2)))},join(...e){if(0===e.length)return".";let i,o;for(let t=0;t<e.length;++t){const r=e[t];n(r,"path"),r.length>0&&(void 0===i?i=o=r:i+="\\"+r)}if(void 0===i)return".";let s=!0,a=0;if("string"==typeof o&&r(o.charCodeAt(0))){++a;const e=o.length;e>1&&r(o.charCodeAt(1))&&(++a,e>2&&(r(o.charCodeAt(2))?++a:s=!1))}if(s){for(;a<i.length&&r(i.charCodeAt(a));++a);a>=2&&(i="\\"+i.slice(a))}return t.win32.normalize(i)},relative(e,i){if(n(e,"from"),n(i,"to"),e===i)return"";const r=t.win32.resolve(e),o=t.win32.resolve(i);if(r===o)return""
;if(e=r.toLowerCase(),i=o.toLowerCase(),e===i)return"";let s=0;for(;s<e.length&&e.charCodeAt(s)===g;++s);let a=e.length;for(;a-1>s&&e.charCodeAt(a-1)===g;--a);const c=a-s;let l=0;for(;l<i.length&&i.charCodeAt(l)===g;++l);let u=i.length;for(;u-1>l&&i.charCodeAt(u-1)===g;--u);const d=u-l,h=c<d?c:d;let f=-1,p=0;for(;p<=h;++p){if(p===h){if(d>h){if(i.charCodeAt(l+p)===g)return o.slice(l+p+1);if(2===p)return o.slice(l+p)}c>h&&(e.charCodeAt(s+p)===g?f=p:2===p&&(f=3));break}const t=e.charCodeAt(s+p);if(t!==i.charCodeAt(l+p))break;t===g&&(f=p)}if(p!==h&&-1===f)return o;let m="";for(-1===f&&(f=0),p=s+f+1;p<=a;++p)p!==a&&e.charCodeAt(p)!==g||(0===m.length?m+="..":m+="\\..");return m.length>0?m+o.slice(l+f,u):(l+=f,o.charCodeAt(l)===g&&++l,o.slice(l,u))},toNamespacedPath(e){if("string"!=typeof e)return e;if(0===e.length)return"";const i=t.win32.resolve(e);if(i.length>=3)if(i.charCodeAt(0)===g){if(i.charCodeAt(1)===g){const e=i.charCodeAt(2);if(63!==e&&e!==f)return"\\\\?\\UNC\\"+i.slice(2)}
}else if(s(i.charCodeAt(0))&&58===i.charCodeAt(1)&&i.charCodeAt(2)===g)return"\\\\?\\"+i;return e},dirname(e){n(e,"path");const t=e.length;if(0===t)return".";let i=-1,o=-1,a=!0,c=0;const l=e.charCodeAt(0);if(t>1)if(r(l)){if(i=c=1,r(e.charCodeAt(1))){let n=2,o=n;for(;n<t&&!r(e.charCodeAt(n));++n);if(n<t&&n!==o){for(o=n;n<t&&r(e.charCodeAt(n));++n);if(n<t&&n!==o){for(o=n;n<t&&!r(e.charCodeAt(n));++n);if(n===t)return e;n!==o&&(i=c=n+1)}}}}else s(l)&&58===e.charCodeAt(1)&&(i=c=2,t>2&&r(e.charCodeAt(2))&&(i=c=3));else if(r(l))return e;for(let i=t-1;i>=c;--i)if(r(e.charCodeAt(i))){if(!a){o=i;break}}else a=!1;if(-1===o){if(-1===i)return".";o=i}return e.slice(0,o)},basename(e,t){void 0!==t&&n(t,"ext"),n(e,"path");let i,o=0,a=-1,c=!0;if(e.length>=2){s(e.charCodeAt(0))&&58===e.charCodeAt(1)&&(o=2)}if(void 0!==t&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";let n=t.length-1,s=-1;for(i=e.length-1;i>=o;--i){const l=e.charCodeAt(i);if(r(l)){if(!c){o=i+1;break}}else-1===s&&(c=!1,s=i+1),
n>=0&&(l===t.charCodeAt(n)?-1==--n&&(a=i):(n=-1,a=s))}return o===a?a=s:-1===a&&(a=e.length),e.slice(o,a)}for(i=e.length-1;i>=o;--i)if(r(e.charCodeAt(i))){if(!c){o=i+1;break}}else-1===a&&(c=!1,a=i+1);return-1===a?"":e.slice(o,a)},extname(e){n(e,"path");let t=0,i=-1,o=0,a=-1,c=!0,l=0;e.length>=2&&58===e.charCodeAt(1)&&s(e.charCodeAt(0))&&(t=o=2);for(let n=e.length-1;n>=t;--n){const t=e.charCodeAt(n);if(r(t)){if(!c){o=n+1;break}}else-1===a&&(c=!1,a=n+1),t===f?-1===i?i=n:1!==l&&(l=1):-1!==i&&(l=-1)}return-1===i||-1===a||0===l||1===l&&i===a-1&&i===o+1?"":e.slice(i,a)},format(e){if(null===e||"object"!=typeof e)throw new m("pathObject","Object",e);return c("\\",e)},parse(e){n(e,"path");const t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;const i=e.length;let o=0,a=e.charCodeAt(0);if(i>1){if(r(a)){if(o=1,r(e.charCodeAt(1))){let t=2,n=t;for(;t<i&&!r(e.charCodeAt(t));++t);if(t<i&&t!==n){for(n=t;t<i&&r(e.charCodeAt(t));++t);if(t<i&&t!==n){for(n=t;t<i&&!r(e.charCodeAt(t));++t);t===i?o=t:t!==n&&(o=t+1)
}}}}else if(s(a)&&58===e.charCodeAt(1)){if(o=2,!(i>2))return t.root=t.dir=e,t;if(r(e.charCodeAt(2))){if(3===i)return t.root=t.dir=e,t;o=3}}}else if(r(a))return t.root=t.dir=e,t;o>0&&(t.root=e.slice(0,o));let c=-1,l=o,u=-1,d=!0,h=e.length-1,p=0;for(;h>=o;--h)if(a=e.charCodeAt(h),r(a)){if(!d){l=h+1;break}}else-1===u&&(d=!1,u=h+1),a===f?-1===c?c=h:1!==p&&(p=1):-1!==c&&(p=-1);return-1===c||-1===u||0===p||1===p&&c===u-1&&c===l+1?-1!==u&&(t.base=t.name=e.slice(l,u)):(t.name=e.slice(l,c),t.base=e.slice(l,u),t.ext=e.slice(c,u)),t.dir=l>0&&l!==o?e.slice(0,l-1):t.root,t},sep:"\\",delimiter:";",win32:null,posix:null},t.posix={resolve(...e){let t="",r=!1;for(let o=e.length-1;o>=-1&&!r;o--){let s;n(s=o>=0?e[o]:i.cwd(),"path"),0!==s.length&&(t=s+"/"+t,r=s.charCodeAt(0)===p)}return t=a(t,!r,"/",o),r?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize(e){if(n(e,"path"),0===e.length)return".";const t=e.charCodeAt(0)===p,i=e.charCodeAt(e.length-1)===p;return 0!==(e=a(e,!t,"/",o)).length||t||(e="."),e.length>0&&i&&(e+="/"),
t?"/"+e:e},isAbsolute:e=>(n(e,"path"),e.length>0&&e.charCodeAt(0)===p),join(...e){if(0===e.length)return".";let i;for(let t=0;t<e.length;++t){const e=arguments[t];n(e,"path"),e.length>0&&(void 0===i?i=e:i+="/"+e)}return void 0===i?".":t.posix.normalize(i)},relative(e,i){if(n(e,"from"),n(i,"to"),e===i)return"";if(e=t.posix.resolve(e),i=t.posix.resolve(i),e===i)return"";let r=1;for(;r<e.length&&e.charCodeAt(r)===p;++r);const o=e.length,s=o-r;let a=1;for(;a<i.length&&i.charCodeAt(a)===p;++a);const c=i.length-a,l=s<c?s:c;let u=-1,d=0;for(;d<=l;++d){if(d===l){if(c>l){if(i.charCodeAt(a+d)===p)return i.slice(a+d+1);if(0===d)return i.slice(a+d)}else s>l&&(e.charCodeAt(r+d)===p?u=d:0===d&&(u=0));break}const t=e.charCodeAt(r+d);if(t!==i.charCodeAt(a+d))break;t===p&&(u=d)}let h="";for(d=r+u+1;d<=o;++d)d!==o&&e.charCodeAt(d)!==p||(0===h.length?h+="..":h+="/..");return h.length>0?h+i.slice(a+u):(a+=u,i.charCodeAt(a)===p&&++a,i.slice(a))},toNamespacedPath:e=>e,dirname(e){if(n(e,"path"),0===e.length)return"."
;const t=e.charCodeAt(0)===p;let i=-1,r=!0;for(let t=e.length-1;t>=1;--t)if(e.charCodeAt(t)===p){if(!r){i=t;break}}else r=!1;return-1===i?t?"/":".":t&&1===i?"//":e.slice(0,i)},basename(e,t){void 0!==t&&n(t,"ext"),n(e,"path");let i,r=0,o=-1,s=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";let n=t.length-1,a=-1;for(i=e.length-1;i>=0;--i){const c=e.charCodeAt(i);if(c===p){if(!s){r=i+1;break}}else-1===a&&(s=!1,a=i+1),n>=0&&(c===t.charCodeAt(n)?-1==--n&&(o=i):(n=-1,o=a))}return r===o?o=a:-1===o&&(o=e.length),e.slice(r,o)}for(i=e.length-1;i>=0;--i)if(e.charCodeAt(i)===p){if(!s){r=i+1;break}}else-1===o&&(s=!1,o=i+1);return-1===o?"":e.slice(r,o)},extname(e){n(e,"path");let t=-1,i=0,r=-1,o=!0,s=0;for(let n=e.length-1;n>=0;--n){const a=e.charCodeAt(n);if(a!==p)-1===r&&(o=!1,r=n+1),a===f?-1===t?t=n:1!==s&&(s=1):-1!==t&&(s=-1);else if(!o){i=n+1;break}}return-1===t||-1===r||0===s||1===s&&t===r-1&&t===i+1?"":e.slice(t,r)},format(e){
if(null===e||"object"!=typeof e)throw new m("pathObject","Object",e);return c("/",e)},parse(e){n(e,"path");const t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;const i=e.charCodeAt(0)===p;let r;i?(t.root="/",r=1):r=0;let o=-1,s=0,a=-1,c=!0,l=e.length-1,u=0;for(;l>=r;--l){const t=e.charCodeAt(l);if(t!==p)-1===a&&(c=!1,a=l+1),t===f?-1===o?o=l:1!==u&&(u=1):-1!==o&&(u=-1);else if(!c){s=l+1;break}}return-1===o||-1===a||0===u||1===u&&o===a-1&&o===s+1?-1!==a&&(t.base=t.name=0===s&&i?e.slice(1,a):e.slice(s,a)):(0===s&&i?(t.name=e.slice(1,o),t.base=e.slice(1,a)):(t.name=e.slice(s,o),t.base=e.slice(s,a)),t.ext=e.slice(o,a)),s>0?t.dir=e.slice(0,s-1):i&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null},t.posix.win32=t.win32.win32=t.win32,t.posix.posix=t.win32.posix=t.posix,t.normalize="win32"===i.platform?t.win32.normalize:t.posix.normalize,t.isAbsolute="win32"===i.platform?t.win32.isAbsolute:t.posix.isAbsolute,t.join="win32"===i.platform?t.win32.join:t.posix.join,
t.resolve="win32"===i.platform?t.win32.resolve:t.posix.resolve,t.relative="win32"===i.platform?t.win32.relative:t.posix.relative,t.dirname="win32"===i.platform?t.win32.dirname:t.posix.dirname,t.basename="win32"===i.platform?t.win32.basename:t.posix.basename,t.extname="win32"===i.platform?t.win32.extname:t.posix.extname,t.format="win32"===i.platform?t.win32.format:t.posix.format,t.parse="win32"===i.platform?t.win32.parse:t.posix.parse,t.toNamespacedPath="win32"===i.platform?t.win32.toNamespacedPath:t.posix.toNamespacedPath,t.sep="win32"===i.platform?t.win32.sep:t.posix.sep,t.delimiter="win32"===i.platform?t.win32.delimiter:t.posix.delimiter}),define(t[71],i([0,1]),function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e[e.None=0]="None",e[e.Hyper=1]="Hyper",e[e.Super=2]="Super",e[e.Fn=3]="Fn",e[e.FnLock=4]="FnLock",e[e.Suspend=5]="Suspend",e[e.Resume=6]="Resume",e[e.Turbo=7]="Turbo",e[e.Sleep=8]="Sleep",e[e.WakeUp=9]="WakeUp",e[e.KeyA=10]="KeyA",e[e.KeyB=11]="KeyB",
e[e.KeyC=12]="KeyC",e[e.KeyD=13]="KeyD",e[e.KeyE=14]="KeyE",e[e.KeyF=15]="KeyF",e[e.KeyG=16]="KeyG",e[e.KeyH=17]="KeyH",e[e.KeyI=18]="KeyI",e[e.KeyJ=19]="KeyJ",e[e.KeyK=20]="KeyK",e[e.KeyL=21]="KeyL",e[e.KeyM=22]="KeyM",e[e.KeyN=23]="KeyN",e[e.KeyO=24]="KeyO",e[e.KeyP=25]="KeyP",e[e.KeyQ=26]="KeyQ",e[e.KeyR=27]="KeyR",e[e.KeyS=28]="KeyS",e[e.KeyT=29]="KeyT",e[e.KeyU=30]="KeyU",e[e.KeyV=31]="KeyV",e[e.KeyW=32]="KeyW",e[e.KeyX=33]="KeyX",e[e.KeyY=34]="KeyY",e[e.KeyZ=35]="KeyZ",e[e.Digit1=36]="Digit1",e[e.Digit2=37]="Digit2",e[e.Digit3=38]="Digit3",e[e.Digit4=39]="Digit4",e[e.Digit5=40]="Digit5",e[e.Digit6=41]="Digit6",e[e.Digit7=42]="Digit7",e[e.Digit8=43]="Digit8",e[e.Digit9=44]="Digit9",e[e.Digit0=45]="Digit0",e[e.Enter=46]="Enter",e[e.Escape=47]="Escape",e[e.Backspace=48]="Backspace",e[e.Tab=49]="Tab",e[e.Space=50]="Space",e[e.Minus=51]="Minus",e[e.Equal=52]="Equal",e[e.BracketLeft=53]="BracketLeft",e[e.BracketRight=54]="BracketRight",e[e.Backslash=55]="Backslash",e[e.IntlHash=56]="IntlHash",
e[e.Semicolon=57]="Semicolon",e[e.Quote=58]="Quote",e[e.Backquote=59]="Backquote",e[e.Comma=60]="Comma",e[e.Period=61]="Period",e[e.Slash=62]="Slash",e[e.CapsLock=63]="CapsLock",e[e.F1=64]="F1",e[e.F2=65]="F2",e[e.F3=66]="F3",e[e.F4=67]="F4",e[e.F5=68]="F5",e[e.F6=69]="F6",e[e.F7=70]="F7",e[e.F8=71]="F8",e[e.F9=72]="F9",e[e.F10=73]="F10",e[e.F11=74]="F11",e[e.F12=75]="F12",e[e.PrintScreen=76]="PrintScreen",e[e.ScrollLock=77]="ScrollLock",e[e.Pause=78]="Pause",e[e.Insert=79]="Insert",e[e.Home=80]="Home",e[e.PageUp=81]="PageUp",e[e.Delete=82]="Delete",e[e.End=83]="End",e[e.PageDown=84]="PageDown",e[e.ArrowRight=85]="ArrowRight",e[e.ArrowLeft=86]="ArrowLeft",e[e.ArrowDown=87]="ArrowDown",e[e.ArrowUp=88]="ArrowUp",e[e.NumLock=89]="NumLock",e[e.NumpadDivide=90]="NumpadDivide",e[e.NumpadMultiply=91]="NumpadMultiply",e[e.NumpadSubtract=92]="NumpadSubtract",e[e.NumpadAdd=93]="NumpadAdd",e[e.NumpadEnter=94]="NumpadEnter",e[e.Numpad1=95]="Numpad1",e[e.Numpad2=96]="Numpad2",e[e.Numpad3=97]="Numpad3",
e[e.Numpad4=98]="Numpad4",e[e.Numpad5=99]="Numpad5",e[e.Numpad6=100]="Numpad6",e[e.Numpad7=101]="Numpad7",e[e.Numpad8=102]="Numpad8",e[e.Numpad9=103]="Numpad9",e[e.Numpad0=104]="Numpad0",e[e.NumpadDecimal=105]="NumpadDecimal",e[e.IntlBackslash=106]="IntlBackslash",e[e.ContextMenu=107]="ContextMenu",e[e.Power=108]="Power",e[e.NumpadEqual=109]="NumpadEqual",e[e.F13=110]="F13",e[e.F14=111]="F14",e[e.F15=112]="F15",e[e.F16=113]="F16",e[e.F17=114]="F17",e[e.F18=115]="F18",e[e.F19=116]="F19",e[e.F20=117]="F20",e[e.F21=118]="F21",e[e.F22=119]="F22",e[e.F23=120]="F23",e[e.F24=121]="F24",e[e.Open=122]="Open",e[e.Help=123]="Help",e[e.Select=124]="Select",e[e.Again=125]="Again",e[e.Undo=126]="Undo",e[e.Cut=127]="Cut",e[e.Copy=128]="Copy",e[e.Paste=129]="Paste",e[e.Find=130]="Find",e[e.AudioVolumeMute=131]="AudioVolumeMute",e[e.AudioVolumeUp=132]="AudioVolumeUp",e[e.AudioVolumeDown=133]="AudioVolumeDown",e[e.NumpadComma=134]="NumpadComma",e[e.IntlRo=135]="IntlRo",e[e.KanaMode=136]="KanaMode",e[e.IntlYen=137]="IntlYen",
e[e.Convert=138]="Convert",e[e.NonConvert=139]="NonConvert",e[e.Lang1=140]="Lang1",e[e.Lang2=141]="Lang2",e[e.Lang3=142]="Lang3",e[e.Lang4=143]="Lang4",e[e.Lang5=144]="Lang5",e[e.Abort=145]="Abort",e[e.Props=146]="Props",e[e.NumpadParenLeft=147]="NumpadParenLeft",e[e.NumpadParenRight=148]="NumpadParenRight",e[e.NumpadBackspace=149]="NumpadBackspace",e[e.NumpadMemoryStore=150]="NumpadMemoryStore",e[e.NumpadMemoryRecall=151]="NumpadMemoryRecall",e[e.NumpadMemoryClear=152]="NumpadMemoryClear",e[e.NumpadMemoryAdd=153]="NumpadMemoryAdd",e[e.NumpadMemorySubtract=154]="NumpadMemorySubtract",e[e.NumpadClear=155]="NumpadClear",e[e.NumpadClearEntry=156]="NumpadClearEntry",e[e.ControlLeft=157]="ControlLeft",e[e.ShiftLeft=158]="ShiftLeft",e[e.AltLeft=159]="AltLeft",e[e.MetaLeft=160]="MetaLeft",e[e.ControlRight=161]="ControlRight",e[e.ShiftRight=162]="ShiftRight",e[e.AltRight=163]="AltRight",e[e.MetaRight=164]="MetaRight",e[e.BrightnessUp=165]="BrightnessUp",e[e.BrightnessDown=166]="BrightnessDown",
e[e.MediaPlay=167]="MediaPlay",e[e.MediaRecord=168]="MediaRecord",e[e.MediaFastForward=169]="MediaFastForward",e[e.MediaRewind=170]="MediaRewind",e[e.MediaTrackNext=171]="MediaTrackNext",e[e.MediaTrackPrevious=172]="MediaTrackPrevious",e[e.MediaStop=173]="MediaStop",e[e.Eject=174]="Eject",e[e.MediaPlayPause=175]="MediaPlayPause",e[e.MediaSelect=176]="MediaSelect",e[e.LaunchMail=177]="LaunchMail",e[e.LaunchApp2=178]="LaunchApp2",e[e.LaunchApp1=179]="LaunchApp1",e[e.SelectTask=180]="SelectTask",e[e.LaunchScreenSaver=181]="LaunchScreenSaver",e[e.BrowserSearch=182]="BrowserSearch",e[e.BrowserHome=183]="BrowserHome",e[e.BrowserBack=184]="BrowserBack",e[e.BrowserForward=185]="BrowserForward",e[e.BrowserStop=186]="BrowserStop",e[e.BrowserRefresh=187]="BrowserRefresh",e[e.BrowserFavorites=188]="BrowserFavorites",e[e.ZoomToggle=189]="ZoomToggle",e[e.MailReply=190]="MailReply",e[e.MailForward=191]="MailForward",e[e.MailSend=192]="MailSend",e[e.MAX_VALUE=193]="MAX_VALUE"}(t.ScanCode||(t.ScanCode={}))
;const i=[],n=Object.create(null),r=Object.create(null);t.ScanCodeUtils={lowerCaseToEnum:e=>r[e]||0,toEnum:e=>n[e]||0,toString:e=>i[e]||"None"},t.IMMUTABLE_CODE_TO_KEY_CODE=[],t.IMMUTABLE_KEY_CODE_TO_CODE=[];class o{constructor(e,t,i,n,r){this.ctrlKey=e,this.shiftKey=t,this.altKey=i,this.metaKey=n,this.scanCode=r}equals(e){return this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.scanCode===e.scanCode}isDuplicateModifierCase(){return this.ctrlKey&&(157===this.scanCode||161===this.scanCode)||this.shiftKey&&(158===this.scanCode||162===this.scanCode)||this.altKey&&(159===this.scanCode||163===this.scanCode)||this.metaKey&&(160===this.scanCode||164===this.scanCode)}}t.ScanCodeBinding=o,function(){function e(e,t){i[e]=t,n[t]=e,r[t.toLowerCase()]=e}e(0,"None"),e(1,"Hyper"),e(2,"Super"),e(3,"Fn"),e(4,"FnLock"),e(5,"Suspend"),e(6,"Resume"),e(7,"Turbo"),e(8,"Sleep"),e(9,"WakeUp"),e(10,"KeyA"),e(11,"KeyB"),e(12,"KeyC"),e(13,"KeyD"),e(14,"KeyE"),e(15,"KeyF"),
e(16,"KeyG"),e(17,"KeyH"),e(18,"KeyI"),e(19,"KeyJ"),e(20,"KeyK"),e(21,"KeyL"),e(22,"KeyM"),e(23,"KeyN"),e(24,"KeyO"),e(25,"KeyP"),e(26,"KeyQ"),e(27,"KeyR"),e(28,"KeyS"),e(29,"KeyT"),e(30,"KeyU"),e(31,"KeyV"),e(32,"KeyW"),e(33,"KeyX"),e(34,"KeyY"),e(35,"KeyZ"),e(36,"Digit1"),e(37,"Digit2"),e(38,"Digit3"),e(39,"Digit4"),e(40,"Digit5"),e(41,"Digit6"),e(42,"Digit7"),e(43,"Digit8"),e(44,"Digit9"),e(45,"Digit0"),e(46,"Enter"),e(47,"Escape"),e(48,"Backspace"),e(49,"Tab"),e(50,"Space"),e(51,"Minus"),e(52,"Equal"),e(53,"BracketLeft"),e(54,"BracketRight"),e(55,"Backslash"),e(56,"IntlHash"),e(57,"Semicolon"),e(58,"Quote"),e(59,"Backquote"),e(60,"Comma"),e(61,"Period"),e(62,"Slash"),e(63,"CapsLock"),e(64,"F1"),e(65,"F2"),e(66,"F3"),e(67,"F4"),e(68,"F5"),e(69,"F6"),e(70,"F7"),e(71,"F8"),e(72,"F9"),e(73,"F10"),e(74,"F11"),e(75,"F12"),e(76,"PrintScreen"),e(77,"ScrollLock"),e(78,"Pause"),e(79,"Insert"),e(80,"Home"),e(81,"PageUp"),e(82,"Delete"),e(83,"End"),e(84,"PageDown"),e(85,"ArrowRight"),e(86,"ArrowLeft"),
e(87,"ArrowDown"),e(88,"ArrowUp"),e(89,"NumLock"),e(90,"NumpadDivide"),e(91,"NumpadMultiply"),e(92,"NumpadSubtract"),e(93,"NumpadAdd"),e(94,"NumpadEnter"),e(95,"Numpad1"),e(96,"Numpad2"),e(97,"Numpad3"),e(98,"Numpad4"),e(99,"Numpad5"),e(100,"Numpad6"),e(101,"Numpad7"),e(102,"Numpad8"),e(103,"Numpad9"),e(104,"Numpad0"),e(105,"NumpadDecimal"),e(106,"IntlBackslash"),e(107,"ContextMenu"),e(108,"Power"),e(109,"NumpadEqual"),e(110,"F13"),e(111,"F14"),e(112,"F15"),e(113,"F16"),e(114,"F17"),e(115,"F18"),e(116,"F19"),e(117,"F20"),e(118,"F21"),e(119,"F22"),e(120,"F23"),e(121,"F24"),e(122,"Open"),e(123,"Help"),e(124,"Select"),e(125,"Again"),e(126,"Undo"),e(127,"Cut"),e(128,"Copy"),e(129,"Paste"),e(130,"Find"),e(131,"AudioVolumeMute"),e(132,"AudioVolumeUp"),e(133,"AudioVolumeDown"),e(134,"NumpadComma"),e(135,"IntlRo"),e(136,"KanaMode"),e(137,"IntlYen"),e(138,"Convert"),e(139,"NonConvert"),e(140,"Lang1"),e(141,"Lang2"),e(142,"Lang3"),e(143,"Lang4"),e(144,"Lang5"),e(145,"Abort"),e(146,"Props"),e(147,"NumpadParenLeft"),
e(148,"NumpadParenRight"),e(149,"NumpadBackspace"),e(150,"NumpadMemoryStore"),e(151,"NumpadMemoryRecall"),e(152,"NumpadMemoryClear"),e(153,"NumpadMemoryAdd"),e(154,"NumpadMemorySubtract"),e(155,"NumpadClear"),e(156,"NumpadClearEntry"),e(157,"ControlLeft"),e(158,"ShiftLeft"),e(159,"AltLeft"),e(160,"MetaLeft"),e(161,"ControlRight"),e(162,"ShiftRight"),e(163,"AltRight"),e(164,"MetaRight"),e(165,"BrightnessUp"),e(166,"BrightnessDown"),e(167,"MediaPlay"),e(168,"MediaRecord"),e(169,"MediaFastForward"),e(170,"MediaRewind"),e(171,"MediaTrackNext"),e(172,"MediaTrackPrevious"),e(173,"MediaStop"),e(174,"Eject"),e(175,"MediaPlayPause"),e(176,"MediaSelect"),e(177,"LaunchMail"),e(178,"LaunchApp2"),e(179,"LaunchApp1"),e(180,"SelectTask"),e(181,"LaunchScreenSaver"),e(182,"BrowserSearch"),e(183,"BrowserHome"),e(184,"BrowserBack"),e(185,"BrowserForward"),e(186,"BrowserStop"),e(187,"BrowserRefresh"),e(188,"BrowserFavorites"),e(189,"ZoomToggle"),e(190,"MailReply"),e(191,"MailForward"),e(192,"MailSend")}(),function(){
function e(e,i){t.IMMUTABLE_CODE_TO_KEY_CODE[e]=i,0!==i&&3!==i&&5!==i&&4!==i&&6!==i&&57!==i&&(t.IMMUTABLE_KEY_CODE_TO_CODE[i]=e)}for(let e=0;e<=193;e++)t.IMMUTABLE_CODE_TO_KEY_CODE[e]=-1;for(let e=0;e<=112;e++)t.IMMUTABLE_KEY_CODE_TO_CODE[e]=-1;t.IMMUTABLE_KEY_CODE_TO_CODE[3]=46,e(0,0),e(1,0),e(2,0),e(3,0),e(4,0),e(5,0),e(6,0),e(7,0),e(8,0),e(9,0),e(46,3),e(47,9),e(48,1),e(49,2),e(50,10),e(63,8),e(64,59),e(65,60),e(66,61),e(67,62),e(68,63),e(69,64),e(70,65),e(71,66),e(72,67),e(73,68),e(74,69),e(75,70),e(76,0),e(77,79),e(78,7),e(79,19),e(80,14),e(81,11),e(82,20),e(83,13),e(84,12),e(85,17),e(86,15),e(87,18),e(88,16),e(89,78),e(90,108),e(91,103),e(92,106),e(93,104),e(94,3),e(95,94),e(96,95),e(97,96),e(98,97),e(99,98),e(100,99),e(101,100),e(102,101),e(103,102),e(104,93),e(105,107),e(107,58),e(108,0),e(109,0),e(110,71),e(111,72),e(112,73),e(113,74),e(114,75),e(115,76),e(116,77),e(117,0),e(118,0),e(119,0),e(120,0),e(121,0),e(122,0),e(123,0),e(124,0),e(125,0),e(126,0),e(127,0),e(128,0),e(129,0),e(130,0),e(131,0),
e(132,0),e(133,0),e(134,105),e(136,0),e(138,0),e(139,0),e(140,0),e(141,0),e(142,0),e(143,0),e(144,0),e(145,0),e(146,0),e(147,0),e(148,0),e(149,0),e(150,0),e(151,0),e(152,0),e(153,0),e(154,0),e(155,0),e(156,0),e(157,5),e(158,4),e(159,6),e(160,57),e(161,5),e(162,4),e(163,6),e(164,57),e(165,0),e(166,0),e(167,0),e(168,0),e(169,0),e(170,0),e(171,0),e(172,0),e(173,0),e(174,0),e(175,0),e(176,0),e(177,0),e(178,0),e(179,0),e(180,0),e(181,0),e(182,0),e(183,0),e(184,0),e(185,0),e(186,0),e(187,0),e(188,0),e(189,0),e(190,0),e(191,0),e(192,0)}()}),define(t[91],i([0,1,52,71]),function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{static _readModifiers(e){e=e.toLowerCase().trim();let t,i=!1,n=!1,r=!1,o=!1;do{t=!1,/^ctrl(\+|\-)/.test(e)&&(i=!0,e=e.substr("ctrl-".length),t=!0),/^shift(\+|\-)/.test(e)&&(n=!0,e=e.substr("shift-".length),t=!0),/^alt(\+|\-)/.test(e)&&(r=!0,e=e.substr("alt-".length),t=!0),/^meta(\+|\-)/.test(e)&&(o=!0,e=e.substr("meta-".length),t=!0),/^win(\+|\-)/.test(e)&&(o=!0,
e=e.substr("win-".length),t=!0),/^cmd(\+|\-)/.test(e)&&(o=!0,e=e.substr("cmd-".length),t=!0)}while(t);let s;const a=e.indexOf(" ");return a>0?(s=e.substring(0,a),e=e.substring(a)):(s=e,e=""),{remains:e,ctrl:i,shift:n,alt:r,meta:o,key:s}}static parseSimpleKeybinding(e){const t=this._readModifiers(e),n=i.KeyCodeUtils.fromUserSettings(t.key);return[new i.SimpleKeybinding(t.ctrl,t.shift,t.alt,t.meta,n),t.remains]}static parseKeybinding(e,t){if(!e)return null;const n=[];let r;do{[r,e]=this.parseSimpleKeybinding(e),n.push(r)}while(e.length>0);return new i.ChordKeybinding(n)}static parseSimpleUserBinding(e){const t=this._readModifiers(e),r=t.key.match(/^\[([^\]]+)\]$/);if(r){const e=r[1],i=n.ScanCodeUtils.lowerCaseToEnum(e);return[new n.ScanCodeBinding(t.ctrl,t.shift,t.alt,t.meta,i),t.remains]}const o=i.KeyCodeUtils.fromUserSettings(t.key);return[new i.SimpleKeybinding(t.ctrl,t.shift,t.alt,t.meta,o),t.remains]}static parseUserBinding(e){if(!e)return[];const t=[];let i
;for(;e.length>0;)[i,e]=this.parseSimpleUserBinding(e),t.push(i);return t}}t.KeybindingParser=r}),define(t[19],i([0,1]),function(e,t){"use strict";function i(e){return e.replace(/[\-\\\{\}\*\+\?\|\^\$\.\[\]\(\)\#]/g,"\\$&")}function n(e,t){if(!e||!t)return e;const i=t.length;if(0===i||0===e.length)return e;let n=0;for(;e.indexOf(t,n)===n;)n+=i;return e.substring(n)}function r(e,t){if(!e||!t)return e;const i=t.length,n=e.length;if(0===i||0===n)return e;let r=n,o=-1;for(;;){if(-1===(o=e.lastIndexOf(t,r-1))||o+i!==r)break;if(0===o)return"";r=o}return e.substring(0,r)}function o(e,t){return e<t?-1:e>t?1:0}function s(e){return e>=97&&e<=122}function a(e){return e>=65&&e<=90}function c(e){return s(e)||a(e)}function l(e,t,i=e.length){if("string"!=typeof e||"string"!=typeof t)return!1;for(let n=0;n<i;n++){const i=e.charCodeAt(n),r=t.charCodeAt(n);if(i!==r)if(c(i)&&c(r)){const e=Math.abs(i-r);if(0!==e&&32!==e)return!1}else if(String.fromCharCode(i).toLowerCase()!==String.fromCharCode(r).toLowerCase())return!1}return!0
}function u(e,t,i,n,r,o){for(;t<i&&r<o;){if(e[t]!==n[r])return!1;t+=1,r+=1}return!0}function d(e){return(e=+e)>=11904&&e<=55215||e>=63744&&e<=64255||e>=65281&&e<=65374}function h(e){return!!(e&&e.length>0&&65279===e.charCodeAt(0))}Object.defineProperty(t,"__esModule",{value:!0}),t.empty="",t.isFalsyOrWhitespace=function(e){return!e||"string"!=typeof e||0===e.trim().length},t.pad=function(e,t,i="0"){const n=""+e,r=[n];for(let e=n.length;e<t;e++)r.push(i);return r.reverse().join("")};const f=/{(\d+)}/g;t.format=function(e,...t){return 0===t.length?e:e.replace(f,function(e,i){const n=parseInt(i,10);return isNaN(n)||n<0||n>=t.length?e:t[n]})},t.escape=function(e){return e.replace(/[<>&]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}})},t.escapeRegExpCharacters=i,t.trim=function(e,t=" "){return r(n(e,t),t)},t.ltrim=n,t.rtrim=r,t.convertSimple2RegExpPattern=function(e){return e.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")},
t.stripWildcards=function(e){return e.replace(/\*/g,"")},t.startsWith=function(e,t){if(e.length<t.length)return!1;if(e===t)return!0;for(let i=0;i<t.length;i++)if(e[i]!==t[i])return!1;return!0},t.endsWith=function(e,t){const i=e.length-t.length;return i>0?e.indexOf(t,i)===i:0===i&&e===t},t.createRegExp=function(e,t,n={}){if(!e)throw new Error("Cannot create regex from empty string");t||(e=i(e)),n.wholeWord&&(/\B/.test(e.charAt(0))||(e="\\b"+e),/\B/.test(e.charAt(e.length-1))||(e+="\\b"));let r="";return n.global&&(r+="g"),n.matchCase||(r+="i"),n.multiline&&(r+="m"),n.unicode&&(r+="u"),new RegExp(e,r)},t.regExpLeadsToEndlessLoop=function(e){return"^"!==e.source&&"^$"!==e.source&&"$"!==e.source&&"^\\s*$"!==e.source&&!(!e.exec("")||0!==e.lastIndex)},t.regExpContainsBackreference=function(e){return!!e.match(/([^\\]|^)(\\\\)*\\\d+/)},t.regExpFlags=function(e){return(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")},t.firstNonWhitespaceIndex=function(e){for(let t=0,i=e.length;t<i;t++){
const i=e.charCodeAt(t);if(32!==i&&9!==i)return t}return-1},t.getLeadingWhitespace=function(e,t=0,i=e.length){for(let n=t;n<i;n++){const i=e.charCodeAt(n);if(32!==i&&9!==i)return e.substring(t,n)}return e.substring(t,i)},t.lastNonWhitespaceIndex=function(e,t=e.length-1){for(let i=t;i>=0;i--){const t=e.charCodeAt(i);if(32!==t&&9!==t)return i}return-1},t.compare=o,t.compareIgnoreCase=function(e,t){const i=Math.min(e.length,t.length);for(let n=0;n<i;n++){let i=e.charCodeAt(n),r=t.charCodeAt(n);if(i===r)continue;a(i)&&(i+=32),a(r)&&(r+=32);const c=i-r;if(0!==c)return s(i)&&s(r)?c:o(e.toLowerCase(),t.toLowerCase())}return e.length<t.length?-1:e.length>t.length?1:0},t.isLowerAsciiLetter=s,t.isUpperAsciiLetter=a,t.equalsIgnoreCase=function(e,t){return(e?e.length:0)===(t?t.length:0)&&l(e,t)},t.startsWithIgnoreCase=function(e,t){const i=t.length;return!(t.length>e.length)&&l(e,t,i)},t.commonPrefixLength=function(e,t){let i,n=Math.min(e.length,t.length);for(i=0;i<n;i++)if(e.charCodeAt(i)!==t.charCodeAt(i))return i
;return n},t.commonSuffixLength=function(e,t){let i,n=Math.min(e.length,t.length);const r=e.length-1,o=t.length-1;for(i=0;i<n;i++)if(e.charCodeAt(r-i)!==t.charCodeAt(o-i))return i;return n},t.overlap=function(e,t){const i=e.length;let n=t.length,r=i-n;if(0===r)return e===t?i:0;for(r<0&&(n+=r,r=0);r<i&&n>0;){if(u(e,r,i,t,0,n))return n;n-=1,r+=1}return 0},t.isHighSurrogate=function(e){return 55296<=e&&e<=56319},t.isLowSurrogate=function(e){return 56320<=e&&e<=57343};const p=/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u08BD\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE33\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDCFF]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD50-\uDFFF]|\uD83B[\uDC00-\uDEBB])/;t.containsRTL=function(e){return p.test(e)}
;const g=/(?:[\u231A\u231B\u23F0\u23F3\u2600-\u27BF\u2B50\u2B55]|\uD83C[\uDDE6-\uDDFF\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F\uDE80-\uDEF8]|\uD83E[\uDD00-\uDDE6])/;t.containsEmoji=function(e){return g.test(e)};const m=/^[\t\n\r\x20-\x7E]*$/;t.isBasicASCII=function(e){return m.test(e)},t.containsFullWidthCharacter=function(e){for(let t=0,i=e.length;t<i;t++)if(d(e.charCodeAt(t)))return!0;return!1},t.isFullWidthCharacter=d,t.lcut=function(e,i){if(e.length<i)return e;const n=/\b/g;let r=0;for(;n.test(e)&&!(e.length-n.lastIndex<i);)r=n.lastIndex,n.lastIndex+=1;return e.substring(r).replace(/^\s/,t.empty)};const v=/\x1B\x5B[12]?K/g,w=/\x1b\[\d+m/g,y=/\x1b\[0?m/g;t.removeAnsiEscapeCodes=function(e){return e&&(e=(e=(e=e.replace(v,"")).replace(w,"")).replace(y,"")),e},t.removeAccents=function(){if("function"!=typeof String.prototype.normalize)return function(e){return e};{const e=/[\u0300-\u036f]/g;return function(i){return i.normalize("NFD").replace(e,t.empty)}}}(),t.UTF8_BOM_CHARACTER=String.fromCharCode(65279),
t.startsWithUTF8BOM=h,t.stripUTF8BOM=function(e){return h(e)?e.substr(1):e},t.safeBtoa=function(e){return btoa(encodeURIComponent(e))},t.repeat=function(e,t){let i="";for(let n=0;n<t;n++)i+=e;return i},t.fuzzyContains=function(e,t){if(!e||!t)return!1;if(e.length<t.length)return!1;const i=t.length,n=e.toLowerCase();let r=0,o=-1;for(;r<i;){const e=n.indexOf(t[r],o+1);if(e<0)return!1;o=e,r++}return!0},t.containsUppercaseCharacter=function(e,t=!1){return!!e&&(t&&(e=e.replace(/\\./g,"")),e.toLowerCase()!==e)},t.uppercaseFirstLetter=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},t.getNLines=function(e,t=1){if(0===t)return"";let i=-1;do{i=e.indexOf("\n",i+1),t--}while(t>0&&i>=0);return i>=0?e.substr(0,i):e}}),define(t[112],i([0,1,19]),function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toLocalISOString=function(e){
return e.getFullYear()+"-"+i.pad(e.getMonth()+1,2)+"-"+i.pad(e.getDate(),2)+"T"+i.pad(e.getHours(),2)+":"+i.pad(e.getMinutes(),2)+":"+i.pad(e.getSeconds(),2)+"."+(e.getMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}}),define(t[40],i([0,1,2,19,5]),function(e,t,i,n,r){"use strict";function o(e){return 47===e||92===e}function s(e){return e>=65&&e<=90||e>=97&&e<=122}Object.defineProperty(t,"__esModule",{value:!0}),t.toSlashes=function(e){return e.replace(/[\\/]/g,r.posix.sep)},t.getRoot=function(e,t=r.posix.sep){if(!e)return"";const i=e.length,n=e.charCodeAt(0);if(o(n)){if(o(e.charCodeAt(1))&&!o(e.charCodeAt(2))){let n=3;const r=n;for(;n<i&&!o(e.charCodeAt(n));n++);if(r!==n&&!o(e.charCodeAt(n+1)))for(n+=1;n<i;n++)if(o(e.charCodeAt(n)))return e.slice(0,n+1).replace(/[\\/]/g,t)}return t}if(s(n)&&58===e.charCodeAt(1))return o(e.charCodeAt(2))?e.slice(0,2)+t:e.slice(0,2);let a=e.indexOf("://");if(-1!==a)for(a+=3;a<i;a++)if(o(e.charCodeAt(a)))return e.slice(0,a+1);return""},t.isUNC=function(e){if(!i.isWindows)return!1
;if(!e||e.length<5)return!1;let t=e.charCodeAt(0);if(92!==t)return!1;if(92!==(t=e.charCodeAt(1)))return!1;let n=2;const r=n;for(;n<e.length&&92!==(t=e.charCodeAt(n));n++);return r!==n&&(t=e.charCodeAt(n+1),!isNaN(t)&&92!==t)};const a=i.isWindows?/[\\/:\*\?"<>\|]/g:/[\\/]/g,c=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])$/i;t.isValidBasename=function(e){return!(!e||0===e.length||/^\s+$/.test(e)||(a.lastIndex=0,a.test(e)||i.isWindows&&c.test(e)||"."===e||".."===e||i.isWindows&&"."===e[e.length-1]||i.isWindows&&e.length!==e.trim().length||e.length>255))},t.isEqual=function(e,t,i){const r=e===t;return!i||r?r:!(!e||!t)&&n.equalsIgnoreCase(e,t)},t.isEqualOrParent=function(e,t,i,o=r.sep){if(e===t)return!0;if(!e||!t)return!1;if(t.length>e.length)return!1;if(i){if(!n.startsWithIgnoreCase(e,t))return!1;if(t.length===e.length)return!0;let i=t.length;return t.charAt(t.length-1)===o&&i--,e.charAt(i)===o}return t.charAt(t.length-1)!==o&&(t+=o),0===e.indexOf(t)},t.isWindowsDriveLetter=s}),
define(t[17],i([0,1]),function(e,t){"use strict";function i(e){return Array.isArray?Array.isArray(e):!(!e||typeof e.length!==l.number||e.constructor!==Array)}function n(e){return typeof e===l.string||e instanceof String}function r(e){return!(typeof e!==l.object||null===e||Array.isArray(e)||e instanceof RegExp||e instanceof Date)}function o(e){return typeof e===l.undefined}function s(e){return o(e)||null===e}function a(e){return typeof e===l.function}function c(e,t){if(n(t)){if(typeof e!==t)throw new Error(`argument does not match constraint: typeof ${t}`)}else if(a(t)){try{if(e instanceof t)return}catch(e){}if(!s(e)&&e.constructor===t)return;if(1===t.length&&!0===t.call(void 0,e))return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}Object.defineProperty(t,"__esModule",{value:!0});const l={number:"number",string:"string",undefined:"undefined",object:"object",function:"function"};t.isArray=i,
t.isString=n,t.isStringArray=function(e){return i(e)&&e.every(e=>n(e))},t.isObject=r,t.isNumber=function(e){return(typeof e===l.number||e instanceof Number)&&!isNaN(e)},t.isBoolean=function(e){return!0===e||!1===e},t.isUndefined=o,t.isUndefinedOrNull=s;const u=Object.prototype.hasOwnProperty;t.isEmptyObject=function(e){if(!r(e))return!1;for(let t in e)if(u.call(e,t))return!1;return!0},t.isFunction=a,t.areFunctions=function(...e){return e.length>0&&e.every(a)},t.validateConstraints=function(e,t){const i=Math.min(e.length,t.length);for(let n=0;n<i;n++)c(e[n],t[n])},t.validateConstraint=c,t.create=function(e,...t){if(function(e){return"function"==typeof e&&e.hasOwnProperty("prototype")&&!e.hasOwnProperty("arguments")}(e))return new e(...t);{const i=Object.create(e.prototype);return e.apply(i,t),i}},t.getAllPropertyNames=function(e){let t=[],i=Object.getPrototypeOf(e);for(;Object.prototype!==i;)t=t.concat(Object.getOwnPropertyNames(i)),i=Object.getPrototypeOf(i);return t},t.withNullAsUndefined=function(e){
return null===e?void 0:e},t.withUndefinedAsNull=function(e){return void 0===e?null:e}}),define(t[16],i([0,1,17]),function(e,t,i){"use strict";function n(e){if(!e||"object"!=typeof e)return e;if(e instanceof RegExp)return e;const t=Array.isArray(e)?[]:{};return Object.keys(e).forEach(i=>{e[i]&&"object"==typeof e[i]?t[i]=n(e[i]):t[i]=e[i]}),t}function r(e,t,n){if(i.isUndefinedOrNull(e))return e;const o=t(e);if(void 0!==o)return o;if(i.isArray(e)){const i=[];for(const o of e)i.push(r(o,t,n));return i}if(i.isObject(e)){if(n.has(e))throw new Error("Cannot clone recursive data-structure");n.add(e);const i={};for(let o in e)a.call(e,o)&&(i[o]=r(e[o],t,n));return n.delete(e),i}return e}function o(e,t,n=!0){return i.isObject(e)?(i.isObject(t)&&Object.keys(t).forEach(r=>{r in e?n&&(i.isObject(e[r])&&i.isObject(t[r])?o(e[r],t[r],n):e[r]=t[r]):e[r]=t[r]}),e):t}function s(e,t){if(e===t)return!0;if(null===e||void 0===e||null===t||void 0===t)return!1;if(typeof e!=typeof t)return!1;if("object"!=typeof e)return!1
;if(Array.isArray(e)!==Array.isArray(t))return!1;let i,n;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(i=0;i<e.length;i++)if(!s(e[i],t[i]))return!1}else{const r=[];for(n in e)r.push(n);r.sort();const o=[];for(n in t)o.push(n);if(o.sort(),!s(r,o))return!1;for(i=0;i<r.length;i++)if(!s(e[r[i]],t[r[i]]))return!1}return!0}Object.defineProperty(t,"__esModule",{value:!0}),t.deepClone=n,t.deepFreeze=function(e){if(!e||"object"!=typeof e)return e;const t=[e];for(;t.length>0;){const e=t.shift();Object.freeze(e);for(const i in e)if(a.call(e,i)){const n=e[i];"object"!=typeof n||Object.isFrozen(n)||t.push(n)}}return e};const a=Object.prototype.hasOwnProperty;t.cloneAndChange=function(e,t){return r(e,t,new Set)},t.mixin=o,t.assign=function(e,...t){return t.forEach(t=>Object.keys(t).forEach(i=>e[i]=t[i])),e},t.equals=s,t.createKeywordMatcher=function(e,t=!1){t&&(e=e.map(function(e){return e.toLowerCase()}));const i=function(e){const t={};for(const i of e)t[i]=!0;return t}(e);return t?function(e){
return void 0!==i[e.toLowerCase()]&&i.hasOwnProperty(e.toLowerCase())}:function(e){return void 0!==i[e]&&i.hasOwnProperty(e)}},t.safeStringify=function(e){const t=[];return JSON.stringify(e,(e,n)=>{if(i.isObject(n)||Array.isArray(n)){if(-1!==t.indexOf(n))return"[Circular]";t.push(n)}return n})},t.getOrDefault=function(e,t,i){const n=t(e);return void 0===n?i:n},t.distinct=function(e,t){const i=Object.create(null);return e&&t?(Object.keys(t).forEach(n=>{const r=e[n],o=t[n];s(r,o)||(i[n]=o)}),i):i}}),define(t[8],i([0,1,2]),function(e,t,i){"use strict";function n(e,t){let i=void 0,n=-1;for(let r=0;r<e.length;r++){const o=e.charCodeAt(r);if(o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57||45===o||46===o||95===o||126===o||t&&47===o)-1!==n&&(i+=encodeURIComponent(e.substring(n,r)),n=-1),void 0!==i&&(i+=e.charAt(r));else{void 0===i&&(i=e.substr(0,r));const t=g[o];void 0!==t?(-1!==n&&(i+=encodeURIComponent(e.substring(n,r)),n=-1),i+=t):-1===n&&(n=r)}}return-1!==n&&(i+=encodeURIComponent(e.substring(n))),void 0!==i?i:e}
function r(e){let t;return t=e.authority&&e.path.length>1&&"file"===e.scheme?`//${e.authority}${e.path}`:47===e.path.charCodeAt(0)&&(e.path.charCodeAt(1)>=65&&e.path.charCodeAt(1)<=90||e.path.charCodeAt(1)>=97&&e.path.charCodeAt(1)<=122)&&58===e.path.charCodeAt(2)?e.path[1].toLowerCase()+e.path.substr(2):e.path,i.isWindows&&(t=t.replace(/\//g,"\\")),t}function o(e,t){const i=t?function(e){let t=void 0;for(let i=0;i<e.length;i++){const n=e.charCodeAt(i);35===n||63===n?(void 0===t&&(t=e.substr(0,i)),t+=g[n]):void 0!==t&&(t+=e[i])}return void 0!==t?t:e}:n;let r="",{scheme:o,authority:s,path:a,query:c,fragment:l}=e;if(o&&(r+=o,r+=":"),(s||"file"===o)&&(r+=d,r+=d),s){let e=s.indexOf("@");if(-1!==e){const t=s.substr(0,e);s=s.substr(e+1),-1===(e=t.indexOf(":"))?r+=i(t,!1):(r+=i(t.substr(0,e),!1),r+=":",r+=i(t.substr(e+1),!1)),r+="@"}-1===(e=(s=s.toLowerCase()).indexOf(":"))?r+=i(s,!1):(r+=i(s.substr(0,e),!1),r+=s.substr(e))}if(a){if(a.length>=3&&47===a.charCodeAt(0)&&58===a.charCodeAt(2)){const e=a.charCodeAt(1)
;e>=65&&e<=90&&(a=`/${String.fromCharCode(e+32)}:${a.substr(3)}`)}else if(a.length>=2&&58===a.charCodeAt(1)){const e=a.charCodeAt(0);e>=65&&e<=90&&(a=`${String.fromCharCode(e+32)}:${a.substr(2)}`)}r+=i(a,!0)}return c&&(r+="?",r+=i(c,!1)),l&&(r+="#",r+=t?l:n(l,!1)),r}Object.defineProperty(t,"__esModule",{value:!0});const s=/^\w[\w\d+.-]*$/,a=/^\//,c=/^\/\//;let l=!0;t.setUriThrowOnMissingScheme=function(e){const t=l;return l=e,t};const u="",d="/",h=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class f{static isUri(e){return e instanceof f||!!e&&("string"==typeof e.authority&&"string"==typeof e.fragment&&"string"==typeof e.path&&"string"==typeof e.query&&"string"==typeof e.scheme&&"function"==typeof e.fsPath&&"function"==typeof e.with&&"function"==typeof e.toString)}constructor(e,t,i,n,r,o=!1){"object"==typeof e?(this.scheme=e.scheme||u,this.authority=e.authority||u,this.path=e.path||u,this.query=e.query||u,this.fragment=e.fragment||u):(this.scheme=function(e,t){
return t||l?e||u:(e||(console.trace("BAD uri lacks scheme, falling back to file-scheme."),e="file"),e)}(e,o),this.authority=t||u,this.path=function(e,t){switch(e){case"https":case"http":case"file":t?t[0]!==d&&(t=d+t):t=d}return t}(this.scheme,i||u),this.query=n||u,this.fragment=r||u,function(e,t){if(!e.scheme){if(t||l)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${e.authority}", path: "${e.path}", query: "${e.query}", fragment: "${e.fragment}"}`);console.warn(`[UriError]: Scheme is missing: {scheme: "", authority: "${e.authority}", path: "${e.path}", query: "${e.query}", fragment: "${e.fragment}"}`)}if(e.scheme&&!s.test(e.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(e.path)if(e.authority){if(!a.test(e.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')
}else if(c.test(e.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}(this,o))}get fsPath(){return r(this)}with(e){if(!e)return this;let{scheme:t,authority:i,path:n,query:r,fragment:o}=e;return void 0===t?t=this.scheme:null===t&&(t=u),void 0===i?i=this.authority:null===i&&(i=u),void 0===n?n=this.path:null===n&&(n=u),void 0===r?r=this.query:null===r&&(r=u),void 0===o?o=this.fragment:null===o&&(o=u),t===this.scheme&&i===this.authority&&n===this.path&&r===this.query&&o===this.fragment?this:new p(t,i,n,r,o)}static parse(e,t=!1){const i=h.exec(e);return i?new p(i[2]||u,decodeURIComponent(i[4]||u),decodeURIComponent(i[5]||u),decodeURIComponent(i[7]||u),decodeURIComponent(i[9]||u),t):new p(u,u,u,u,u)}static file(e){let t=u;if(i.isWindows&&(e=e.replace(/\\/g,d)),e[0]===d&&e[1]===d){const i=e.indexOf(d,2);-1===i?(t=e.substring(2),e=d):(t=e.substring(2,i),e=e.substring(i)||d)}return new p("file",t,e,u,u)}static from(e){
return new p(e.scheme,e.authority,e.path,e.query,e.fragment)}toString(e=!1){return o(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof f)return e;{const t=new p(e);return t._fsPath=e.fsPath,t._formatted=e.external,t}}return e}}t.URI=f;class p extends f{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=r(this)),this._fsPath}toString(e=!1){return e?o(this,!0):(this._formatted||(this._formatted=o(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}}const g={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"}}),
define(t[44],i([0,1,8]),function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPathFromAmdModule=function(e,t){return i.URI.parse(e.toUrl(t)).fsPath}}),define(t[27],i([0,1,8,72]),function(e,t,i,n){"use strict";function r(e){const t=[];return e.forEach(e=>t.push(e)),t}function o(e){const t=[];return e.forEach((e,i)=>t.push(i)),t}Object.defineProperty(t,"__esModule",{value:!0}),t.values=r,t.keys=o,t.getOrSet=function(e,t,i){let n=e.get(t);return void 0===n&&(n=i,e.set(t,n)),n},t.mapToString=function(e){const t=[];return e.forEach((e,i)=>{t.push(`${i} => ${e}`)}),`Map(${e.size}) {${t.join(", ")}}`},t.setToString=function(e){const t=[];return e.forEach(e=>{t.push(e)}),`Set(${e.size}) {${t.join(", ")}}`},t.mapToSerializable=function(e){const t=[];return e.forEach((e,i)=>{t.push([i,e])}),t},t.serializableToMap=function(e){const t=new Map;for(const[i,n]of e)t.set(i,n);return t};class s{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){
return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){return e.charCodeAt(0)-this._value.charCodeAt(this._pos)}value(){return this._value[this._pos]}}t.StringIterator=s;class a{reset(e){return this._value=e.replace(/\\$|\/$/,""),this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++){const t=this._value.charCodeAt(this._to);if(47===t||92===t){if(!e)break;this._from++}else e=!1}return this}cmp(e){let t=0;const i=e.length;let n=this._from;for(;t<i&&n<this._to;){const i=e.charCodeAt(t)-this._value.charCodeAt(n);if(0!==i)return i;t+=1,n+=1}return i===this._to-this._from?0:t<i?-1:1}value(){return this._value.substring(this._from,this._to)}}t.PathIterator=a;class c{isEmpty(){return!(this.left||this.mid||this.right||this.value)}}class l{constructor(e){this._iter=e}static forPaths(){return new l(new a)}static forStrings(){return new l(new s)}clear(){this._root=void 0}set(e,t){
const i=this._iter.reset(e);let n;for(this._root||(this._root=new c,this._root.segment=i.value()),n=this._root;;){const e=i.cmp(n.segment);if(e>0)n.left||(n.left=new c,n.left.segment=i.value()),n=n.left;else if(e<0)n.right||(n.right=new c,n.right.segment=i.value()),n=n.right;else{if(!i.hasNext())break;i.next(),n.mid||(n.mid=new c,n.mid.segment=i.value()),n=n.mid}}const r=n.value;return n.value=t,n.key=e,r}get(e){const t=this._iter.reset(e);let i=this._root;for(;i;){const e=t.cmp(i.segment);if(e>0)i=i.left;else if(e<0)i=i.right;else{if(!t.hasNext())break;t.next(),i=i.mid}}return i?i.value:void 0}delete(e){const t=this._iter.reset(e),i=[];let n=this._root;for(;n;){const e=t.cmp(n.segment);if(e>0)i.push([1,n]),n=n.left;else if(e<0)i.push([-1,n]),n=n.right;else{if(!t.hasNext()){for(n.value=void 0;i.length>0&&n.isEmpty();){let[e,t]=i.pop();switch(e){case 1:t.left=void 0;break;case 0:t.mid=void 0;break;case-1:t.right=void 0}n=t}break}t.next(),i.push([0,n]),n=n.mid}}}findSubstr(e){const t=this._iter.reset(e)
;let i=this._root,n=void 0;for(;i;){const e=t.cmp(i.segment);if(e>0)i=i.left;else if(e<0)i=i.right;else{if(!t.hasNext())break;t.next(),n=i.value||n,i=i.mid}}return i&&i.value||n}findSuperstr(e){const t=this._iter.reset(e);let i=this._root;for(;i;){const e=t.cmp(i.segment);if(e>0)i=i.left;else if(e<0)i=i.right;else{if(!t.hasNext())return i.mid?this._nodeIterator(i.mid):void 0;t.next(),i=i.mid}}}_nodeIterator(e){let t,i,r;return{next:()=>(r||(r=[],i=0,this._forEach(e,e=>r.push(e))),i>=r.length?n.FIN:(t?t.value=r[i++]:t={done:!1,value:r[i++]},t))}}forEach(e){this._forEach(this._root,e)}_forEach(e,t){e&&(this._forEach(e.left,t),e.value&&t(e.value,e.key),this._forEach(e.mid,t),this._forEach(e.right,t))}}t.TernarySearchTree=l;class u{constructor(){this.map=new Map,this.ignoreCase=!1}set(e,t){this.map.set(this.toKey(e),t)}get(e){return this.map.get(this.toKey(e))}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}
forEach(e){this.map.forEach(e)}values(){return r(this.map)}toKey(e){let t=e.toString();return this.ignoreCase&&(t=t.toLowerCase()),t}keys(){return o(this.map).map(e=>i.URI.parse(e))}clone(){const e=new u;return this.map.forEach((t,i)=>e.map.set(i,t)),e}}t.ResourceMap=u;!function(e){e[e.None=0]="None",e[e.AsOld=1]="AsOld",e[e.AsNew=2]="AsNew"}(t.Touch||(t.Touch={}));class d{constructor(){this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}has(e){return this._map.has(e)}get(e,t=0){const i=this._map.get(e);if(i)return 0!==t&&this.touch(i,t),i.value}set(e,t,i=0){let n=this._map.get(e);if(n)n.value=t,0!==i&&this.touch(n,i);else{switch(n={key:e,value:t,next:void 0,previous:void 0},i){case 0:this.addItemLast(n);break;case 1:this.addItemFirst(n);break;case 2:default:this.addItemLast(n)}this._map.set(e,n),this._size++}}delete(e){return!!this.remove(e)}
remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){let i=this._head;for(;i;)t?e.bind(t)(i.value,i.key,this):e(i.value,i.key,this),i=i.next}values(){const e=[];let t=this._head;for(;t;)e.push(t.value),t=t.next;return e}keys(){const e=[];let t=this._head;for(;t;)e.push(t.key),t=t.next;return e}trimOld(e){if(e>=this.size)return;if(0===e)return void this.clear();let t=this._head,i=this.size;for(;t&&i>e;)this._map.delete(t.key),t=t.next,i--;this._head=t,this._size=i,t&&(t.previous=void 0)}addItemFirst(e){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");e.next=this._head,this._head.previous=e}else this._tail=e;this._head=e}addItemLast(e){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");e.previous=this._tail,
this._tail.next=e}else this._head=e;this._tail=e}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,i=e.previous;if(!t||!i)throw new Error("Invalid list");t.previous=i,i.next=t}e.next=void 0,e.previous=void 0}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(1===t||2===t)if(1===t){if(e===this._head)return;const t=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(t.previous=i,i.next=t),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e}else if(2===t){if(e===this._tail)return;const t=e.next,i=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=i,i.next=t),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e}}toJSON(){const e=[]
;return this.forEach((t,i)=>{e.push([i,t])}),e}fromJSON(e){this.clear();for(const[t,i]of e)this.set(t,i)}}t.LinkedMap=d;class h extends d{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e){return super.get(e,2)}peek(e){return super.get(e,0)}set(e,t){super.set(e,t,2),this.checkTrim()}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}t.LRUCache=h}),define(t[97],i([0,1,21,19,40,5,27,12]),function(e,t,i,n,r,o,s,a){"use strict";function c(e){switch(e){case 0:return"";case 1:return`${_}*?`;default:return`(?:${b}|${_}+${b}|${b}${_}+)*?`}}function l(e,t){if(!e)return[];const i=[];let n=!1,r=!1,o="";for(const s of e){switch(s){case t:if(!n&&!r){i.push(o),o="";continue}break;case"{":n=!0;break;case"}":n=!1;break;case"[":r=!0;break;case"]":r=!1}o+=s}return o&&i.push(o),i}
function u(e){if(!e)return"";let t="";const i=l(e,S);if(i.every(e=>e===y))t=".*";else{let e=!1;i.forEach((r,o)=>{if(r===y)return void(e||(t+=c(2),e=!0));let s=!1,a="",d=!1,h="";for(const e of r)if("}"!==e&&s)a+=e;else if(!d||"]"===e&&h)switch(e){case"{":s=!0;continue;case"[":d=!0;continue;case"}":const i=`(?:${l(a,",").map(e=>u(e)).join("|")})`;t+=i,s=!1,a="";break;case"]":t+="["+h+"]",d=!1,h="";break;case"?":t+=_;continue;case"*":t+=c(1);continue;default:t+=n.escapeRegExpCharacters(e)}else{let t;h+=t="-"===e?e:"^"!==e&&"!"!==e||h?e===S?"":n.escapeRegExpCharacters(e):"^"}o<i.length-1&&(i[o+1]!==y||o+2<i.length)&&(t+=b),e=!1})}return t}function d(e,t){if(!e)return W;let r;r="string"!=typeof e?e.pattern:e;const o=`${r=r.trim()}_${!!t.trimForExclusions}`;let s=O.get(o);if(s)return h(s,e);let a;if(E.test(r)){const e=r.substr(4);s=function(t,i){return"string"==typeof t&&n.endsWith(t,e)?r:null}}else s=(a=k.exec(f(r,t)))?function(e,t){const i=`/${e}`,r=`\\${e}`,o=function(o,s){
return"string"!=typeof o?null:s?s===e?t:null:o===e||n.endsWith(o,i)||n.endsWith(o,r)?t:null},s=[e];return o.basenames=s,o.patterns=[t],o.allBasenames=s,o}(a[1],r):(t.trimForExclusions?P:I).test(r)?function(e,t){const n=w(e.slice(1,-1).split(",").map(e=>d(e,t)).filter(e=>e!==W),e),r=n.length;if(!r)return W;if(1===r)return n[0];const o=function(t,i){for(let r=0,o=n.length;r<o;r++)if(n[r](t,i))return e;return null},s=i.first(n,e=>!!e.allBasenames);s&&(o.allBasenames=s.allBasenames);const a=n.reduce((e,t)=>t.allPaths?e.concat(t.allPaths):e,[]);a.length&&(o.allPaths=a);return o}(r,t):(a=M.exec(f(r,t)))?p(a[1].substr(1),r,!0):(a=A.exec(f(r,t)))?p(a[1],r,!1):function(e){try{const t=new RegExp(`^${u(e)}$`);return function(i,n){return t.lastIndex=0,"string"==typeof i&&t.test(i)?e:null}}catch(e){return W}}(r);return O.set(o,s),h(s,e)}function h(e,t){return"string"==typeof t?e:function(i,n){return r.isEqualOrParent(i,t.base)?e(o.relative(t.base,i),n):null}}function f(e,t){
return t.trimForExclusions&&n.endsWith(e,"/**")?e.substr(0,e.length-2):e}function p(e,t,i){const r=o.sep!==o.posix.sep?e.replace(C,o.sep):e,s=o.sep+r,a=i?function(e,i){return"string"!=typeof e||e!==r&&!n.endsWith(e,s)?null:t}:function(e,i){return"string"==typeof e&&e===r?t:null};return a.allPaths=[(i?"*/":"./")+e],a}function g(e,t={}){if(!e)return D;if("string"==typeof e||v(e)){const i=d(e,t);if(i===W)return D;const n=function(e,t){return!!i(e,t)};return i.allBasenames&&(n.allBasenames=i.allBasenames),i.allPaths&&(n.allPaths=i.allPaths),n}return function(e,t){const n=w(Object.getOwnPropertyNames(e).map(i=>(function(e,t,i){if(!1===t)return W;const n=d(e,i);if(n===W)return W;if("boolean"==typeof t)return n;if(t){const i=t.when;if("string"==typeof i){const t=(t,r,o,s)=>{if(!s||!n(t,r))return null;const c=i.replace("$(basename)",o),l=s(c);return a.isThenable(l)?l.then(t=>t?e:null):l?e:null};return t.requiresSiblings=!0,t}}return n})(i,e[i],t)).filter(e=>e!==W)),r=n.length;if(!r)return W
;if(!n.some(e=>!!e.requiresSiblings)){if(1===r)return n[0];const e=function(e,t){for(let i=0,r=n.length;i<r;i++){const r=n[i](e,t);if(r)return r}return null},t=i.first(n,e=>!!e.allBasenames);t&&(e.allBasenames=t.allBasenames);const o=n.reduce((e,t)=>t.allPaths?e.concat(t.allPaths):e,[]);return o.length&&(e.allPaths=o),e}const s=function(e,t,i){let r=void 0;for(let s=0,a=n.length;s<a;s++){const a=n[s];a.requiresSiblings&&i&&(t||(t=o.basename(e)),r||(r=t.substr(0,t.length-o.extname(e).length)));const c=a(e,t,r,i);if(c)return c}return null},c=i.first(n,e=>!!e.allBasenames);c&&(s.allBasenames=c.allBasenames);const l=n.reduce((e,t)=>t.allPaths?e.concat(t.allPaths):e,[]);l.length&&(s.allPaths=l);return s}(e,t)}function m(e){const t={};for(const i of e)t[i]=!0;return t}function v(e){const t=e;return t&&"string"==typeof t.base&&"string"==typeof t.pattern}function w(e,t){const i=e.filter(e=>!!e.basenames);if(i.length<2)return e;const n=i.reduce((e,t)=>{const i=t.basenames;return i?e.concat(i):e},[]);let r;if(t){r=[]
;for(let e=0,i=n.length;e<i;e++)r.push(t)}else r=i.reduce((e,t)=>{const i=t.patterns;return i?e.concat(i):e},[]);const o=function(e,t){if("string"!=typeof e)return null;if(!t){let i;for(i=e.length;i>0;i--){const t=e.charCodeAt(i-1);if(47===t||92===t)break}t=e.substr(i)}const i=n.indexOf(t);return-1!==i?r[i]:null};o.basenames=n,o.patterns=r,o.allBasenames=n;const s=e.filter(e=>!e.basenames);return s.push(o),s}Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyExpression=function(){return Object.create(null)};const y="**",S="/",b="[/\\\\]",_="[^/\\\\]",C=/\//g;t.splitGlobAware=l;const E=/^\*\*\/\*\.[\w\.-]+$/,k=/^\*\*\/([\w\.-]+)\/?$/,I=/^{\*\*\/[\*\.]?[\w\.-]+\/?(,\*\*\/[\*\.]?[\w\.-]+\/?)*}$/,P=/^{\*\*\/[\*\.]?[\w\.-]+(\/(\*\*)?)?(,\*\*\/[\*\.]?[\w\.-]+(\/(\*\*)?)?)*}$/,M=/^\*\*((\/[\w\.-]+)+)\/?$/,A=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,O=new s.LRUCache(1e4),D=function(){return!1},W=function(){return null};t.match=function(e,t,i){return!(!e||"string"!=typeof t)&&g(e)(t,void 0,i)},t.parse=g,
t.hasSiblingPromiseFn=function(e){if(!e)return;let t;return i=>(t||(t=(e()||Promise.resolve([])).then(e=>e?m(e):{})),t.then(e=>!!e[i]))},t.hasSiblingFn=function(e){if(!e)return;let t;return i=>{if(!t){const i=e();t=i?m(i):{}}return!!t[i]}},t.isRelativePattern=v,t.parseToAsync=function(e,t){const i=g(e,t);return(e,t,n)=>{const r=i(e,t,n);return a.isThenable(r)?r:Promise.resolve(r)}},t.getBasenameTerms=function(e){return e.allBasenames||[]},t.getPathTerms=function(e){return e.allPaths||[]}}),define(t[70],i([0,1,27]),function(e,t,i){"use strict";function n(e,i,n){if(!t.canNormalize||!e)return e;const r=n.get(e);if(r)return r;let o;return o=s.test(e)?e.normalize(i):e,n.set(e,o),o}Object.defineProperty(t,"__esModule",{value:!0}),t.canNormalize="function"==typeof"".normalize;const r=new i.LRUCache(1e4);t.normalizeNFC=function(e){return n(e,"NFC",r)};const o=new i.LRUCache(1e4);t.normalizeNFD=function(e){return n(e,"NFD",o)};const s=/[^\u0000-\u0080]/}),
define(t[25],i([0,1,40,5,8,19,30,2,97,27]),function(e,t,i,n,r,o,s,a,c,l){"use strict";function u(e){return!e||e.scheme!==s.Schemas.file||!a.isLinux}function d(e,t,n=u(e)){if(e.scheme===t.scheme){if(e.scheme===s.Schemas.file)return i.isEqualOrParent(p(e),p(t),n);if(h(e.authority,t.authority))return i.isEqualOrParent(e.path,t.path,n,"/")}return!1}function h(e,t){return e===t||o.equalsIgnoreCase(e,t)}function f(e){return n.posix.basename(e.path)}function p(e){let t;const n=e.path;return t=e.authority&&n.length>1&&"file"===e.scheme?`//${e.authority}${n}`:a.isWindows&&47===n.charCodeAt(0)&&i.isWindowsDriveLetter(n.charCodeAt(1))&&58===n.charCodeAt(2)?n.substr(1):n,a.isWindows&&(t=t.replace(/\//g,"\\")),t}function g(e){if(e.scheme===s.Schemas.file){const t=p(e);return t.length>i.getRoot(t).length&&t[t.length-1]===n.sep}{const t=e.path;return t.length>1&&47===t.charCodeAt(t.length-1)}}function m(e,t){if(e.scheme===t.scheme&&h(e.authority,t.authority)){if(e.scheme===s.Schemas.file){const r=n.relative(e.path,t.path)
;return a.isWindows?i.toSlashes(r):r}return n.posix.relative(e.path||"/",t.path||"/")}}Object.defineProperty(t,"__esModule",{value:!0}),t.getComparisonKey=function(e){return u(e)?e.toString().toLowerCase():e.toString()},t.hasToIgnoreCase=u,t.basenameOrAuthority=function(e){return f(e)||e.authority},t.isEqualOrParent=d,t.isEqualAuthority=h,t.isEqual=function(e,t,i=u(e)){if(e===t)return!0;if(!e||!t)return!1;if(e.scheme!==t.scheme||!h(e.authority,t.authority))return!1;const n=e.path||"/",r=t.path||"/";return n===r||i&&o.equalsIgnoreCase(n||"/",r||"/")},t.basename=f,t.extname=function(e){return n.posix.extname(e.path)},t.dirname=function(e){if(0===e.path.length)return e;if(e.scheme===s.Schemas.file)return r.URI.file(n.dirname(p(e)));let t=n.posix.dirname(e.path);return e.authority&&t.length&&47!==t.charCodeAt(0)&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/"),e.with({path:t})},t.joinPath=function(e,...t){let i
;return i=e.scheme===s.Schemas.file?r.URI.file(n.join(p(e),...t)).path:n.posix.join(e.path||"/",...t),e.with({path:i})},t.normalizePath=function(e){if(!e.path.length)return e;let t;return t=e.scheme===s.Schemas.file?r.URI.file(n.normalize(p(e))).path:n.posix.normalize(e.path),e.with({path:t})},t.originalFSPath=p,t.isAbsolutePath=function(e){return!!e.path&&"/"===e.path[0]},t.hasTrailingPathSeparator=g,t.removeTrailingPathSeparator=function(e){return g(e)?e.with({path:e.path.substr(0,e.path.length-1)}):e},t.relativePath=m,t.resolvePath=function(e,t){if(e.scheme===s.Schemas.file){const i=r.URI.file(n.resolve(p(e),t));return e.with({authority:i.authority,path:i.path})}return e.with({path:n.posix.resolve(e.path,t)})},t.distinctParents=function(e,t){const i=[];for(let n=0;n<e.length;n++){const r=t(e[n]);e.some((e,i)=>i!==n&&d(r,t(e)))||i.push(e[n])}return i};!function(e){e.META_DATA_LABEL="label",e.META_DATA_DESCRIPTION="description",e.META_DATA_SIZE="size",e.META_DATA_MIME="mime",e.parseMetaData=function(t){
const i=new Map;t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";")).split(";").forEach(e=>{const[t,n]=e.split(":");t&&n&&i.set(t,n)});const n=t.path.substring(0,t.path.indexOf(";"));return n&&i.set(e.META_DATA_MIME,n),i}}(t.DataUri||(t.DataUri={}));class v{constructor(e,t){this.expressionsByRoot=l.TernarySearchTree.forPaths(),this.globalExpression=c.parse(e);for(const e of t)this.expressionsByRoot.set(e.root.toString(),{root:e.root,expression:c.parse(e.expression)})}matches(e){const t=this.expressionsByRoot.findSubstr(e.toString());if(t){const i=m(t.root,e);if(i&&t.expression(i))return!0}return!!this.globalExpression(e.path)}}t.ResourceGlobMatcher=v}),define(t[42],i([0,1,8,5,19,30,2,25]),function(e,t,i,n,r,o,s,a){"use strict";function c(e){return!(!s.isWindows||!e||":"!==e[1])}function l(e){return c(e)?e.charAt(0).toUpperCase()+e.slice(1):e}function u(e,t){if(s.isWindows||!e||!t)return e;let i=d.original===t?d.normalized:void 0;return i||(i=`${r.rtrim(t,n.posix.sep)}${n.posix.sep}`,d={original:t,
normalized:i}),(s.isLinux?r.startsWith(e,i):r.startsWithIgnoreCase(e,i))&&(e=`~/${e.substr(i.length)}`),e}Object.defineProperty(t,"__esModule",{value:!0}),t.getPathLabel=function(e,t,d){if("string"==typeof e&&(e=i.URI.file(e)),d){const t=d.getWorkspaceFolder(e);if(t){const i=d.getWorkspace().folders.length>1;let o;if(o=a.isEqual(t.uri,e)?"":n.normalize(r.ltrim(e.path.substr(t.uri.path.length),n.posix.sep)),i){const e=t&&t.name?t.name:a.basename(t.uri);o=o?e+"  "+o:e}return o}}if(e.scheme!==o.Schemas.file&&e.scheme!==o.Schemas.untitled)return e.with({query:null,fragment:null}).toString(!0);if(c(e.fsPath))return n.normalize(l(e.fsPath));let h=n.normalize(e.fsPath);return!s.isWindows&&t&&(h=u(h,t.userHome)),h},t.getBaseLabel=function(e){if(!e)return;"string"==typeof e&&(e=i.URI.file(e));const t=a.basename(e)||(e.scheme===o.Schemas.file?e.fsPath:e.path);return c(t)?l(t):t},t.normalizeDriveLetter=l;let d=Object.create(null);t.tildify=u,t.untildify=function(e,t){return e.replace(/^~($|\/|\\)/,`${t}$1`)}
;const h="",f="\\\\",p="~";t.shorten=function(e){const t=new Array(e.length);let i=!1;for(let o=0;o<e.length;o++){let s=e[o];if(""===s){t[o]=`.${n.sep}`;continue}if(!s){t[o]=s;continue}i=!0;let a="";0===s.indexOf(f)?(a=s.substr(0,s.indexOf(f)+f.length),s=s.substr(s.indexOf(f)+f.length)):0===s.indexOf(n.sep)?(a=s.substr(0,s.indexOf(n.sep)+n.sep.length),s=s.substr(s.indexOf(n.sep)+n.sep.length)):0===s.indexOf(p)&&(a=s.substr(0,s.indexOf(p)+p.length),s=s.substr(s.indexOf(p)+p.length));const c=s.split(n.sep);for(let s=1;i&&s<=c.length;s++)for(let l=c.length-s;i&&l>=0;l--){i=!1;let u=c.slice(l,l+s).join(n.sep);for(let t=0;!i&&t<e.length;t++)if(t!==o&&e[t]&&e[t].indexOf(u)>-1){const o=l+s===c.length,a=l>0&&e[t].indexOf(n.sep)>-1?n.sep+u:u,d=r.endsWith(e[t],a);i=!o||d}if(!i){let e="";(r.endsWith(c[0],":")||""!==a)&&(1===l&&(l=0,s++,u=c[0]+n.sep+u),l>0&&(e=c[0]+n.sep),e=a+e),l>0&&(e=e+h+n.sep),e+=u,l+s<c.length&&(e=e+n.sep+h),t[o]=e}}i&&(t[o]=s)}return t};var g;!function(e){e[e.TEXT=0]="TEXT",
e[e.VARIABLE=1]="VARIABLE",e[e.SEPARATOR=2]="SEPARATOR"}(g||(g={})),t.template=function(e,t=Object.create(null)){const i=[];let n=!1,r="";for(const o of e)if("$"===o||n&&"{"===o)r&&i.push({value:r,type:g.TEXT}),r="",n=!0;else if("}"===o&&n){const e=t[r];if("string"==typeof e)e.length&&i.push({value:e,type:g.VARIABLE});else if(e){const t=i[i.length-1];t&&t.type===g.SEPARATOR||i.push({value:e.label,type:g.SEPARATOR})}r="",n=!1}else r+=o;return r&&!n&&i.push({value:r,type:g.TEXT}),i.filter((e,t)=>e.type!==g.SEPARATOR||[i[t-1],i[t+1]].every(e=>e&&(e.type===g.VARIABLE||e.type===g.TEXT)&&e.value.length>0)).map(e=>e.value).join("")},t.mnemonicMenuLabel=function(e,t){return s.isMacintosh||t?e.replace(/\(&&\w\)|&&/g,"").replace(/&/g,s.isMacintosh?"&":"&&"):e.replace(/&&|&/g,e=>"&"===e?"&&":"&")},t.mnemonicButtonLabel=function(e,t){return s.isMacintosh||t?e.replace(/\(&&\w\)|&&/g,""):s.isWindows?e.replace(/&&|&/g,e=>"&"===e?"&&":"&"):e.replace(/&&/g,"_")},t.unmnemonicLabel=function(e){return e.replace(/&/g,"&&")},
t.splitName=function(e){for(let t=e.length-1;t>=1;t--){const i=e.charCodeAt(t);if(47===i||92===i)return{parentPath:e.substr(0,t),name:e.substr(t+1)}}return{parentPath:"",name:e}}}),define(t[28],i([0,1]),function(e,t){"use strict";function i(){return new o}function n(e){return s.test(e)}Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e){this._value=e}asHex(){return this._value}}class o extends r{constructor(){super([o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),"-",o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),"-","4",o._randomHex(),o._randomHex(),o._randomHex(),"-",o._oneOf(o._timeHighBits),o._randomHex(),o._randomHex(),o._randomHex(),"-",o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}
static _randomHex(){return o._oneOf(o._chars)}}o._chars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],o._timeHighBits=["8","9","a","b"],t.v4=i;const s=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;t.isUUID=n,t.parse=function(e){if(!n(e))throw new Error("invalid uuid");return new r(e)},t.generateUuid=function(){return i().asHex()}}),define(t[126],i([0,1,15,59,61]),function(e,t,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checksum=function(e,t){return new Promise((t,o)=>{const s=i.createReadStream(e),a=n.createHash("sha1");s.pipe(a);const c=r.once((e,i)=>{s.removeAllListeners(),a.removeAllListeners(),e?o(e):t(i)});s.once("error",c),s.once("end",c),a.once("error",c),a.once("data",e=>c(void 0,e.toString("hex")))}).then(e=>e!==t?Promise.reject(new Error("Hash mismatch")):Promise.resolve())}}),define(t[141],i([0,1,149]),function(e,t,i){"use strict";function n(e,t,r){if(i.ok(e,"Missing first parameter"),
i.ok("function"==typeof t,"Second parameter must be a function that is called for each element"),i.ok("function"==typeof r,"Third parameter must be a function that is called on error and success"),"function"==typeof e)try{e((e,i)=>{e?r(e,null):n(i,t,r)})}catch(e){r(e,null)}else{const i=[],n=function(o){if(o<e.length)try{t(e[o],(e,t)=>{!0!==e&&!1!==e||(t=e,e=null),e?r(e,null):(t&&i.push(t),process.nextTick(()=>{n(o+1)}))},o,e.length)}catch(e){r(e,null)}else r(null,i)};n(0)}}function r(e){!function(e){i.ok(e.length>1,"Need at least one error handler and one function to process sequence"),e.forEach(e=>{i.ok("function"==typeof e)});const t=e.splice(0,1)[0];let r=null;n(e,(e,t)=>{const i=function(e,i){!0!==e&&!1!==e||(i=e,e=null),e?t(e,null):(r=i,t(null,null))};try{e.call(i,r)}catch(e){t(e,null)}},(e,i)=>{e&&t(e)})}(Array.isArray(e)?e:Array.prototype.slice.call(arguments))}Object.defineProperty(t,"__esModule",{value:!0}),t.parallel=function(e,t,i){const n=new Array(e.length),r=new Array(e.length);let o=!1,s=0
;if(0===e.length)return i(null,[]);e.forEach((a,c)=>{t(a,(t,a)=>{if(t?(o=!0,n[c]=null,r[c]=t):(n[c]=a,r[c]=null),++s===e.length)return i(o?r:null,n)})})},t.loop=n,t.sequence=r}),define(t[63],i([0,1,18,28,23,27]),function(e,t,i,n,r,o){"use strict";function s(){return a||(a=new Promise(t=>{Promise.all([new Promise((t,i)=>{e(["crypto"],t,i)}),new Promise((t,i)=>{e(["getmac"],t,i)})]).then(([e,n])=>{try{n.getMac((i,n)=>{t(i?void 0:e.createHash("sha256").update(n,"utf8").digest("hex"))}),setTimeout(()=>{t(void 0)},1e4)}catch(e){i.onUnexpectedError(e),t(void 0)}},e=>{i.onUnexpectedError(e),t(void 0)})}).then(e=>e||n.generateUuid()))}Object.defineProperty(t,"__esModule",{value:!0}),t.virtualMachineHint=new class{_isVirtualMachineMacAdress(e){return this._virtualMachineOUIs||(this._virtualMachineOUIs=o.TernarySearchTree.forStrings(),this._virtualMachineOUIs.set("00-50-56",!0),this._virtualMachineOUIs.set("00-0C-29",!0),this._virtualMachineOUIs.set("00-05-69",!0),this._virtualMachineOUIs.set("00-03-FF",!0),
this._virtualMachineOUIs.set("00-1C-42",!0),this._virtualMachineOUIs.set("00-16-3E",!0),this._virtualMachineOUIs.set("08-00-27",!0),this._virtualMachineOUIs.set("00:50:56",!0),this._virtualMachineOUIs.set("00:0C:29",!0),this._virtualMachineOUIs.set("00:05:69",!0),this._virtualMachineOUIs.set("00:03:FF",!0),this._virtualMachineOUIs.set("00:1C:42",!0),this._virtualMachineOUIs.set("00:16:3E",!0),this._virtualMachineOUIs.set("08:00:27",!0)),!!this._virtualMachineOUIs.findSubstr(e)}value(){if(void 0===this._value){let e=0,t=0;const i=r.networkInterfaces();for(let n in i)if(Object.prototype.hasOwnProperty.call(i,n))for(const{mac:r,internal:o}of i[n])o||(t+=1,this._isVirtualMachineMacAdress(r.toUpperCase())&&(e+=1));this._value=t>0?e/t:0}return this._value}};let a;t.getMachineId=s}),define(t[92],i([0,1,44]),function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i.getPathFromAmdModule(e,"paths"),r=e.__$__nodeRequire(n);t.getAppDataPath=r.getAppDataPath,
t.getDefaultUserDataPath=r.getDefaultUserDataPath}),define(t[93],i([0,1,94,17]),function(e,t,i,r){"use strict";function o(t,o={}){return n(this,void 0,void 0,function*(){const n=i.parse(t),s=o.proxyUrl||function(e){return"http:"===e.protocol?process.env.HTTP_PROXY||process.env.http_proxy||null:"https:"===e.protocol?process.env.HTTPS_PROXY||process.env.https_proxy||process.env.HTTP_PROXY||process.env.http_proxy||null:null}(n);if(!s)return null;const a=i.parse(s);if(!/^https?:$/.test(a.protocol||""))return null;const c={host:a.hostname||"",port:Number(a.port),auth:a.auth,rejectUnauthorized:!r.isBoolean(o.strictSSL)||o.strictSSL};return new("http:"===n.protocol?yield new Promise((t,i)=>{e(["http-proxy-agent"],t,i)}):yield new Promise((t,i)=>{e(["https-proxy-agent"],t,i)}))(c)})}Object.defineProperty(t,"__esModule",{value:!0}),t.getProxyAgent=o}),define(t[96],i([0,1,45,44]),function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listProcesses=function(t){return new Promise((r,o)=>{
function s(e,i,n,r,o){const s=l.get(i);if(e===t||s){const u={name:a(n),cmd:n,pid:e,ppid:i,load:r,mem:o};l.set(e,u),e===t&&(c=u),s&&(s.children||(s.children=[]),s.children.push(u),s.children.length>1&&(s.children=s.children.sort((e,t)=>e.pid-t.pid)))}}function a(e){const t=/--disable-blink-features=Auxclick/;if(/\\watcher\\win32\\CodeHelper\.exe/.exec(e))return"watcherService ";if(/--crashes-directory/.exec(e))return"electron-crash-reporter";if(/\\pipe\\winpty-control/.exec(e))return"winpty-process";if(/conhost\.exe/.exec(e))return"console-window-host (Windows internal process)";let i=/--type=([a-zA-Z-]+)/.exec(e);if(i&&2===i.length)return"renderer"===i[1]?t.exec(e)?"shared-process":"window":i[1];const n=/[a-zA-Z-]+\.js/g;let r="";do{(i=n.exec(e))&&(r+=i+" ")}while(i);return r&&e.indexOf("node ")<0&&e.indexOf("node.exe")<0?`electron_node ${r}`:e}let c;const l=new Map;if("win32"===process.platform)new Promise((t,i)=>{e(["windows-process-tree"],t,i)}).then(e=>{e.getProcessList(t,i=>{e.getProcessCpuUsage(i,e=>{
const i=new Map;e.forEach(e=>{const t=(e=>0===e.indexOf("\\\\?\\")?e.substr(4):0===e.indexOf("\\??\\")?e.substr(4):0===e.indexOf('"\\\\?\\')?'"'+e.substr(5):0===e.indexOf('"\\??\\')?'"'+e.substr(5):e)(e.commandLine||"");i.set(e.pid,{name:a(t),cmd:t,pid:e.pid,ppid:e.ppid,load:e.cpu||0,mem:e.memory||0})}),(c=i.get(t))?(i.forEach(e=>{const t=i.get(e.ppid);t&&(t.children||(t.children=[]),t.children.push(e))}),i.forEach(e=>{e.children&&(e.children=e.children.sort((e,t)=>e.pid-t.pid))}),r(c)):o(new Error(`Root process ${t} not found`))})},e.ProcessDataFlag.CommandLine|e.ProcessDataFlag.Memory)});else{const t=/^\s*([0-9]+)\s+([0-9]+)\s+([0-9]+\.[0-9]+)\s+([0-9]+\.[0-9]+)\s+(.+)$/;i.exec("/bin/ps -ax -o pid=,ppid=,pcpu=,pmem=,command=",{maxBuffer:1024e3,env:{LC_NUMERIC:"en_US.UTF-8"}},(a,u,d)=>{if(a||d)o(a||d.toString());else{const a=u.toString().split("\n");for(const e of a){const i=t.exec(e.trim());i&&6===i.length&&s(parseInt(i[1]),parseInt(i[2]),i[5],parseFloat(i[3]),parseFloat(i[4]))}
if("linux"===process.platform){let t=[c];const s=[];for(;t.length;){const e=t.shift();e&&(s.push(e.pid),e.children&&(t=t.concat(e.children)))}let a=JSON.stringify(n.getPathFromAmdModule(e,"vs/base/node/cpuUsage.sh"));a+=" "+s.join(" "),i.exec(a,{},(e,t,i)=>{if(e||i)o(e||i.toString());else{const e=t.toString().split("\n");for(let t=0;t<s.length;t++)l.get(s[t]).load=parseFloat(e[t]);r(c)}})}else r(c)}})}})}}),define(t[99],i([0,1,15]),function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.readExactlyByFile=function(e,t){return new Promise((n,r)=>{i.open(e,"r",null,(e,o)=>{function s(e,t,s){i.close(o,i=>i?r(i):e&&"EISDIR"===e.code?r(e):n({buffer:t,bytesRead:s}))}function a(){i.read(o,c,l,t-l,null,(e,i)=>e?s(e,null,0):0===i?s(null,c,l):(l+=i)===t?s(null,c,l):a())}if(e)return r(e);const c=Buffer.allocUnsafe(t);let l=0;a()})})},t.readToMatchingString=function(e,t,n,r){return new Promise((o,s)=>i.open(e,"r",null,(a,c)=>{function l(e,t){i.close(c,i=>i?s(i):e&&"EISDIR"===e.code?s(e):o(t))}
function u(){i.read(c,d,h,n,null,(i,n)=>{if(i)return l(i,null);if(0===n)return l(null,null);h+=n;const o=d.indexOf(t);return o>=0?l(null,d.toString("utf8").substr(0,o)):h>=r?l(new Error(`Could not find ${t} in first ${r} bytes of ${e}`),null):u()})}if(a)return s(a);const d=Buffer.allocUnsafe(r);let h=0;u()}))}}),define(t[101],i([0,1,99,193,2,45,186]),function(e,t,i,n,r,o,s){"use strict";function a(e){return n.decodeStream(c(e))}function c(e){return e===t.UTF8_with_bom||null===e?t.UTF8:e}function l(e,i){if(!e||i<2)return null;const n=e.readUInt8(0),r=e.readUInt8(1);if(254===n&&255===r)return t.UTF16be;if(255===n&&254===r)return t.UTF16le;if(i<3)return null;const o=e.readUInt8(2);return 239===n&&187===r&&191===o?t.UTF8:null}function u(t){return new Promise((t,i)=>{e(["jschardet"],t,i)}).then(e=>{e.Constants.MINIMUM_THRESHOLD=f;const i=e.detect(t);if(!i||!i.encoding)return null;const n=i.encoding.toLowerCase();return 0<=p.indexOf(n)?null:d(i.encoding)})}function d(e){
const t=e.replace(/[^a-zA-Z0-9]/g,"").toLowerCase();return g[t]||t}function h({buffer:e,bytesRead:i},n){let r=l(e,i),o=!1;if(r!==t.UTF16be&&r!==t.UTF16le&&e){let n=!0,s=!0,a=!1;for(let t=0;t<i&&t<m;t++){const i=t%2==1,r=0===e.readInt8(t);if(r&&(a=!0),n&&(i&&!r||!i&&r)&&(n=!1),s&&(i&&r||!i&&!r)&&(s=!1),r&&!n&&!s)break}a&&(n?r=t.UTF16le:s?r=t.UTF16be:o=!0)}return n&&!o&&!r&&e?u(e.slice(0,i)).then(e=>({seemsBinary:!1,encoding:e})):{seemsBinary:o,encoding:r}}Object.defineProperty(t,"__esModule",{value:!0}),t.UTF8="utf8",t.UTF8_with_bom="utf8bom",t.UTF16be="utf16be",t.UTF16le="utf16le",t.toDecodeStream=function(e,i){return i.minBytesRequiredForDetection||(i.minBytesRequiredForDetection=i.guessEncoding?w:v),i.overwriteEncoding||(i.overwriteEncoding=(e=>e||t.UTF8)),new Promise((t,n)=>{e.on("error",n),e.pipe(new class extends s.Writable{constructor(){super(...arguments),this._buffer=[],this._bytesBuffered=0}_write(e,t,n){Buffer.isBuffer(e)||n(new Error("data must be a buffer")),
this._decodeStream?this._decodeStream.write(e,n):(this._buffer.push(e),this._bytesBuffered+=e.length,this._decodeStreamConstruction?this._decodeStreamConstruction.then(e=>n(),e=>n(e)):"number"==typeof i.minBytesRequiredForDetection&&this._bytesBuffered>=i.minBytesRequiredForDetection?this._startDecodeStream(n):n())}_startDecodeStream(e){this._decodeStreamConstruction=Promise.resolve(h({buffer:Buffer.concat(this._buffer),bytesRead:this._bytesBuffered},i.guessEncoding)).then(n=>{i.overwriteEncoding&&(n.encoding=i.overwriteEncoding(n.encoding)),this._decodeStream=a(n.encoding);for(const e of this._buffer)this._decodeStream.write(e);e(),t({detected:n,stream:this._decodeStream})},t=>{this.emit("error",t),e(t)})}_final(e){this._decodeStream?this._decodeStream.end(e):this._startDecodeStream(()=>this._decodeStream.end(e))}})})},t.bomLength=function(e){switch(e){case t.UTF8:return 3;case t.UTF16be:case t.UTF16le:return 2}return 0},t.decode=function(e,t){return n.decode(e,c(t))},t.encode=function(e,t,i){
return n.encode(e,c(t),i)},t.encodingExists=function(e){return n.encodingExists(c(e))},t.decodeStream=a,t.encodeStream=function(e,t){return n.encodeStream(c(e),t)},t.detectEncodingByBOMFromBuffer=l,t.detectEncodingByBOM=function(e){return i.readExactlyByFile(e,3).then(({buffer:e,bytesRead:t})=>l(e,t))};const f=.2,p=["ascii","utf-8","utf-16","utf-32"];t.guessEncodingByBuffer=u;const g={ibm866:"cp866",big5:"cp950"};t.toCanonicalName=function(e){switch(e){case"shiftjis":return"shift-jis";case"utf16le":return"utf-16le";case"utf16be":return"utf-16be";case"big5hkscs":return"big5-hkscs";case"eucjp":return"euc-jp";case"euckr":return"euc-kr";case"koi8r":return"koi8-r";case"koi8u":return"koi8-u";case"macroman":return"x-mac-roman";case"utf8bom":return"utf8";default:const t=e.match(/windows(\d+)/);return t?"windows-"+t[1]:e}};const m=512,v=512,w=4096;t.detectEncodingFromBuffer=h;const y={437:"cp437",850:"cp850",852:"cp852",855:"cp855",857:"cp857",860:"cp860",861:"cp861",863:"cp863",865:"cp865",866:"cp866",869:"cp869",
936:"cp936",1252:"cp1252"};t.resolveTerminalEncoding=function(e){let i;const s=process.env.VSCODE_CLI_ENCODING;return s?(e&&console.log(`Found VSCODE_CLI_ENCODING variable: ${s}`),i=Promise.resolve(s)):i=r.isLinux||r.isMacintosh?new Promise(t=>{e&&console.log('Running "locale charmap" to detect terminal encoding...'),o.exec("locale charmap",(e,i,n)=>t(i))}):new Promise(t=>{e&&console.log('Running "chcp" to detect terminal encoding...'),o.exec("chcp",(e,i,n)=>{if(i){const e=Object.keys(y);for(const n of e)if(i.indexOf(n)>=0)return t(y[n])}return t(void 0)})}),i.then(i=>{if(e&&console.log(`Detected raw terminal encoding: ${i}`),!i||"utf-8"===i.toLowerCase()||i.toLowerCase()===t.UTF8)return t.UTF8;const r=d(i);return n.encodingExists(r)?r:(e&&console.log("Unsupported terminal encoding, falling back to UTF-8."),t.UTF8)})}}),define(t[33],i([0,1,15,5,12,70,2,19,28,101,141,6]),function(e,t,i,n,r,o,s,a,c,l,u,d){"use strict";function h(e){return s.isMacintosh?i.readdirSync(e).map(e=>o.normalizeNFC(e)):i.readdirSync(e)
}function f(e,t){return s.isMacintosh?i.readdir(e,(e,i)=>e?t(e,[]):t(null,i.map(e=>o.normalizeNFC(e)))):i.readdir(e,t)}function p(e,t,r,o){const s=o||Object.create(null);i.stat(e,(o,a)=>{if(o)return r(o);if(!a.isDirectory())return function(e,t,n,r){const o=i.createReadStream(e),s=i.createWriteStream(t,{mode:n});let a=!1;const c=e=>{a||(a=!0,e?r(e):i.chmod(t,n,r))};o.once("error",e=>c(e)),s.once("error",e=>c(e)),s.once("close",()=>c()),o.pipe(s)}(e,t,511&a.mode,r);if(s[e])return r(null);s[e]=!0;const c=function(){f(e,(i,o)=>{_(o,(i,r)=>{p(n.join(e,i),n.join(t,i),e=>r(e,[]),s)},r)})};g(t,511&a.mode).then(c,c)})}function g(e,t,o){const s=()=>r.nfcall(i.mkdir,e,t).then(void 0,t=>"ENOENT"===t.code?Promise.reject(t):r.nfcall(i.stat,e).then(t=>t.isDirectory()?null:Promise.reject(new Error(`'${e}' exists and is not a directory.`)),e=>Promise.reject(t)))
;return e===n.dirname(e)?Promise.resolve(!0):s().then(void 0,i=>o&&o.isCancellationRequested?Promise.resolve(!1):"ENOENT"===i.code?g(n.dirname(e),t).then(s):Promise.reject(i))}function m(e,t){if(e===n.win32.sep||e===n.posix.sep)return t(new Error("Will not delete root!"));i.exists(e,r=>{r?i.lstat(e,(r,o)=>{if(r||!o)t(r);else if(!o.isDirectory()||o.isSymbolicLink()){const n=o.mode;128&n?i.unlink(e,t):i.chmod(e,128|n,n=>{n?t(n):i.unlink(e,t)})}else f(e,(r,o)=>{if(r||!o)t(r);else if(0===o.length)i.rmdir(e,t);else{let r=null,s=o.length;o.forEach(o=>{m(n.join(e,o),n=>{s--,n&&(r=r||n),0===s&&(r?t(r):i.rmdir(e,t))})})}})}):t(null)})}function v(e){if(e===n.win32.sep||e===n.posix.sep)throw new Error("Will not delete root!");try{const t=i.lstatSync(e);t.isDirectory()&&!t.isSymbolicLink()?(h(e).forEach(t=>v(n.join(e,t))),i.rmdirSync(e)):i.unlinkSync(e)}catch(e){if("ENOENT"===e.code)return;throw e}}function w(e,t,n,r){n=y(n),"string"==typeof t||Buffer.isBuffer(t)||t instanceof Uint8Array?function(e,t,n,r){
n.encoding&&(t=l.encode(t instanceof Uint8Array?Buffer.from(t):t,n.encoding.charset,{addBOM:n.encoding.addBOM}));if(!C)return i.writeFile(e,t,{mode:n.mode,flag:n.flag},r);i.open(e,"string"==typeof n.flag?n.flag:"r",n.mode,(e,n)=>{if(e)return r(e);i.writeFile(n,t,e=>{if(e)return i.close(n,()=>r(e));i.fdatasync(n,e=>(e&&(console.warn("[node.js fs] fdatasync is now disabled for this session because it failed: ",e),C=!1),i.close(n,e=>r(e))))})})}(e,t,n,r):function(e,t,n,r){let o=!1;const s=e=>{o||(o=!0,e?u?(a.once("close",()=>r(e)),a.destroy()):r(e):r())},a=i.createWriteStream(e,{mode:n.mode,flags:n.flag,autoClose:!1});let c,u;a.once("open",e=>{c=e,u=!0,n.encoding&&(t=t.pipe(l.encodeStream(n.encoding.charset,{addBOM:n.encoding.addBOM}))),t.pipe(a)}),t.once("error",e=>s(e)),a.once("error",e=>s(e)),a.once("finish",()=>{C&&u?i.fdatasync(c,e=>{e&&(console.warn("[node.js fs] fdatasync is now disabled for this session because it failed: ",e),C=!1),a.destroy()}):a.destroy()}),a.once("close",()=>s())}(e,t,n,r)}
function y(e){if(!e)return{mode:438,flag:"w"};const t={mode:e.mode,flag:e.flag,encoding:e.encoding};return"number"!=typeof t.mode&&(t.mode=438),"string"!=typeof t.flag&&(t.flag="w"),t}function S(e){const t=n.dirname(e);if(e===t)return e;const i=(n.basename(e)||e).toLowerCase();try{const e=h(t).filter(e=>e.toLowerCase()===i);if(1===e.length){const i=S(t);if(i)return n.join(i,e[0])}else if(e.length>1){const r=e.indexOf(i);if(r>=0){const i=S(t);if(i)return n.join(i,e[r])}}}catch(e){}return null}function b(e){return a.rtrim(n.normalize(e),n.sep)}Object.defineProperty(t,"__esModule",{value:!0});const _=u.loop;t.readdirSync=h,t.readdir=f,t.statLink=function(e,t){i.lstat(e,(n,r)=>{n||r.isSymbolicLink()?i.stat(e,(e,i)=>{if(e)return t(e,null);t(null,{stat:i,isSymbolicLink:r&&r.isSymbolicLink()})}):t(null,{stat:r,isSymbolicLink:!1})})},t.copy=p,t.mkdirp=g,t.del=function(e,t,r,o){i.exists(e,s=>{if(!s)return r(null);i.stat(e,(s,l)=>{if(s||!l)return r(s)
;if("."===e[e.length-1]||a.endsWith(e,"./")||a.endsWith(e,".\\"))return m(e,r);const u=n.join(t,c.generateUuid());i.rename(e,u,t=>{if(t)return m(e,r);r(null),m(u,e=>{o&&o(e)})})})})},t.delSync=v,t.mv=function(e,t,n){function r(e){if(e)return n(e);i.lstat(t,(e,r)=>e?n(e):r.isDirectory()||r.isSymbolicLink()?n(null):void i.open(t,"a",null,(e,t)=>{if(e)return n(e);i.futimes(t,r.atime,new Date,e=>{if(e)return n(e);i.close(t,n)})}))}if(e===t)return n(null);i.rename(e,t,i=>i?i&&e.toLowerCase()!==t.toLowerCase()&&"EXDEV"===i.code||a.endsWith(e,".")?p(e,t,t=>{if(t)return n(t);m(e,r)}):n(i):r(null))};let C=!0;t.writeFileAndFlush=w,t.writeFileAndFlushSync=function(e,t,n){if((n=y(n)).encoding&&(t=l.encode(t,n.encoding.charset,{addBOM:n.encoding.addBOM})),!C)return i.writeFileSync(e,t,{mode:n.mode,flag:n.flag});const r=i.openSync(e,"string"==typeof n.flag?n.flag:"r",n.mode);try{i.writeFileSync(r,t);try{i.fdatasyncSync(r)}catch(e){
console.warn("[node.js fs] fdatasyncSync is now disabled for this session because it failed: ",e),C=!1}}finally{i.closeSync(r)}},t.realcaseSync=S,t.realpathSync=function(e){try{return i.realpathSync(e)}catch(t){const n=b(e);return i.accessSync(n,i.constants.R_OK),n}},t.realpath=function(e,t){return i.realpath(e,(n,r)=>{if(!n)return t(null,r);const o=b(e);return i.access(o,i.constants.R_OK,e=>t(e,o))})},t.watch=function(e,t,n){try{const r=i.watch(e);return r.on("change",(e,i)=>{let n;i&&(n=i.toString(),s.isMacintosh&&(n=o.normalizeNFC(n))),t(e,n)}),r.on("error",(t,i)=>n(`Failed to watch ${e} for changes (${t}, ${i})`)),d.toDisposable(()=>{r.removeAllListeners(),r.close()})}catch(t){i.exists(e,i=>{i&&n(`Failed to watch ${e} for changes (${t.toString()})`)})}return d.Disposable.None},t.sanitizeFilePath=function(e,t){return s.isWindows&&a.endsWith(e,":")&&(e+=n.sep),n.isAbsolute(e)||(e=n.join(t,e)),e=n.normalize(e),s.isWindows?(e=a.rtrim(e,n.sep),a.endsWith(e,":")&&(e+=n.sep)):(e=a.rtrim(e,n.sep))||(e=n.sep),e}
}),define(t[105],i([0,1,15,5,16,6,3,39,33,2]),function(e,t,i,n,r,o,s,a,c,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class u{constructor(e,t={defaultConfig:Object.create(null),onError:e=>console.error(e)}){this._path=e,this.options=t,this.disposables=[],this.configName=n.basename(this._path),this._onDidUpdateConfiguration=new s.Emitter,this.disposables.push(this._onDidUpdateConfiguration),this.registerWatcher(),this.initAsync()}get path(){return this._path}get hasParseErrors(){return this.parseErrors&&this.parseErrors.length>0}get onDidUpdateConfiguration(){return this._onDidUpdateConfiguration.event}initAsync(){this.loadAsync(e=>{this.loaded||this.updateCache(e),this.options.initCallback&&this.options.initCallback(this.getConfig())})}updateCache(e){this.cache=e,this.loaded=!0}loadSync(){try{return this.parse(i.readFileSync(this._path).toString())}catch(e){return this.options.defaultConfig}}loadAsync(e){i.readFile(this._path,(t,i)=>e(t?this.options.defaultConfig:this.parse(i.toString())))
}parse(e){let t;try{return this.parseErrors=[],(t=this.options.parse?this.options.parse(e,this.parseErrors):a.parse(e,this.parseErrors))||this.options.defaultConfig}catch(e){return this.options.defaultConfig}}registerWatcher(){const e=n.dirname(this._path);this.watch(e,!0),i.lstat(this._path,(e,t)=>{e||t.isDirectory()||t.isSymbolicLink()&&i.readlink(this._path,(e,t)=>{e||this.watch(t,!1)})})}watch(e,t){this.disposed||this.disposables.push(c.watch(e,(e,i)=>this.onConfigFileChange(e,i,t),e=>this.options.onError(e)))}onConfigFileChange(e,t,i){i&&(l.isWindows&&t&&t!==this.configName&&(t=n.basename(t)),t!==this.configName)||(this.timeoutHandle&&(global.clearTimeout(this.timeoutHandle),this.timeoutHandle=null),this.timeoutHandle=global.setTimeout(()=>this.reload(),this.options.changeBufferDelay||0))}reload(e){this.loadAsync(t=>{if(r.equals(t,this.cache)||(this.updateCache(t),this._onDidUpdateConfiguration.fire({config:this.cache})),e)return e(t)})}getConfig(){return this.ensureLoaded(),this.cache}ensureLoaded(){
this.loaded||this.updateCache(this.loadSync())}dispose(){this.disposed=!0,this.disposables=o.dispose(this.disposables)}}t.ConfigWatcher=u}),define(t[22],i([0,1,33,5,12,15,23,2,3]),function(e,t,i,n,r,o,s,a,c){"use strict";function l(e){return r.nfcall(i.readdir,e)}function u(e){return h(e).then(t=>t.isDirectory()&&!t.isSymbolicLink()?l(e).then(t=>Promise.all(t.map(t=>u(n.join(e,t))))).then(()=>f(e)):p(e),e=>{if("ENOENT"!==e.code)return Promise.reject(e)})}function d(e){return r.nfcall(o.stat,e)}function h(e){return r.nfcall(o.lstat,e)}function f(e){return r.nfcall(o.rmdir,e)}function p(e){return r.nfcall(o.unlink,e)}function g(e,t,n){return function(e){let t=w[e];if(!t){t=new r.Queue,w[e]=t;c.Event.once(t.onFinished)(()=>{delete w[e],t.dispose()})}return t}(function(e){let t=e;(a.isWindows||a.isMacintosh)&&(t=t.toLowerCase());return t}(e)).queue(()=>r.nfcall(i.writeFileAndFlush,e,t,n))}function m(e){return d(e).then(e=>e.isDirectory(),()=>!1)}function v(e,t=(y||(y=s.tmpdir()),y)){return r.nfcall(i.del,e,t)}
Object.defineProperty(t,"__esModule",{value:!0}),t.readdir=l,t.exists=function(e){return new Promise(t=>o.exists(e,t))},t.chmod=function(e,t){return r.nfcall(o.chmod,e,t)},t.mkdirp=i.mkdirp,t.rimraf=u,t.realpath=function(e){return r.nfcall(i.realpath,e)},t.stat=d,t.statLink=function(e){return r.nfcall(i.statLink,e)},t.lstat=h,t.move=function(e,t){return r.nfcall(i.mv,e,t)},t.rename=function(e,t){return r.nfcall(o.rename,e,t)},t.renameIgnoreError=function(e,t){return new Promise(i=>{o.rename(e,t,()=>i())})},t.rmdir=f,t.unlink=p,t.symlink=function(e,t,i){return r.nfcall(o.symlink,e,t,i)},t.readlink=function(e){return r.nfcall(o.readlink,e)},t.truncate=function(e,t){return r.nfcall(o.truncate,e,t)},t.readFile=function(e,t){return r.nfcall(o.readFile,e,t)};const w=Object.create(null);t.writeFile=g,t.readDirsInDir=function(e){return l(e).then(t=>Promise.all(t.map(t=>m(n.join(e,t)))).then(e=>t.filter((t,i)=>e[i])))},t.dirExists=m,t.fileExists=function(e){return d(e).then(e=>e.isFile(),()=>!1)};let y=null;t.del=v,
t.whenDeleted=function(e){return new Promise(t=>{let i=!1;const n=setInterval(()=>{i||(i=!0,o.exists(e,e=>{i=!1,e||(clearInterval(n),t(void 0))}))},1e3)})},t.copy=function(e,t){return r.nfcall(i.copy,e,t)}}),define(t[116],i([0,1,6,3,12,17,27,5,22,21]),function(e,t,i,n,r,o,s,a,c,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u;!function(e){e[e.STORAGE_DOES_NOT_EXIST=0]="STORAGE_DOES_NOT_EXIST"}(u=t.StorageHint||(t.StorageHint={}));var d;!function(e){e[e.None=0]="None",e[e.Initialized=1]="Initialized",e[e.Closed=2]="Closed"}(d||(d={}));class h extends i.Disposable{constructor(e,t=Object.create(null)){super(),this.database=e,this.options=t,this._onDidChangeStorage=this._register(new n.Emitter),this.state=d.None,this.cache=new Map,this.pendingDeletes=new Set,this.pendingInserts=new Map,this.flushDelayer=this._register(new r.ThrottledDelayer(h.DEFAULT_FLUSH_DELAY)),this.registerListeners()}get onDidChangeStorage(){return this._onDidChangeStorage.event}registerListeners(){
this._register(this.database.onDidChangeItemsExternal(e=>this.onDidChangeItemsExternal(e)))}onDidChangeItemsExternal(e){e.items.forEach((e,t)=>this.accept(t,e))}accept(e,t){if(this.state===d.Closed)return;let i=!1;if(o.isUndefinedOrNull(t))i=this.cache.delete(e);else{this.cache.get(e)!==t&&(this.cache.set(e,t),i=!0)}i&&this._onDidChangeStorage.fire(e)}get items(){return this.cache}get size(){return this.cache.size}init(){return this.state!==d.None?Promise.resolve():(this.state=d.Initialized,this.options.hint===u.STORAGE_DOES_NOT_EXIST?Promise.resolve():this.database.getItems().then(e=>{this.cache=e}))}get(e,t){const i=this.cache.get(e);return o.isUndefinedOrNull(i)?t:i}getBoolean(e,t){const i=this.get(e);return o.isUndefinedOrNull(i)?t:"true"===i}getNumber(e,t){const i=this.get(e);return o.isUndefinedOrNull(i)?t:parseInt(i,10)}set(e,t){if(this.state===d.Closed)return Promise.resolve();if(o.isUndefinedOrNull(t))return this.delete(e);const i=String(t)
;return this.cache.get(e)===i?Promise.resolve():(this.cache.set(e,i),this.pendingInserts.set(e,i),this.pendingDeletes.delete(e),this._onDidChangeStorage.fire(e),this.flushDelayer.trigger(()=>this.flushPending()))}delete(e){if(this.state===d.Closed)return Promise.resolve();return this.cache.delete(e)?(this.pendingDeletes.has(e)||this.pendingDeletes.add(e),this.pendingInserts.delete(e),this._onDidChangeStorage.fire(e),this.flushDelayer.trigger(()=>this.flushPending())):Promise.resolve()}close(){if(this.state===d.Closed)return Promise.resolve();this.state=d.Closed;const e=()=>this.database.close(()=>this.cache);return this.flushDelayer.trigger(()=>this.flushPending(),0).then(e,e)}flushPending(){if(0===this.pendingInserts.size&&0===this.pendingDeletes.size)return Promise.resolve();const e={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(e)}checkIntegrity(e){return this.database.checkIntegrity(e)}}
h.DEFAULT_FLUSH_DELAY=100,t.Storage=h;class f{constructor(e,t=Object.create(null)){this.path=e,this.name=a.basename(e),this.logger=new p(t.logging),this.whenConnected=this.connect(e)}get onDidChangeItemsExternal(){return n.Event.None}getItems(){return this.whenConnected.then(e=>{const t=new Map;return this.all(e,"SELECT * FROM ItemTable").then(e=>(e.forEach(e=>t.set(e.key,e.value)),this.logger.isTracing&&this.logger.trace(`[storage ${this.name}] getItems(): ${t.size} rows`),t))})}updateItems(e){return this.whenConnected.then(t=>this.doUpdateItems(t,e))}doUpdateItems(e,t){let i=0;return t.insert&&(i+=t.insert.size),t.delete&&(i+=t.delete.size),0===i?Promise.resolve():(this.logger.isTracing&&this.logger.trace(`[storage ${this.name}] updateItems(): insert(${t.insert?s.mapToString(t.insert):"0"}), delete(${t.delete?s.setToString(t.delete):"0"})`),this.transaction(e,()=>{if(t.insert&&t.insert.size>0){const i=[];i.push([]);let n=0;t.insert.forEach((e,t)=>{let r=i[n];r.length>f.MAX_HOST_PARAMETERS&&(n++,r=[],
i.push(r)),r.push(t,e)}),i.forEach(i=>{this.prepare(e,`INSERT INTO ItemTable VALUES ${l.fill(i.length/2,"(?,?)").join(",")}`,e=>e.run(i),()=>{const e=[];let i=0;return t.insert.forEach((t,n)=>{e.push(n),i+=t.length}),`Keys: ${e.join(", ")} Length: ${i}`})})}if(t.delete&&t.delete.size){const i=[];i.push([]);let n=0;t.delete.forEach(e=>{let t=i[n];t.length>f.MAX_HOST_PARAMETERS&&(n++,t=[],i.push(t)),t.push(e)}),i.forEach(i=>{this.prepare(e,`DELETE FROM ItemTable WHERE key IN (${l.fill(i.length,"?").join(",")})`,e=>e.run(i),()=>{const e=[];return t.delete.forEach(t=>{e.push(t)}),`Keys: ${e.join(", ")}`})})}}))}close(e){return this.logger.trace(`[storage ${this.name}] close()`),this.whenConnected.then(t=>this.doClose(t,e))}doClose(e,t){return new Promise((i,n)=>{e.db.close(r=>(r&&this.handleSQLiteError(e,r,`[storage ${this.name}] close(): ${r}`),this.path===f.IN_MEMORY_PATH?i():e.isErroneous||e.isInMemory?"function"==typeof t?c.unlink(this.path).then(()=>this.doConnect(this.path).then(e=>{
const i=()=>this.doClose(e,void 0);return this.doUpdateItems(e,{insert:t()}).then(()=>i(),e=>(i(),Promise.reject(e)))})).then(i,n):n(r||new Error("Database has errors or is in-memory without recovery option")):this.backup().then(i,e=>(this.logger.error(`[storage ${this.name}] backup(): ${e}`),i()))))})}backup(){const e=this.toBackupPath(this.path);return c.copy(this.path,e)}toBackupPath(e){return`${e}.backup`}checkIntegrity(e){return this.logger.trace(`[storage ${this.name}] checkIntegrity(full: ${e})`),this.whenConnected.then(t=>this.get(t,e?"PRAGMA integrity_check":"PRAGMA quick_check").then(i=>{const n=e?i.integrity_check:i.quick_check;return t.isErroneous?`${n} (last error: ${t.lastError})`:t.isInMemory?`${n} (in-memory!)`:n}))}connect(e,t=!0){return this.logger.trace(`[storage ${this.name}] open(${e}, retryOnBusy: ${t})`),this.doConnect(e).then(void 0,i=>(this.logger.error(`[storage ${this.name}] open(): Unable to open DB due to ${i}`),
"SQLITE_BUSY"===i.code&&t?r.timeout(f.BUSY_OPEN_TIMEOUT).then(()=>this.connect(e,!1)):c.unlink(e).then(()=>c.renameIgnoreError(this.toBackupPath(e),e)).then(()=>this.doConnect(e)).then(void 0,e=>(this.logger.error(`[storage ${this.name}] open(): Unable to use backup due to ${e}`),this.doConnect(f.IN_MEMORY_PATH)))))}handleSQLiteError(e,t,i){e.isErroneous=!0,e.lastError=i,this.logger.error(i)}doConnect(t){return new Promise((i,n)=>{new Promise((t,i)=>{e(["vscode-sqlite3"],t,i)}).then(e=>{const r={db:new(this.logger.isTracing?e.verbose().Database:e.Database)(t,e=>e?r.db?r.db.close(()=>n(e)):n(e):this.exec(r,["PRAGMA user_version = 1;","CREATE TABLE IF NOT EXISTS ItemTable (key TEXT UNIQUE ON CONFLICT REPLACE, value BLOB)"].join("")).then(()=>i(r),e=>r.db.close(()=>n(e)))),isInMemory:t===f.IN_MEMORY_PATH};r.db.on("error",e=>this.handleSQLiteError(r,e,`[storage ${this.name}] Error (event): ${e}`)),this.logger.isTracing&&r.db.on("trace",e=>this.logger.trace(`[storage ${this.name}] Trace (event): ${e}`))},n)})}
exec(e,t){return new Promise((i,n)=>{e.db.exec(t,t=>t?(this.handleSQLiteError(e,t,`[storage ${this.name}] exec(): ${t}`),n(t)):i())})}get(e,t){return new Promise((i,n)=>{e.db.get(t,(t,r)=>t?(this.handleSQLiteError(e,t,`[storage ${this.name}] get(): ${t}`),n(t)):i(r))})}all(e,t){return new Promise((i,n)=>{e.db.all(t,(t,r)=>t?(this.handleSQLiteError(e,t,`[storage ${this.name}] all(): ${t}`),n(t)):i(r))})}transaction(e,t){return new Promise((i,n)=>{e.db.serialize(()=>{e.db.run("BEGIN TRANSACTION"),t(),e.db.run("END TRANSACTION",t=>t?(this.handleSQLiteError(e,t,`[storage ${this.name}] transaction(): ${t}`),n(t)):i())})})}prepare(e,t,i,n){const r=e.db.prepare(t),o=i=>{this.handleSQLiteError(e,i,`[storage ${this.name}] prepare(): ${i} (${t}). Details: ${n()}`)};r.on("error",o),i(r),r.finalize(e=>{e&&o(e),r.removeListener("error",o)})}}f.IN_MEMORY_PATH=":memory:",f.BUSY_OPEN_TIMEOUT=2e3,f.MAX_HOST_PARAMETERS=256,t.SQLiteStorageDatabase=f;class p{constructor(e){
e&&"function"==typeof e.logTrace&&(this.logTrace=e.logTrace),e&&"function"==typeof e.logError&&(this.logError=e.logError)}get isTracing(){return!!this.logTrace}trace(e){this.logTrace&&this.logTrace(e)}error(e){this.logError&&this.logError(e)}}class g{constructor(){this.onDidChangeItemsExternal=n.Event.None,this.items=new Map}getItems(){return Promise.resolve(this.items)}updateItems(e){return e.insert&&e.insert.forEach((e,t)=>this.items.set(t,e)),e.delete&&e.delete.forEach(e=>this.items.delete(e)),Promise.resolve()}close(){return Promise.resolve()}checkIntegrity(e){return Promise.resolve("ok")}}t.InMemoryStorageDatabase=g}),define(t[118],i([0,1]),function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CONTEXT_MENU_CHANNEL="vscode:contextmenu",t.CONTEXT_MENU_CLOSE_CHANNEL="vscode:onCloseContextMenu"}),define(t[120],i([0,1,11,118]),function(e,t,i,n){"use strict";function r(e,t,n){const o=new i.Menu;return n.forEach(n=>{let s;s="separator"===n.type?new i.MenuItem({type:n.type
}):Array.isArray(n.submenu)?new i.MenuItem({submenu:r(e,t,n.submenu),label:n.label}):new i.MenuItem({label:n.label,type:n.type,accelerator:n.accelerator,checked:n.checked,enabled:n.enabled,visible:n.visible,click:(i,r,o)=>e.sender.send(t,n.id,o)}),o.append(s)}),o}Object.defineProperty(t,"__esModule",{value:!0}),t.registerContextMenuListener=function(){i.ipcMain.on(n.CONTEXT_MENU_CHANNEL,(e,t,o,s,a)=>{r(e,s,o).popup({window:i.BrowserWindow.fromWebContents(e.sender),x:a?a.x:void 0,y:a?a.y:void 0,positioningItem:a?a.positioningItem:void 0,callback:()=>{e.sender.send(n.CONTEXT_MENU_CLOSE_CHANNEL,t)}})})}}),define(t[46],i([0,1,3,6,12,34,18,48]),function(e,t,i,r,o,s,a,c){"use strict";function l(e){const t=c.VSBuffer.alloc(4);return t.writeUint32BE(e,0),t}function u(e){return e.read(4).readUint32BE(0)}function d(e){const t=c.VSBuffer.alloc(1);return t.writeUint8(e,0),t}function h(e,t){if(void 0===t)e.write(y.Undefined);else if("string"==typeof t){const i=c.VSBuffer.fromString(t);e.write(y.String),
e.write(l(i.byteLength)),e.write(i)}else if(S&&Buffer.isBuffer(t)){const i=c.VSBuffer.wrap(t);e.write(y.Buffer),e.write(l(i.byteLength)),e.write(i)}else if(t instanceof c.VSBuffer)e.write(y.VSBuffer),e.write(l(t.byteLength)),e.write(t);else if(Array.isArray(t)){e.write(y.Array),e.write(l(t.length));for(const i of t)h(e,i)}else{const i=c.VSBuffer.fromString(JSON.stringify(t));e.write(y.Object),e.write(l(i.byteLength)),e.write(i)}}function f(e){switch(e.read(1).readUint8(0)){case w.Undefined:return;case w.String:return e.read(u(e)).toString();case w.Buffer:return e.read(u(e)).buffer;case w.VSBuffer:return e.read(u(e));case w.Array:{const t=u(e),i=[];for(let n=0;n<t;n++)i.push(f(e));return i}case w.Object:return JSON.parse(e.read(u(e)).toString())}}function p(e){return{call:(t,i,n)=>e.then(e=>e.call(t,i,n)),listen(t,n){const r=new i.Relay;return e.then(e=>r.input=e.listen(t,n)),r.event}}}Object.defineProperty(t,"__esModule",{value:!0});!function(e){e[e.Promise=100]="Promise",
e[e.PromiseCancel=101]="PromiseCancel",e[e.EventListen=102]="EventListen",e[e.EventDispose=103]="EventDispose"}(t.RequestType||(t.RequestType={}));!function(e){e[e.Initialize=200]="Initialize",e[e.PromiseSuccess=201]="PromiseSuccess",e[e.PromiseError=202]="PromiseError",e[e.PromiseErrorObj=203]="PromiseErrorObj",e[e.EventFire=204]="EventFire"}(t.ResponseType||(t.ResponseType={}));var g;!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Idle=1]="Idle"}(g||(g={}));class m{constructor(e){this.buffer=e,this.pos=0}read(e){const t=this.buffer.slice(this.pos,this.pos+e);return this.pos+=t.byteLength,t}}class v{constructor(){this.buffers=[]}get buffer(){return c.VSBuffer.concat(this.buffers)}write(e){this.buffers.push(e)}}var w;!function(e){e[e.Undefined=0]="Undefined",e[e.String=1]="String",e[e.Buffer=2]="Buffer",e[e.VSBuffer=3]="VSBuffer",e[e.Array=4]="Array",e[e.Object=5]="Object"}(w||(w={}));const y={Undefined:d(w.Undefined),String:d(w.String),Buffer:d(w.Buffer),VSBuffer:d(w.VSBuffer),Array:d(w.Array),
Object:d(w.Object)},S="undefined"!=typeof Buffer;class b{constructor(e,t){this.protocol=e,this.ctx=t,this.channels=new Map,this.activeRequests=new Map,this.protocolListener=this.protocol.onMessage(e=>this.onRawMessage(e)),this.sendResponse({type:200})}registerChannel(e,t){this.channels.set(e,t)}sendResponse(e){switch(e.type){case 200:return this.send([e.type]);case 201:case 202:case 204:case 203:return this.send([e.type,e.id],e.data)}}send(e,t){const i=new v;h(i,e),h(i,t),this.sendBuffer(i.buffer)}sendBuffer(e){try{this.protocol.send(e)}catch(e){}}onRawMessage(e){const t=new m(e),i=f(t),n=f(t),r=i[0];switch(r){case 100:return this.onPromise({type:r,id:i[1],channelName:i[2],name:i[3],arg:n});case 102:return this.onEventListen({type:r,id:i[1],channelName:i[2],name:i[3],arg:n});case 101:case 103:return this.disposeActiveRequest({type:r,id:i[1]})}}onPromise(e){const t=this.channels.get(e.channelName);if(!t)throw new Error("Unknown channel");const i=new s.CancellationTokenSource;let n;try{
n=t.call(this.ctx,e.name,e.arg,i.token)}catch(e){n=Promise.reject(e)}const o=e.id;n.then(t=>{this.sendResponse({id:o,data:t,type:201}),this.activeRequests.delete(e.id)},t=>{t instanceof Error?this.sendResponse({id:o,data:{message:t.message,name:t.name,stack:t.stack?t.stack.split?t.stack.split("\n"):t.stack:void 0},type:202}):this.sendResponse({id:o,data:t,type:203}),this.activeRequests.delete(e.id)});const a=r.toDisposable(()=>i.cancel());this.activeRequests.set(e.id,a)}onEventListen(e){const t=this.channels.get(e.channelName);if(!t)throw new Error("Unknown channel");const i=e.id,n=t.listen(this.ctx,e.name,e.arg)(e=>this.sendResponse({id:i,data:e,type:204}));this.activeRequests.set(e.id,n)}disposeActiveRequest(e){const t=this.activeRequests.get(e.id);t&&(t.dispose(),this.activeRequests.delete(e.id))}dispose(){this.protocolListener&&(this.protocolListener.dispose(),this.protocolListener=null),this.activeRequests.forEach(e=>e.dispose()),this.activeRequests.clear()}}t.ChannelServer=b;class _{constructor(e){
this.protocol=e,this.state=g.Uninitialized,this.activeRequests=new Set,this.handlers=new Map,this.lastRequestId=0,this._onDidInitialize=new i.Emitter,this.onDidInitialize=this._onDidInitialize.event,this.protocolListener=this.protocol.onMessage(e=>this.onBuffer(e))}getChannel(e){const t=this;return{call:(i,n,r)=>t.requestPromise(e,i,n,r),listen:(i,n)=>t.requestEvent(e,i,n)}}requestPromise(e,t,i,n=s.CancellationToken.None){const c=this.lastRequestId++,l={id:c,type:100,channelName:e,name:t,arg:i};if(n.isCancellationRequested)return Promise.reject(a.canceled());let u;return new Promise((e,t)=>{if(n.isCancellationRequested)return t(a.canceled());let i=o.createCancelablePromise(e=>this.whenInitialized());i.then(()=>{i=null;this.handlers.set(c,i=>{switch(i.type){case 201:this.handlers.delete(c),e(i.data);break;case 202:this.handlers.delete(c);const n=new Error(i.data.message);n.stack=i.data.stack,n.name=i.data.name,t(n);break;case 203:this.handlers.delete(c),t(i.data)}}),this.sendRequest(l)});const s=()=>{
i?(i.cancel(),i=null):this.sendRequest({id:c,type:101}),t(a.canceled())},d=n.onCancellationRequested(s);u=r.combinedDisposable([r.toDisposable(s),d]),this.activeRequests.add(u)}).finally(()=>this.activeRequests.delete(u))}requestEvent(e,t,n){const r=this.lastRequestId++,s={id:r,type:102,channelName:e,name:t,arg:n};let a=null;const c=new i.Emitter({onFirstListenerAdd:()=>{(a=o.createCancelablePromise(e=>this.whenInitialized())).then(()=>{a=null,this.activeRequests.add(c),this.sendRequest(s)})},onLastListenerRemove:()=>{a?(a.cancel(),a=null):(this.activeRequests.delete(c),this.sendRequest({id:r,type:103}))}});return this.handlers.set(r,e=>c.fire(e.data)),c.event}sendRequest(e){switch(e.type){case 100:case 102:return this.send([e.type,e.id,e.channelName,e.name],e.arg);case 101:case 103:return this.send([e.type,e.id])}}send(e,t){const i=new v;h(i,e),h(i,t),this.sendBuffer(i.buffer)}sendBuffer(e){try{this.protocol.send(e)}catch(e){}}onBuffer(e){const t=new m(e),i=f(t),n=f(t);switch(i[0]){case 200:
return this.onResponse({type:i[0]});case 201:case 202:case 204:case 203:return this.onResponse({type:i[0],id:i[1],data:n})}}onResponse(e){if(200===e.type)return this.state=g.Idle,void this._onDidInitialize.fire();const t=this.handlers.get(e.id);t&&t(e)}whenInitialized(){return this.state===g.Idle?Promise.resolve():i.Event.toPromise(this.onDidInitialize)}dispose(){this.protocolListener&&(this.protocolListener.dispose(),this.protocolListener=null),this.activeRequests.forEach(e=>e.dispose()),this.activeRequests.clear()}}t.ChannelClient=_;class C{constructor(e){this.channels=new Map,this._connections=new Set,this._onDidChangeConnections=new i.Emitter,this.onDidChangeConnections=this._onDidChangeConnections.event,e(({protocol:e,onDidClientDisconnect:t})=>{i.Event.once(e.onMessage)(i=>{const n=f(new m(i)),r=new b(e,n),o=new _(e);this.channels.forEach((e,t)=>r.registerChannel(t,e));const s={channelClient:o,ctx:n};this._connections.add(s),this._onDidChangeConnections.fire(s),t(()=>{r.dispose(),o.dispose(),
this._connections.delete(s)})})})}get connections(){const e=[];return this._connections.forEach(t=>e.push(t)),e}getChannel(e,t){const i=this;return{call:(n,r,o)=>p(t.routeCall(i,n,r).then(t=>t.channelClient.getChannel(e))).call(n,r,o),listen:(n,r)=>p(t.routeEvent(i,n,r).then(t=>t.channelClient.getChannel(e))).listen(n,r)}}registerChannel(e,t){this.channels.set(e,t)}dispose(){this.channels.clear(),this._connections.clear(),this._onDidChangeConnections.dispose()}}t.IPCServer=C;class E{constructor(e,t){const i=new v;h(i,t),e.send(i.buffer),this.channelClient=new _(e),this.channelServer=new b(e,t)}getChannel(e){return this.channelClient.getChannel(e)}registerChannel(e,t){this.channelServer.registerChannel(e,t)}dispose(){this.channelClient.dispose(),this.channelServer.dispose()}}t.IPCClient=E,t.getDelayedChannel=p,t.getNextTickChannel=function(e){let t=!1;return{call:(i,n,r)=>t?e.call(i,n,r):o.timeout(0).then(()=>t=!0).then(()=>e.call(i,n,r)),listen(n,r){if(t)return e.listen(n,r);const s=new i.Relay
;return o.timeout(0).then(()=>t=!0).then(()=>s.input=e.listen(n,r)),s.event}}};class k{constructor(e){this.fn=e}routeCall(e){return this.route(e)}routeEvent(e){return this.route(e)}route(e){return n(this,void 0,void 0,function*(){for(const t of e.connections)if(yield Promise.resolve(this.fn(t.ctx)))return Promise.resolve(t);return yield i.Event.toPromise(e.onDidChangeConnections),yield this.route(e)})}}t.StaticRouter=k}),define(t[65],i([0,1,3,46,6,48,2]),function(e,t,i,n,r,o,s){"use strict";function a(){return l||(l=o.VSBuffer.alloc(0)),l}function c(e){let t,n=!1,r=!1,o=[];const a=()=>{if(!r){for(r=!0;n&&o.length>0;)t.fire(o.shift());r=!1}};return e(e=>{o.push(e),a()}),(t=new i.Emitter({onFirstListenerAdd:()=>{n=!0,"undefined"!=typeof process?process.nextTick(a):s.setImmediate(a)},onLastListenerRemove:()=>{n=!1}})).event}Object.defineProperty(t,"__esModule",{value:!0});let l=null;class u{get byteLength(){return this._totalLength}constructor(){this._chunks=[],this._totalLength=0}acceptChunk(e){
this._chunks.push(e),this._totalLength+=e.byteLength}read(e){if(0===e)return a();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){const t=this._chunks.shift();return this._totalLength-=e,t}if(this._chunks[0].byteLength>e){const t=this._chunks[0].slice(0,e);return this._chunks[0]=this._chunks[0].slice(e),this._totalLength-=e,t}let t=o.VSBuffer.alloc(e),i=0;for(;e>0;){const n=this._chunks[0];if(n.byteLength>e){this._chunks[0]=n.slice(e);const r=n.slice(0,e);t.set(r,i),i+=e,this._totalLength-=e,e-=e}else this._chunks.shift(),t.set(n,i),i+=n.byteLength,this._totalLength-=n.byteLength,e-=n.byteLength}return t}}var d;!function(e){e[e.None=0]="None",e[e.Regular=1]="Regular",e[e.Control=2]="Control",e[e.Ack=3]="Ack",e[e.KeepAlive=4]="KeepAlive"}(d||(d={}));!function(e){e[e.HeaderLength=13]="HeaderLength",e[e.AcknowledgeTime=2e3]="AcknowledgeTime",e[e.AcknowledgeTimeoutTime=1e4]="AcknowledgeTimeoutTime",e[e.KeepAliveTime=3e4]="KeepAliveTime",
e[e.KeepAliveTimeoutTime=6e4]="KeepAliveTimeoutTime",e[e.ReconnectionGraceTime=36e5]="ReconnectionGraceTime"}(t.ProtocolConstants||(t.ProtocolConstants={}));class h{constructor(e,t,i,n){this.type=e,this.id=t,this.ack=i,this.data=n,this.writtenTime=0}get size(){return this.data.byteLength}}class f extends r.Disposable{constructor(e){super(),this._onMessage=new i.Emitter,this.onMessage=this._onMessage.event,this._state={readHead:!0,readLen:13,messageType:0,id:0,ack:0},this._socket=e,this._isDisposed=!1,this._incomingData=new u,this._register(this._socket.onData(e=>this.acceptChunk(e))),this.lastReadTime=Date.now()}acceptChunk(e){if(e&&0!==e.byteLength)for(this.lastReadTime=Date.now(),this._incomingData.acceptChunk(e);this._incomingData.byteLength>=this._state.readLen;){const e=this._incomingData.read(this._state.readLen);if(this._state.readHead)this._state.readHead=!1,this._state.readLen=e.readUint32BE(9),this._state.messageType=e.readUint8(0),this._state.id=e.readUint32BE(1),
this._state.ack=e.readUint32BE(5);else{const t=this._state.messageType,i=this._state.id,n=this._state.ack;if(this._state.readHead=!0,this._state.readLen=13,this._state.messageType=0,this._state.id=0,this._state.ack=0,this._onMessage.fire(new h(t,i,n,e)),this._isDisposed)break}}}readEntireBuffer(){return this._incomingData.read(this._incomingData.byteLength)}dispose(){this._isDisposed=!0,super.dispose()}}class p{constructor(e){this._isDisposed=!1,this._socket=e,this._data=[],this._totalLength=0,this.lastWriteTime=0}dispose(){this.flush(),this._isDisposed=!0}flush(){this._writeNow()}write(e){if(this._isDisposed)return console.warn("Cannot write message in a disposed ProtocolWriter"),void console.warn(e);e.writtenTime=Date.now(),this.lastWriteTime=Date.now();const t=o.VSBuffer.alloc(13);t.writeUint8(e.type,0),t.writeUint32BE(e.id,1),t.writeUint32BE(e.ack,5),t.writeUint32BE(e.data.byteLength,9),this._writeSoon(t,e.data)}_bufferAdd(e,t){const i=0===this._totalLength;return this._data.push(e,t),
this._totalLength+=e.byteLength+t.byteLength,i}_bufferTake(){const e=o.VSBuffer.concat(this._data,this._totalLength);return this._data.length=0,this._totalLength=0,e}_writeSoon(e,t){this._bufferAdd(e,t)&&s.setImmediate(()=>{this._writeNow()})}_writeNow(){0!==this._totalLength&&this._socket.write(this._bufferTake())}}class g extends r.Disposable{constructor(e){super(),this._onMessage=new i.Emitter,this.onMessage=this._onMessage.event,this._onClose=new i.Emitter,this.onClose=this._onClose.event,this._socket=e,this._socketWriter=this._register(new p(this._socket)),this._socketReader=this._register(new f(this._socket)),this._register(this._socketReader.onMessage(e=>{1===e.type&&this._onMessage.fire(e.data)})),this._register(this._socket.onClose(()=>this._onClose.fire()))}getSocket(){return this._socket}send(e){this._socketWriter.write(new h(1,0,0,e))}}t.Protocol=g;class m extends n.IPCClient{constructor(e,t){super(e,t),this.protocol=e}static fromSocket(e,t){return new m(new g(e),t)}get onClose(){
return this.protocol.onClose}dispose(){super.dispose();const e=this.protocol.getSocket();this.protocol.dispose(),e.end()}}t.Client=m;class v{constructor(e){this.data=e,this.next=null}}class w{constructor(){this._first=null,this._last=null}peek(){return this._first?this._first.data:null}toArray(){let e=[],t=0,i=this._first;for(;i;)e[t++]=i.data,i=i.next;return e}pop(){if(this._first)return this._first===this._last?(this._first=null,void(this._last=null)):void(this._first=this._first.next)}push(e){const t=new v(e);if(!this._first)return this._first=t,void(this._last=t);this._last.next=t,this._last=t}}class y{constructor(e,t=null){this._onControlMessage=new i.Emitter,this.onControlMessage=c(this._onControlMessage.event),this._onMessage=new i.Emitter,this.onMessage=c(this._onMessage.event),this._onClose=new i.Emitter,this.onClose=c(this._onClose.event),this._onSocketClose=new i.Emitter,this.onSocketClose=c(this._onSocketClose.event),this._onSocketTimeout=new i.Emitter,
this.onSocketTimeout=c(this._onSocketTimeout.event),this._isReconnecting=!1,this._outgoingUnackMsg=new w,this._outgoingMsgId=0,this._outgoingAckId=0,this._outgoingAckTimeout=null,this._incomingMsgId=0,this._incomingAckId=0,this._incomingMsgLastTime=0,this._incomingAckTimeout=null,this._outgoingKeepAliveTimeout=null,this._incomingKeepAliveTimeout=null,this._socketDisposables=[],this._socket=e,this._socketWriter=new p(this._socket),this._socketDisposables.push(this._socketWriter),this._socketReader=new f(this._socket),this._socketDisposables.push(this._socketReader),this._socketDisposables.push(this._socketReader.onMessage(e=>this._receiveMessage(e))),this._socketDisposables.push(this._socket.onClose(()=>this._onSocketClose.fire())),this._socketDisposables.push(this._socket.onEnd(()=>this._onClose.fire())),t&&this._socketReader.acceptChunk(t),this._sendKeepAliveCheck(),this._recvKeepAliveCheck()}get unacknowledgedCount(){return this._outgoingMsgId-this._outgoingAckId}dispose(){
this._outgoingAckTimeout&&(clearTimeout(this._outgoingAckTimeout),this._outgoingAckTimeout=null),this._incomingAckTimeout&&(clearTimeout(this._incomingAckTimeout),this._incomingAckTimeout=null),this._outgoingKeepAliveTimeout&&(clearTimeout(this._outgoingKeepAliveTimeout),this._outgoingKeepAliveTimeout=null),this._incomingKeepAliveTimeout&&(clearTimeout(this._incomingKeepAliveTimeout),this._incomingKeepAliveTimeout=null),this._socketDisposables=r.dispose(this._socketDisposables)}_sendKeepAliveCheck(){if(this._outgoingKeepAliveTimeout)return;const e=Date.now()-this._socketWriter.lastWriteTime;if(e>=3e4){const e=new h(4,0,0,a());return this._socketWriter.write(e),void this._sendKeepAliveCheck()}this._outgoingKeepAliveTimeout=setTimeout(()=>{this._outgoingKeepAliveTimeout=null,this._sendKeepAliveCheck()},3e4-e+5)}_recvKeepAliveCheck(){if(this._incomingKeepAliveTimeout)return;const e=Date.now()-this._socketReader.lastReadTime;e>=6e4?this._onSocketTimeout.fire(void 0):this._incomingKeepAliveTimeout=setTimeout(()=>{
this._incomingKeepAliveTimeout=null,this._recvKeepAliveCheck()},6e4-e+5)}getSocket(){return this._socket}beginAcceptReconnection(e,t){this._isReconnecting=!0,this._socketDisposables=r.dispose(this._socketDisposables),this._socket=e,this._socketWriter=new p(this._socket),this._socketDisposables.push(this._socketWriter),this._socketReader=new f(this._socket),this._socketDisposables.push(this._socketReader),this._socketDisposables.push(this._socketReader.onMessage(e=>this._receiveMessage(e))),this._socketDisposables.push(this._socket.onClose(()=>this._onSocketClose.fire())),this._socketDisposables.push(this._socket.onEnd(()=>this._onClose.fire())),this._socketReader.acceptChunk(t)}endAcceptReconnection(){this._isReconnecting=!1;const e=this._outgoingUnackMsg.toArray();for(let t=0,i=e.length;t<i;t++)this._socketWriter.write(e[t]);this._recvAckCheck(),this._sendKeepAliveCheck(),this._recvKeepAliveCheck()}_receiveMessage(e){if(e.ack>this._outgoingAckId)for(this._outgoingAckId=e.ack;;){
const t=this._outgoingUnackMsg.peek();if(!(t&&t.id<=e.ack))break;this._outgoingUnackMsg.pop()}1===e.type?e.id>this._incomingMsgId&&(e.id!==this._incomingMsgId+1&&console.error(`PROTOCOL CORRUPTION, LAST SAW MSG ${this._incomingMsgId} AND HAVE NOW RECEIVED MSG ${e.id}`),this._incomingMsgId=e.id,this._incomingMsgLastTime=Date.now(),this._sendAckCheck(),this._onMessage.fire(e.data)):2===e.type&&this._onControlMessage.fire(e.data)}readEntireBuffer(){return this._socketReader.readEntireBuffer()}flush(){this._socketWriter.flush()}send(e){const t=++this._outgoingMsgId;this._incomingAckId=this._incomingMsgId;const i=new h(1,t,this._incomingAckId,e);this._outgoingUnackMsg.push(i),this._isReconnecting||(this._socketWriter.write(i),this._recvAckCheck())}sendControl(e){const t=new h(2,0,0,e);this._socketWriter.write(t)}_sendAckCheck(){if(this._incomingMsgId<=this._incomingAckId)return;if(this._incomingAckTimeout)return;const e=Date.now()-this._incomingMsgLastTime
;e>=2e3?this._sendAck():this._incomingAckTimeout=setTimeout(()=>{this._incomingAckTimeout=null,this._sendAckCheck()},2e3-e+5)}_recvAckCheck(){if(this._outgoingMsgId<=this._outgoingAckId)return;if(this._outgoingAckTimeout)return;const e=this._outgoingUnackMsg.peek(),t=Date.now()-e.writtenTime;t>=1e4?this._onSocketTimeout.fire(void 0):this._outgoingAckTimeout=setTimeout(()=>{this._outgoingAckTimeout=null,this._recvAckCheck()},1e4-t+5)}_sendAck(){if(this._incomingMsgId<=this._incomingAckId)return;this._incomingAckId=this._incomingMsgId;const e=new h(3,0,this._incomingAckId,a());this._socketWriter.write(e)}}t.PersistentProtocol=y}),define(t[127],i([0,1]),function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(e,t){this.sender=e,this.onMessage=t}send(e){try{this.sender.send("ipc:message",e.buffer)}catch(e){}}dispose(){this.sender.send("ipc:disconnect",null)}}t.Protocol=i}),define(t[128],i([0,1,3,46,127,11,6,48]),function(e,t,i,n,r,o,s,a){"use strict";function c(e,t){
const n=i.Event.fromNodeEventEmitter(o.ipcMain,t,(e,t)=>({event:e,message:t})),r=i.Event.filter(n,({event:t})=>t.sender.id===e);return i.Event.map(r,({message:e})=>e?a.VSBuffer.wrap(e):e)}Object.defineProperty(t,"__esModule",{value:!0});class l extends n.IPCServer{constructor(){super(l.getOnDidClientConnect())}static getOnDidClientConnect(){const e=i.Event.fromNodeEventEmitter(o.ipcMain,"ipc:hello",({sender:e})=>e);return i.Event.map(e,e=>{const t=e.id,n=l.Clients.get(t);n&&n.dispose();const o=new i.Emitter;l.Clients.set(t,s.toDisposable(()=>o.fire()));const a=c(t,"ipc:message"),u=i.Event.any(i.Event.signal(c(t,"ipc:disconnect")),o.event);return{protocol:new r.Protocol(e,a),onDidClientDisconnect:u}})}}l.Clients=new Map,t.Server=l}),define(t[51],i([0,1,188,3,46,5,23,28,48,65]),function(e,t,i,n,r,o,s,a,c,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class u{constructor(e){this.socket=e}onData(e){const t=t=>e(c.VSBuffer.wrap(t));return this.socket.on("data",t),{
dispose:()=>this.socket.off("data",t)}}onClose(e){return this.socket.on("close",e),{dispose:()=>this.socket.off("close",e)}}onEnd(e){return this.socket.on("end",e),{dispose:()=>this.socket.off("end",e)}}write(e){this.socket.destroyed||this.socket.write(e.buffer)}end(){this.socket.end()}}t.NodeSocket=u,t.generateRandomPipeName=function(){const e=a.generateUuid();return"win32"===process.platform?`\\\\.\\pipe\\vscode-ipc-${e}-sock`:o.join(s.tmpdir(),`vscode-ipc-${e}.sock`)};class d extends r.IPCServer{static toClientConnectionEvent(e){const t=n.Event.fromNodeEventEmitter(e,"connection");return n.Event.map(t,e=>({protocol:new l.Protocol(new u(e)),onDidClientDisconnect:n.Event.once(n.Event.fromNodeEventEmitter(e,"close"))}))}constructor(e){super(d.toClientConnectionEvent(e)),this.server=e}dispose(){super.dispose(),this.server&&(this.server.close(),this.server=null)}}t.Server=d,t.serve=function(e){return new Promise((t,n)=>{const r=i.createServer();r.on("error",n),r.listen(e,()=>{r.removeListener("error",n),
t(new d(r))})})},t.connect=function(e,t){return new Promise((n,r)=>{const o=i.createConnection(e,()=>{o.removeListener("error",r),n(l.Client.fromSocket(new u(o),t))});o.once("error",r)})}}),define(t[135],i([0,1,191,3]),function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(){this._emitter=new n.Emitter,this._registered=!1}onDidChangeKeyboardLayout(e){return this._registered||(this._registered=!0,i.onDidChangeKeyboardLayout(()=>{this._emitter.fire()})),this._emitter.event(e)}}r.INSTANCE=new r,t.KeyboardLayoutMonitor=r}),define(t[57],i([0,1,2,11]),function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r="#FFFFFF",o="#1E1E1E",s="#000000",a="theme",c="themeBackground";t.storeBackgroundColor=function(e,t){e.setItem(a,t.baseTheme),e.setItem(c,t.background)},t.getBackgroundColor=function(e){if(i.isWindows&&n.systemPreferences.isInvertedColorScheme())return s;let t=e.getItem(c,null);if(!t){let c
;t="hc-black"===(c=i.isWindows&&n.systemPreferences.isInvertedColorScheme()?"hc-black":e.getItem(a,"vs-dark").split(" ")[0])?s:"vs"===c?r:o}return i.isMacintosh&&t.toUpperCase()===o&&(t="#171717"),t}}),define(t[137],i([0,1,8]),function(e,t,i){"use strict";function n(e){const t={uiState:e.uiState};return e.backupPath&&(t.backupPath=e.backupPath),e.remoteAuthority&&(t.remoteAuthority=e.remoteAuthority),e.folder?t.folderUri=i.URI.parse(e.folder):e.folderUri?t.folderUri=i.URI.revive(e.folderUri):e.folderPath&&(t.folderUri=i.URI.file(e.folderPath)),e.workspaceIdentifier?t.workspace={id:e.workspaceIdentifier.id,configPath:i.URI.parse(e.workspaceIdentifier.configURIPath)}:e.workspace&&(t.workspace={id:e.workspace.id,configPath:i.URI.file(e.workspace.configPath)}),t}function r(e){return{workspaceIdentifier:e.workspace&&{id:e.workspace.id,configURIPath:e.workspace.configPath.toString()},folder:e.folderUri&&e.folderUri.toString(),backupPath:e.backupPath,remoteAuthority:e.remoteAuthority,uiState:e.uiState}}
Object.defineProperty(t,"__esModule",{value:!0}),t.restoreWindowsState=function(e){const t={openedWindows:[]},i=e||{openedWindows:[]};return i.lastActiveWindow&&(t.lastActiveWindow=n(i.lastActiveWindow)),i.lastPluginDevelopmentHostWindow&&(t.lastPluginDevelopmentHostWindow=n(i.lastPluginDevelopmentHostWindow)),Array.isArray(i.openedWindows)&&(t.openedWindows=i.openedWindows.map(e=>n(e))),t},t.getWindowsStateStoreData=function(e){return{lastActiveWindow:e.lastActiveWindow&&r(e.lastActiveWindow),lastPluginDevelopmentHostWindow:e.lastPluginDevelopmentHostWindow&&r(e.lastPluginDevelopmentHostWindow),openedWindows:e.openedWindows.map(e=>r(e))}}}),define(t[74],i([0,1,5,21,19,40,2,17,33]),function(e,t,i,n,r,o,s,a,c){"use strict";function l(e){e["open-url"]&&(e._urls=e._,e._=[]);const t=function(e,t){const l=process.env.VSCODE_CWD||process.cwd(),d=e.map(e=>{let n=String(e),d=void 0;t&&(d=u(n),n=d.path),n&&(n=function(e,t){s.isWindows&&(t=r.rtrim(t,'"'));t=r.trim(r.trim(t," "),"\t"),s.isWindows&&(t=i.resolve(e,t),
t=r.rtrim(t,"."));return t}(l,n));const h=c.sanitizeFilePath(n,l),f=i.basename(h);return f&&!o.isValidBasename(f)?null:t&&d?(d.path=h,function(e){const t=[e.path];a.isNumber(e.line)&&t.push(String(e.line));a.isNumber(e.column)&&t.push(String(e.column));return t.join(":")}(d)):h}),h=s.isWindows||s.isMacintosh,f=n.distinct(d,e=>e&&h?e.toLowerCase():e||"");return n.coalesce(f)}(e._,e.goto);return e._=t,e.diff=e.diff&&2===t.length,e}function u(e){let t=null,i=null,n=null;if(e.split(":").forEach(e=>{const r=Number(e);a.isNumber(r)?null===i?i=r:null===n&&(n=r):t=t?[t,e].join(":"):e}),!t)throw new Error("Format for `--goto` should be: `FILE:LINE(:COLUMN)`");return{path:t,line:null!==i?i:void 0,column:null!==n?n:null!==i?1:void 0}}Object.defineProperty(t,"__esModule",{value:!0}),t.validatePaths=l,t.parseLineAndColumnAware=u}),define(t[144],i([0,1,45,16,28,2]),function(e,t,i,n,r,o){"use strict";function s(){
return void 0===a&&(a=o.isWindows?Promise.resolve({}):"1"===process.env.VSCODE_CLI?Promise.resolve({}):new Promise((e,t)=>{const o=process.env.ELECTRON_RUN_AS_NODE,s=process.env.ELECTRON_NO_ATTACH_CONSOLE,a=r.generateUuid().replace(/-/g,"").substr(0,12),c=new RegExp(a+"(.*)"+a),l=n.assign({},process.env,{ELECTRON_RUN_AS_NODE:"1",ELECTRON_NO_ATTACH_CONSOLE:"1"}),u=`'${process.execPath}' -p '"${a}" + JSON.stringify(process.env) + "${a}"'`,d=i.spawn(process.env.SHELL,["-ilc",u],{detached:!0,stdio:["ignore","pipe",process.stderr],env:l}),h=[];d.on("error",()=>e({})),d.stdout.on("data",e=>h.push(e)),d.on("close",(i,n)=>{if(0!==i)return t(new Error("Failed to get environment"));const r=Buffer.concat(h).toString("utf8"),a=c.exec(r),l=a?a[1]:"{}";try{const i=JSON.parse(l);o?i.ELECTRON_RUN_AS_NODE=o:delete i.ELECTRON_RUN_AS_NODE,s?i.ELECTRON_NO_ATTACH_CONSOLE=s:delete i.ELECTRON_NO_ATTACH_CONSOLE,delete i.XDG_RUNTIME_DIR,e(i)}catch(e){t(e)}})}).catch(()=>({}))),a}Object.defineProperty(t,"__esModule",{value:!0});let a
;t.getShellEnvironment=s}),define(t[148],i([13,10]),function(e,t){return e.create("vs/base/common/keybindingLabels",t)}),define(t[158],i([0,1,148]),function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(e,t,i=t){this.modifierLabels=[null],this.modifierLabels[2]=e,this.modifierLabels[1]=t,this.modifierLabels[3]=i}toLabel(e,t,i){if(0===t.length)return null;const n=[];for(let r=0,o=t.length;r<o;r++){const o=t[r],s=i(o);if(null===s)return null;n[r]=function(e,t,i){if(null===t)return"";const n=[];return e.ctrlKey&&n.push(i.ctrlKey),e.shiftKey&&n.push(i.shiftKey),e.altKey&&n.push(i.altKey),e.metaKey&&n.push(i.metaKey),n.push(t),n.join(i.separator)}(o,s,this.modifierLabels[e])}return n.join(" ")}}t.ModifierLabelProvider=n,t.UILabelProvider=new n({ctrlKey:"",shiftKey:"",altKey:"",metaKey:"",separator:""},{ctrlKey:i.localize(0,null),shiftKey:i.localize(1,null),altKey:i.localize(2,null),metaKey:i.localize(3,null),separator:"+"},{ctrlKey:i.localize(4,null),
shiftKey:i.localize(5,null),altKey:i.localize(6,null),metaKey:i.localize(7,null),separator:"+"}),t.AriaLabelProvider=new n({ctrlKey:i.localize(8,null),shiftKey:i.localize(9,null),altKey:i.localize(10,null),metaKey:i.localize(11,null),separator:"+"},{ctrlKey:i.localize(12,null),shiftKey:i.localize(13,null),altKey:i.localize(14,null),metaKey:i.localize(15,null),separator:"+"},{ctrlKey:i.localize(16,null),shiftKey:i.localize(17,null),altKey:i.localize(18,null),metaKey:i.localize(19,null),separator:"+"}),t.ElectronAcceleratorLabelProvider=new n({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"}),t.UserSettingsLabelProvider=new n({ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"cmd",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"win",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"meta",separator:"+"})}),define(t[159],i([13,10]),function(e,t){
return e.create("vs/code/electron-main/app",t)}),define(t[166],i([13,10]),function(e,t){return e.create("vs/code/electron-main/auth",t)}),define(t[171],i([13,10]),function(e,t){return e.create("vs/code/electron-main/logUploader",t)}),define(t[175],i([13,10]),function(e,t){return e.create("vs/code/electron-main/window",t)}),define(t[177],i([13,10]),function(e,t){return e.create("vs/code/electron-main/windows",t)}),define(t[77],i([13,10]),function(e,t){return e.create("vs/platform/configuration/common/configurationRegistry",t)}),define(t[78],i([13,10]),function(e,t){return e.create("vs/platform/environment/node/argv",t)}),define(t[79],i([13,10]),function(e,t){return e.create("vs/platform/environment/node/argvHelper",t)}),define(t[80],i([13,10]),function(e,t){return e.create("vs/platform/extensionManagement/common/extensionManagement",t)}),define(t[81],i([13,10]),function(e,t){return e.create("vs/platform/extensions/node/extensionValidator",t)}),define(t[82],i([13,10]),function(e,t){
return e.create("vs/platform/history/electron-main/historyMainService",t)}),define(t[83],i([13,10]),function(e,t){return e.create("vs/platform/issue/electron-main/issueService",t)}),define(t[84],i([13,10]),function(e,t){return e.create("vs/platform/label/common/label",t)}),define(t[85],i([13,10]),function(e,t){return e.create("vs/platform/menubar/electron-main/menubar",t)}),define(t[86],i([13,10]),function(e,t){return e.create("vs/platform/request/node/request",t)}),define(t[87],i([13,10]),function(e,t){return e.create("vs/platform/telemetry/common/telemetryService",t)}),define(t[88],i([13,10]),function(e,t){return e.create("vs/platform/update/node/update.config.contribution",t)}),define(t[89],i([13,10]),function(e,t){return e.create("vs/platform/windows/electron-main/windowsService",t)}),define(t[90],i([13,10]),function(e,t){return e.create("vs/platform/workspaces/common/workspaces",t)}),define(t[35],i([0,1,194,23,78,190,15]),function(e,t,i,n,r,o,s){"use strict";function a(e){let t=""
;return e.args&&(t=Array.isArray(e.args)?` <${e.args.join("> <")}>`:` <${e.args}>`),e.alias?`-${e.alias} --${e.id}${t}`:`--${e.id}${t}`}function c(e,t){let i=e.map(a),n=Math.max.apply(null,i.map(e=>e.length))+2+1;if(t-n<25)return e.reduce((e,t,n)=>e.concat([`  ${i[n]}`,`      ${t.description}`]),[]);let r=t-n-1,o=[];return e.forEach((e,t)=>{let s=i[t],a=function(e,t){let i=[];for(;e.length;){let n=e.length<t?e.length:e.lastIndexOf(" ",t),r=e.slice(0,n).trim();e=e.slice(n),i.push(r)}return i}(e.description,r),c=l(n-s.length-2);o.push("  "+s+c+a[0]);for(let e=1;e<a.length;e++)o.push(l(n)+a[e])}),o}function l(e){return" ".repeat(e)}Object.defineProperty(t,"__esModule",{value:!0});class u{constructor(){this.o=r.localize(0,null),this.e=r.localize(1,null),this.t=r.localize(2,null)}}t.options=[{id:"diff",type:"boolean",cat:"o",alias:"d",args:["file","file"],description:r.localize(3,null)},{id:"add",type:"boolean",cat:"o",alias:"a",args:"folder",description:r.localize(4,null)},{id:"goto",type:"boolean",cat:"o",
alias:"g",args:"file:line[:character]",description:r.localize(5,null)},{id:"new-window",type:"boolean",cat:"o",alias:"n",description:r.localize(6,null)},{id:"reuse-window",type:"boolean",cat:"o",alias:"r",description:r.localize(7,null)},{id:"wait",type:"boolean",cat:"o",alias:"w",description:r.localize(8,null)},{id:"locale",type:"string",cat:"o",args:"locale",description:r.localize(9,null)},{id:"user-data-dir",type:"string",cat:"o",args:"dir",description:r.localize(10,null)},{id:"version",type:"boolean",cat:"o",alias:"v",description:r.localize(11,null)},{id:"help",type:"boolean",cat:"o",alias:"h",description:r.localize(12,null)},{id:"folder-uri",type:"string",cat:"o",args:"uri",description:r.localize(13,null)},{id:"file-uri",type:"string",cat:"o",args:"uri",description:r.localize(14,null)},{id:"extensions-dir",type:"string",deprecates:"extensionHomePath",cat:"e",args:"dir",description:r.localize(15,null)},{id:"list-extensions",type:"boolean",cat:"e",description:r.localize(16,null)},{id:"show-versions",
type:"boolean",cat:"e",description:r.localize(17,null)},{id:"install-extension",type:"string",cat:"e",args:"extension-id",description:r.localize(18,null)},{id:"uninstall-extension",type:"string",cat:"e",args:"extension-id",description:r.localize(19,null)},{id:"enable-proposed-api",type:"string",cat:"e",args:"extension-id",description:r.localize(20,null)},{id:"verbose",type:"boolean",cat:"t",description:r.localize(21,null)},{id:"log",type:"string",cat:"t",args:"level",description:r.localize(22,null)},{id:"status",type:"boolean",alias:"s",cat:"t",description:r.localize(23,null)},{id:"prof-modules",type:"boolean",alias:"p",cat:"t",description:r.localize(24,null)},{id:"prof-startup",type:"boolean",cat:"t",description:r.localize(25,null)},{id:"disable-extensions",type:"boolean",deprecates:"disableExtensions",cat:"t",description:r.localize(26,null)},{id:"disable-extension",type:"string",cat:"t",args:"extension-id",description:r.localize(27,null)},{id:"inspect-extensions",type:"string",deprecates:"debugPluginHost",
args:"port",cat:"t",description:r.localize(28,null)},{id:"inspect-brk-extensions",type:"string",deprecates:"debugBrkPluginHost",args:"port",cat:"t",description:r.localize(29,null)},{id:"disable-gpu",type:"boolean",cat:"t",description:r.localize(30,null)},{id:"upload-logs",type:"string",cat:"t",description:r.localize(31,null)},{id:"max-memory",type:"string",cat:"t",description:r.localize(32,null)},{id:"remote",type:"string"},{id:"extensionDevelopmentPath",type:"string"},{id:"extensionTestsPath",type:"string"},{id:"debugId",type:"string"},{id:"inspect-search",type:"string",deprecates:"debugSearch"},{id:"inspect-brk-search",type:"string",deprecates:"debugBrkSearch"},{id:"export-default-configuration",type:"string"},{id:"install-source",type:"string"},{id:"driver",type:"string"},{id:"logExtensionHostCommunication",type:"boolean"},{id:"skip-getting-started",type:"boolean"},{id:"skip-release-notes",type:"boolean"},{id:"sticky-quickopen",type:"boolean"},{id:"disable-restore-windows",type:"boolean"},{
id:"disable-telemetry",type:"boolean"},{id:"disable-updates",type:"boolean"},{id:"disable-crash-reporter",type:"boolean"},{id:"skip-add-to-recently-opened",type:"boolean"},{id:"unity-launch",type:"boolean"},{id:"open-url",type:"boolean"},{id:"nolazy",type:"boolean"},{id:"issue",type:"boolean"},{id:"file-write",type:"boolean"},{id:"file-chmod",type:"boolean"},{id:"driver-verbose",type:"boolean"},{id:"force",type:"boolean"},{id:"trace-category-filter",type:"string"},{id:"trace-options",type:"string"},{id:"prof-code-loading",type:"boolean"},{id:"nodeless",type:"boolean"}],t.parseArgs=function(e,n=(e=>!0)){const r={},o=[],s=[];for(let e of t.options)n(e)&&e.alias&&(r[e.id]=e.alias),"string"===e.type?(o.push(e.id),e.deprecates&&o.push(e.deprecates)):"boolean"===e.type&&(s.push(e.id),e.deprecates&&s.push(e.deprecates));const a=i(e,{string:o,boolean:s,alias:r});for(let e of t.options)e.alias&&delete a[e.alias],e.deprecates&&a.hasOwnProperty(e.deprecates)&&!a[e.id]&&(a[e.id]=a[e.deprecates],delete a[e.deprecates])
;return a},t.formatOptions=c,t.buildHelpMessage=function(e,i,o,s=(e=>!0)){const a=process.stdout.isTTY&&process.stdout.columns||80;let l=new u,d=[`${e} ${o}`];d.push(""),d.push(`${r.localize(33,null)}: ${i} [${r.localize(34,null)}][${r.localize(35,null)}...]`),d.push(""),"win32"===n.platform()?d.push(r.localize(36,null,i)):d.push(r.localize(37,null,i)),d.push("");for(let e in l){let i=t.options.filter(t=>!!t.description&&t.cat===e&&s(t));i.length&&(d.push(l[e]),d.push(...c(i,a)),d.push(""))}return d.join("\n")},t.buildVersionMessage=function(e,t){return`${e||r.localize(38,null)}\n${t||r.localize(39,null)}\n${process.arch}`},t.asArray=function(e){return e?Array.isArray(e)?e:[e]:[]},t.hasArgs=function(e){return!(!e||Array.isArray(e)&&!e.length)},t.addArg=function(e,...t){const i=e.indexOf("--");return-1===i?e.push(...t):e.splice(i,0,...t),e},t.createWaitMarkerFile=function(e){const t=o.join(n.tmpdir(),Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,10));try{return s.writeFileSync(t,""),
e&&console.log(`Marker file for --wait created: ${t}`),t}catch(t){return void(e&&console.error(`Failed to create marker file for --wait: ${t}`))}}}),define(t[76],i([0,1,19]),function(e,t,i){"use strict";function n(e,t){return e.uuid&&t.uuid?e.uuid===t.uuid:e.id===t.id||0===i.compareIgnoreCase(e.id,t.id)}Object.defineProperty(t,"__esModule",{value:!0}),t.areSameExtensions=n,t.adoptToGalleryExtensionId=function(e){return e.toLocaleLowerCase()},t.getGalleryExtensionId=function(e,t){return`${e.toLocaleLowerCase()}.${t.toLocaleLowerCase()}`},t.groupByExtension=function(e,t){const i=[],r=e=>{for(const r of i)if(r.some(i=>n(t(i),t(e))))return r;return null};for(const t of e){const e=r(t);e?e.push(t):i.push([t])}return i},t.getLocalExtensionTelemetryData=function(e){return{id:e.identifier.id,name:e.manifest.name,galleryId:null,publisherId:e.metadata?e.metadata.publisherId:null,publisherName:e.manifest.publisher,publisherDisplayName:e.metadata?e.metadata.publisherDisplayName:null,
dependencies:e.manifest.extensionDependencies&&e.manifest.extensionDependencies.length>0}},t.getGalleryExtensionTelemetryData=function(e){return Object.assign({id:e.identifier.id,name:e.name,galleryId:e.identifier.uuid,publisherId:e.publisherId,publisherName:e.publisher,publisherDisplayName:e.publisherDisplayName,dependencies:!!(e.properties.dependencies&&e.properties.dependencies.length>0)},e.telemetryData)},t.BetterMergeId="pprice.better-merge",t.getMaliciousExtensionsSet=function(e){const t=new Set;for(const i of e)i.malicious&&t.add(i.id.id);return t}}),define(t[56],i([0,1]),function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(e,t=[],i=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=i}}t.SyncDescriptor=i,t.createSyncDescriptor=((e,...t)=>new i(e,t))}),define(t[95],i([0,1,17,122]),function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e){this._hashFn=e,this._nodes=Object.create(null)}roots(){
const e=[];return n.forEach(this._nodes,t=>{i.isEmptyObject(t.value.outgoing)&&e.push(t.value)}),e}insertEdge(e,t){const i=this.lookupOrInsertNode(e),n=this.lookupOrInsertNode(t);i.outgoing[this._hashFn(t)]=n,n.incoming[this._hashFn(e)]=i}removeNode(e){const t=this._hashFn(e);delete this._nodes[t],n.forEach(this._nodes,e=>{delete e.value.outgoing[t],delete e.value.incoming[t]})}lookupOrInsertNode(e){const t=this._hashFn(e);let i=this._nodes[t];return i||(i=function(e){return{data:e,incoming:Object.create(null),outgoing:Object.create(null)}}(e),this._nodes[t]=i),i}lookup(e){return this._nodes[this._hashFn(e)]}isEmpty(){for(const e in this._nodes)return!1;return!0}toString(){let e=[];return n.forEach(this._nodes,t=>{e.push(`${t.key}, (incoming)[${Object.keys(t.value.incoming).join(", ")}], (outgoing)[${Object.keys(t.value.outgoing).join(",")}]`)}),e.join("\n")}}t.Graph=r}),define(t[4],i([0,1]),function(e,t){"use strict";function i(e,t,i,n){t[r.DI_TARGET]===t?t[r.DI_DEPENDENCIES].push({id:e,index:i,optional:n
}):(t[r.DI_DEPENDENCIES]=[{id:e,index:i,optional:n}],t[r.DI_TARGET]=t)}function n(e){if(r.serviceIds.has(e))return r.serviceIds.get(e);const t=function(e,n,r){if(3!==arguments.length)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");i(t,e,r,!1)};return t.toString=(()=>e),r.serviceIds.set(e,t),t}Object.defineProperty(t,"__esModule",{value:!0});var r;!function(e){e.serviceIds=new Map,e.DI_TARGET="$di$target",e.DI_DEPENDENCIES="$di$dependencies",e.getServiceDependencies=function(t){return t[e.DI_DEPENDENCIES]||[]}}(r=t._util||(t._util={})),t.IInstantiationService=n("instantiationService"),t.createDecorator=n,t.optional=function(e){return function(t,n,r){if(3!==arguments.length)throw new Error("@optional-decorator can only be used to decorate a parameter");i(e,t,r,!0)}}}),define(t[55],i([0,1,4]),function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IBackupMainService=i.createDecorator("backupMainService")}),define(t[98],i([0,1,51,4]),function(e,t,i,r){
"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ID="driverService",t.IDriver=r.createDecorator(t.ID);class o{constructor(e){this.driver=e}listen(e,t){throw new Error("No event found")}call(e,t,i){switch(t){case"getWindowIds":return this.driver.getWindowIds();case"capturePage":return this.driver.capturePage(i);case"reloadWindow":return this.driver.reloadWindow(i);case"exitApplication":return this.driver.exitApplication();case"dispatchKeybinding":return this.driver.dispatchKeybinding(i[0],i[1]);case"click":return this.driver.click(i[0],i[1],i[2],i[3]);case"doubleClick":return this.driver.doubleClick(i[0],i[1]);case"setValue":return this.driver.setValue(i[0],i[1],i[2]);case"getTitle":return this.driver.getTitle(i[0]);case"isActiveElement":return this.driver.isActiveElement(i[0],i[1]);case"getElements":return this.driver.getElements(i[0],i[1],i[2]);case"typeInEditor":return this.driver.typeInEditor(i[0],i[1],i[2]);case"getTerminalBuffer":return this.driver.getTerminalBuffer(i[0],i[1])
;case"writeInTerminal":return this.driver.writeInTerminal(i[0],i[1],i[2])}throw new Error(`Call not found: ${t}`)}}t.DriverChannel=o;class s{constructor(e){this.channel=e}getWindowIds(){return this.channel.call("getWindowIds")}capturePage(e){return this.channel.call("capturePage",e)}reloadWindow(e){return this.channel.call("reloadWindow",e)}exitApplication(){return this.channel.call("exitApplication")}dispatchKeybinding(e,t){return this.channel.call("dispatchKeybinding",[e,t])}click(e,t,i,n){return this.channel.call("click",[e,t,i,n])}doubleClick(e,t){return this.channel.call("doubleClick",[e,t])}setValue(e,t,i){return this.channel.call("setValue",[e,t,i])}getTitle(e){return this.channel.call("getTitle",[e])}isActiveElement(e,t){return this.channel.call("isActiveElement",[e,t])}getElements(e,t,i){return this.channel.call("getElements",[e,t,i])}typeInEditor(e,t,i){return this.channel.call("typeInEditor",[e,t,i])}getTerminalBuffer(e,t){return this.channel.call("getTerminalBuffer",[e,t])}writeInTerminal(e,t,i){
return this.channel.call("writeInTerminal",[e,t,i])}}t.DriverChannelClient=s;class a{constructor(e){this.registry=e}listen(e,t){throw new Error(`Event not found: ${t}`)}call(e,t,i){switch(t){case"registerWindowDriver":return this.registry.registerWindowDriver(i);case"reloadWindowDriver":return this.registry.reloadWindowDriver(i)}throw new Error(`Call not found: ${t}`)}}t.WindowDriverRegistryChannel=a;class c{constructor(e){this.channel=e}registerWindowDriver(e){return this.channel.call("registerWindowDriver",e)}reloadWindowDriver(e){return this.channel.call("reloadWindowDriver",e)}}t.WindowDriverRegistryChannelClient=c;class l{constructor(e){this.driver=e}listen(e,t){throw new Error(`No event found: ${t}`)}call(e,t,i){switch(t){case"click":return this.driver.click(i[0],i[1],i[2]);case"doubleClick":return this.driver.doubleClick(i);case"setValue":return this.driver.setValue(i[0],i[1]);case"getTitle":return this.driver.getTitle();case"isActiveElement":return this.driver.isActiveElement(i);case"getElements":
return this.driver.getElements(i[0],i[1]);case"typeInEditor":return this.driver.typeInEditor(i[0],i[1]);case"getTerminalBuffer":return this.driver.getTerminalBuffer(i);case"writeInTerminal":return this.driver.writeInTerminal(i[0],i[1])}throw new Error(`Call not found: ${t}`)}}t.WindowDriverChannel=l;class u{constructor(e){this.channel=e}click(e,t,i){return this.channel.call("click",[e,t,i])}doubleClick(e){return this.channel.call("doubleClick",e)}setValue(e,t){return this.channel.call("setValue",[e,t])}getTitle(){return this.channel.call("getTitle")}isActiveElement(e){return this.channel.call("isActiveElement",e)}getElements(e,t){return this.channel.call("getElements",[e,t])}typeInEditor(e,t){return this.channel.call("typeInEditor",[e,t])}getTerminalBuffer(e){return this.channel.call("getTerminalBuffer",e)}writeInTerminal(e,t){return this.channel.call("writeInTerminal",[e,t])}}t.WindowDriverChannelClient=u,t.connect=function(e){return n(this,void 0,void 0,function*(){
const t=yield i.connect(e,"driverClient"),n=t.getChannel("driver");return{client:t,driver:new s(n)}})}}),define(t[9],i([0,1,4]),function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IEnvironmentService=i.createDecorator("environmentService")}),define(t[100],i([0,1,80,4]),function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EXTENSION_IDENTIFIER_PATTERN="^([a-z0-9A-Z][a-z0-9-A-Z]*)\\.([a-z0-9A-Z][a-z0-9-A-Z]*)$",t.EXTENSION_IDENTIFIER_REGEX=new RegExp(t.EXTENSION_IDENTIFIER_PATTERN),t.isIExtensionIdentifier=function(e){return e&&"object"==typeof e&&"string"==typeof e.id&&(!e.uuid||"string"==typeof e.uuid)},t.IExtensionManagementService=n.createDecorator("extensionManagementService"),t.IExtensionGalleryService=n.createDecorator("extensionGalleryService");!function(e){e[e.NoneOrRelevance=0]="NoneOrRelevance",e[e.LastUpdatedDate=1]="LastUpdatedDate",e[e.Title=2]="Title",e[e.PublisherName=3]="PublisherName",e[e.InstallCount=4]="InstallCount",
e[e.PublishedDate=5]="PublishedDate",e[e.AverageRating=6]="AverageRating",e[e.WeightedRating=12]="WeightedRating"}(t.SortBy||(t.SortBy={}));!function(e){e[e.Default=0]="Default",e[e.Ascending=1]="Ascending",e[e.Descending=2]="Descending"}(t.SortOrder||(t.SortOrder={}));!function(e){e.Uninstall="uninstall"}(t.StatisticType||(t.StatisticType={}));!function(e){e[e.None=0]="None",e[e.Install=1]="Install",e[e.Update=2]="Update"}(t.InstallOperation||(t.InstallOperation={})),t.INSTALL_ERROR_MALICIOUS="malicious",t.INSTALL_ERROR_INCOMPATIBLE="incompatible",t.IExtensionManagementServerService=n.createDecorator("extensionManagementServerService");!function(e){e[e.Disabled=0]="Disabled",e[e.WorkspaceDisabled=1]="WorkspaceDisabled",e[e.Enabled=2]="Enabled",e[e.WorkspaceEnabled=3]="WorkspaceEnabled"}(t.EnablementState||(t.EnablementState={})),t.IExtensionEnablementService=n.createDecorator("extensionEnablementService"),t.IExtensionTipsService=n.createDecorator("extensionTipsService");!function(e){
e[e.Workspace=0]="Workspace",e[e.File=1]="File",e[e.Executable=2]="Executable",e[e.DynamicWorkspace=3]="DynamicWorkspace",e[e.Experimental=4]="Experimental"}(t.ExtensionRecommendationReason||(t.ExtensionRecommendationReason={})),t.ExtensionsLabel=i.localize(0,null),t.ExtensionsChannelId="extensions",t.PreferencesLabel=i.localize(1,null)}),define(t[64],i([0,1,5,2,4,19,25,17]),function(e,t,i,n,r,o,s,a){"use strict";function c(e,t){return e.name=t?`${t} (FileSystemError)`:"FileSystemError",e}function l(e){if(e instanceof d)return e.code;const t=/^(.+) \(FileSystemError\)$/.exec(e.name);if(!t)return u.Unknown;switch(t[1]){case u.FileExists:return u.FileExists;case u.FileIsADirectory:return u.FileIsADirectory;case u.FileNotADirectory:return u.FileNotADirectory;case u.FileNotFound:return u.FileNotFound;case u.NoPermissions:return u.NoPermissions;case u.Unavailable:return u.Unavailable}return u.Unknown}Object.defineProperty(t,"__esModule",{value:!0}),t.IFileService=r.createDecorator("fileService");!function(e){
e[e.Unknown=0]="Unknown",e[e.File=1]="File",e[e.Directory=2]="Directory",e[e.SymbolicLink=64]="SymbolicLink"}(t.FileType||(t.FileType={}));!function(e){e[e.FileReadWrite=2]="FileReadWrite",e[e.FileOpenReadWriteClose=4]="FileOpenReadWriteClose",e[e.FileFolderCopy=8]="FileFolderCopy",e[e.PathCaseSensitive=1024]="PathCaseSensitive",e[e.Readonly=2048]="Readonly",e[e.Trash=4096]="Trash"}(t.FileSystemProviderCapabilities||(t.FileSystemProviderCapabilities={})),t.hasReadWriteCapability=function(e){return!!(2&e.capabilities)},t.hasFileFolderCopyCapability=function(e){return!!(8&e.capabilities)},t.hasOpenReadWriteCloseCapability=function(e){return!!(4&e.capabilities)};var u;!function(e){e.FileExists="EntryExists",e.FileNotFound="EntryNotFound",e.FileNotADirectory="EntryNotADirectory",e.FileIsADirectory="EntryIsADirectory",e.NoPermissions="NoPermissions",e.Unavailable="Unavailable",e.Unknown="Unknown"}(u=t.FileSystemProviderErrorCode||(t.FileSystemProviderErrorCode={}));class d extends Error{constructor(e,t){super(e),
this.code=t}}t.FileSystemProviderError=d,t.createFileSystemProviderError=function(e,t){const i=new d(e.toString(),t);return c(i,t),i},t.markAsFileSystemProviderError=c,t.toFileSystemProviderErrorCode=l,t.toFileOperationResult=function(e){switch(l(e)){case u.FileNotFound:return 2;case u.FileIsADirectory:return 1;case u.NoPermissions:return 7;case u.FileExists:return 5;case u.FileNotADirectory:default:return 11}};!function(e){e[e.CREATE=0]="CREATE",e[e.DELETE=1]="DELETE",e[e.MOVE=2]="MOVE",e[e.COPY=3]="COPY"}(t.FileOperation||(t.FileOperation={}));class h{constructor(e,t,i){this._resource=e,this._operation=t,this._target=i}get resource(){return this._resource}get target(){return this._target}get operation(){return this._operation}}t.FileOperationEvent=h;!function(e){e[e.UPDATED=0]="UPDATED",e[e.ADDED=1]="ADDED",e[e.DELETED=2]="DELETED"}(t.FileChangeType||(t.FileChangeType={}));class f{constructor(e){this._changes=e}get changes(){return this._changes}contains(e,t){if(!e)return!1;const i=!a.isUndefinedOrNull(t)
;return this._changes.some(r=>(!i||r.type===t)&&(2===r.type?s.isEqualOrParent(e,r.resource,!n.isLinux):s.isEqual(e,r.resource,!n.isLinux)))}getAdded(){return this.getOfType(1)}gotAdded(){return this.hasType(1)}getDeleted(){return this.getOfType(2)}gotDeleted(){return this.hasType(2)}getUpdated(){return this.getOfType(0)}gotUpdated(){return this.hasType(0)}getOfType(e){return this._changes.filter(t=>t.type===e)}hasType(e){return this._changes.some(t=>t.type===e)}}t.FileChangesEvent=f,t.isParent=function(e,t,n){return!(!e||!t||e===t)&&!(t.length>e.length)&&(t.charAt(t.length-1)!==i.sep&&(t+=i.sep),n?o.startsWithIgnoreCase(e,t):0===e.indexOf(t))};class p{constructor(e){this._value=e}read(){let e=this._value;return this._value=null,e}}t.StringSnapshot=p,t.snapshotToString=function(e){const t=[];let i;for(;"string"==typeof(i=e.read());)t.push(i);return t.join("")};class g extends Error{constructor(e,t,i){super(e),this.fileOperationResult=t,this.options=i}static isFileOperationError(e){
return e instanceof Error&&!a.isUndefinedOrNull(e.fileOperationResult)}}t.FileOperationError=g;!function(e){e[e.FILE_IS_BINARY=0]="FILE_IS_BINARY",e[e.FILE_IS_DIRECTORY=1]="FILE_IS_DIRECTORY",e[e.FILE_NOT_FOUND=2]="FILE_NOT_FOUND",e[e.FILE_NOT_MODIFIED_SINCE=3]="FILE_NOT_MODIFIED_SINCE",e[e.FILE_MODIFIED_SINCE=4]="FILE_MODIFIED_SINCE",e[e.FILE_MOVE_CONFLICT=5]="FILE_MOVE_CONFLICT",e[e.FILE_READ_ONLY=6]="FILE_READ_ONLY",e[e.FILE_PERMISSION_DENIED=7]="FILE_PERMISSION_DENIED",e[e.FILE_TOO_LARGE=8]="FILE_TOO_LARGE",e[e.FILE_INVALID_PATH=9]="FILE_INVALID_PATH",e[e.FILE_EXCEED_MEMORY_LIMIT=10]="FILE_EXCEED_MEMORY_LIMIT",e[e.FILE_OTHER_ERROR=11]="FILE_OTHER_ERROR"}(t.FileOperationResult||(t.FileOperationResult={})),t.AutoSaveConfiguration={OFF:"off",AFTER_DELAY:"afterDelay",ON_FOCUS_CHANGE:"onFocusChange",ON_WINDOW_CHANGE:"onWindowChange"},t.HotExitConfiguration={OFF:"off",ON_EXIT:"onExit",ON_EXIT_AND_WINDOW_CLOSE:"onExitAndWindowClose"},t.CONTENT_CHANGE_EVENT_BUFFER_DELAY=1e3,
t.FILES_ASSOCIATIONS_CONFIG="files.associations",t.FILES_EXCLUDE_CONFIG="files.exclude",t.SUPPORTED_ENCODINGS={utf8:{labelLong:"UTF-8",labelShort:"UTF-8",order:1,alias:"utf8bom"},utf8bom:{labelLong:"UTF-8 with BOM",labelShort:"UTF-8 with BOM",encodeOnly:!0,order:2,alias:"utf8"},utf16le:{labelLong:"UTF-16 LE",labelShort:"UTF-16 LE",order:3},utf16be:{labelLong:"UTF-16 BE",labelShort:"UTF-16 BE",order:4},windows1252:{labelLong:"Western (Windows 1252)",labelShort:"Windows 1252",order:5},iso88591:{labelLong:"Western (ISO 8859-1)",labelShort:"ISO 8859-1",order:6},iso88593:{labelLong:"Western (ISO 8859-3)",labelShort:"ISO 8859-3",order:7},iso885915:{labelLong:"Western (ISO 8859-15)",labelShort:"ISO 8859-15",order:8},macroman:{labelLong:"Western (Mac Roman)",labelShort:"Mac Roman",order:9},cp437:{labelLong:"DOS (CP 437)",labelShort:"CP437",order:10},windows1256:{labelLong:"Arabic (Windows 1256)",labelShort:"Windows 1256",order:11},iso88596:{labelLong:"Arabic (ISO 8859-6)",labelShort:"ISO 8859-6",order:12},
windows1257:{labelLong:"Baltic (Windows 1257)",labelShort:"Windows 1257",order:13},iso88594:{labelLong:"Baltic (ISO 8859-4)",labelShort:"ISO 8859-4",order:14},iso885914:{labelLong:"Celtic (ISO 8859-14)",labelShort:"ISO 8859-14",order:15},windows1250:{labelLong:"Central European (Windows 1250)",labelShort:"Windows 1250",order:16},iso88592:{labelLong:"Central European (ISO 8859-2)",labelShort:"ISO 8859-2",order:17},cp852:{labelLong:"Central European (CP 852)",labelShort:"CP 852",order:18},windows1251:{labelLong:"Cyrillic (Windows 1251)",labelShort:"Windows 1251",order:19},cp866:{labelLong:"Cyrillic (CP 866)",labelShort:"CP 866",order:20},iso88595:{labelLong:"Cyrillic (ISO 8859-5)",labelShort:"ISO 8859-5",order:21},koi8r:{labelLong:"Cyrillic (KOI8-R)",labelShort:"KOI8-R",order:22},koi8u:{labelLong:"Cyrillic (KOI8-U)",labelShort:"KOI8-U",order:23},iso885913:{labelLong:"Estonian (ISO 8859-13)",labelShort:"ISO 8859-13",order:24},windows1253:{labelLong:"Greek (Windows 1253)",labelShort:"Windows 1253",order:25},
iso88597:{labelLong:"Greek (ISO 8859-7)",labelShort:"ISO 8859-7",order:26},windows1255:{labelLong:"Hebrew (Windows 1255)",labelShort:"Windows 1255",order:27},iso88598:{labelLong:"Hebrew (ISO 8859-8)",labelShort:"ISO 8859-8",order:28},iso885910:{labelLong:"Nordic (ISO 8859-10)",labelShort:"ISO 8859-10",order:29},iso885916:{labelLong:"Romanian (ISO 8859-16)",labelShort:"ISO 8859-16",order:30},windows1254:{labelLong:"Turkish (Windows 1254)",labelShort:"Windows 1254",order:31},iso88599:{labelLong:"Turkish (ISO 8859-9)",labelShort:"ISO 8859-9",order:32},windows1258:{labelLong:"Vietnamese (Windows 1258)",labelShort:"Windows 1258",order:33},gbk:{labelLong:"Simplified Chinese (GBK)",labelShort:"GBK",order:34},gb18030:{labelLong:"Simplified Chinese (GB18030)",labelShort:"GB18030",order:35},cp950:{labelLong:"Traditional Chinese (Big5)",labelShort:"Big5",order:36},big5hkscs:{labelLong:"Traditional Chinese (Big5-HKSCS)",labelShort:"Big5-HKSCS",order:37},shiftjis:{labelLong:"Japanese (Shift JIS)",labelShort:"Shift JIS",
order:38},eucjp:{labelLong:"Japanese (EUC-JP)",labelShort:"EUC-JP",order:39},euckr:{labelLong:"Korean (EUC-KR)",labelShort:"EUC-KR",order:40},windows874:{labelLong:"Thai (Windows 874)",labelShort:"Windows 874",order:41},iso885911:{labelLong:"Latin/Thai (ISO 8859-11)",labelShort:"ISO 8859-11",order:42},koi8ru:{labelLong:"Cyrillic (KOI8-RU)",labelShort:"KOI8-RU",order:43},koi8t:{labelLong:"Tajik (KOI8-T)",labelShort:"KOI8-T",order:44},gb2312:{labelLong:"Simplified Chinese (GB 2312)",labelShort:"GB 2312",order:45},cp865:{labelLong:"Nordic DOS (CP 865)",labelShort:"CP 865",order:46},cp850:{labelLong:"Western European DOS (CP 850)",labelShort:"CP 850",order:47}};!function(e){e[e.FILE=0]="FILE",e[e.FOLDER=1]="FOLDER",e[e.ROOT_FOLDER=2]="ROOT_FOLDER"}(t.FileKind||(t.FileKind={})),t.MIN_MAX_MEMORY_SIZE_MB=2048,t.FALLBACK_MAX_MEMORY_SIZE_MB=4096,t.etag=function(e,t){if("number"==typeof t&&"number"==typeof e)return e.toString(29)+t.toString(31)},t.ILegacyFileService=r.createDecorator("legacyFileService")}),
define(t[102],i([0,1,149,21,79,64,35]),function(e,t,i,n,r,o,s){"use strict";function a(e){return e.goto&&e._.forEach(e=>i(/^(\w:)?[^:]+(:\d*){0,2}$/.test(e),r.localize(0,null))),e["max-memory"]&&i(parseInt(e["max-memory"])>=o.MIN_MAX_MEMORY_SIZE_MB,`The max-memory argument cannot be specified lower than ${o.MIN_MAX_MEMORY_SIZE_MB} MB.`),e}function c(e){const t=n.firstIndex(e,e=>!/^-/.test(e));if(t>-1)return[...e.slice(0,t),...e.slice(t+1)]}Object.defineProperty(t,"__esModule",{value:!0}),t.parseMainProcessArgv=function(e){let[,...t]=e;return process.env.VSCODE_DEV&&(t=c(t)||[]),a(s.parseArgs(t))},t.parseCLIProcessArgv=function(e){let[,,...t]=e;return process.env.VSCODE_DEV&&(t=c(t)||[]),a(s.parseArgs(t))}}),define(t[37],i([0,1,4]),function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IHistoryMainService=i.createDecorator("historyMainService"),t.isRecentWorkspace=function(e){return!!e.workspace},t.isRecentFolder=function(e){return!!e.folderUri},t.isRecentFile=function(e){
return!!e.fileUri}}),define(t[104],i([0,1,8,37]),function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.restoreRecentlyOpened=function(e){const t={workspaces:[],files:[]};if(e){const n=e;if(Array.isArray(n.workspaces3))for(let e=0;e<n.workspaces3.length;e++){const r=n.workspaces3[e],o=Array.isArray(n.workspaceLabels)&&n.workspaceLabels[e]||void 0;"object"==typeof r&&"string"==typeof r.id&&"string"==typeof r.configURIPath?t.workspaces.push({label:o,workspace:{id:r.id,configPath:i.URI.parse(r.configURIPath)}}):"string"==typeof r&&t.workspaces.push({label:o,folderUri:i.URI.parse(r)})}else if(Array.isArray(n.workspaces2))for(const e of n.workspaces2)"object"==typeof e&&"string"==typeof e.id&&"string"==typeof e.configPath?t.workspaces.push({workspace:{id:e.id,configPath:i.URI.file(e.configPath)}}):"string"==typeof e&&t.workspaces.push({folderUri:i.URI.parse(e)});else if(Array.isArray(n.workspaces))for(const e of n.workspaces)"string"==typeof e?t.workspaces.push({folderUri:i.URI.file(e)
}):"object"==typeof e&&"string"==typeof e.id&&"string"==typeof e.configPath?t.workspaces.push({workspace:{id:e.id,configPath:i.URI.file(e.configPath)}}):e&&"string"==typeof e.path&&"string"==typeof e.scheme&&t.workspaces.push({folderUri:i.URI.revive(e)});if(Array.isArray(n.files2))for(let e=0;e<n.files2.length;e++){const r=n.files2[e],o=Array.isArray(n.fileLabels)&&n.fileLabels[e]||void 0;"string"==typeof r&&t.files.push({label:o,fileUri:i.URI.parse(r)})}else if(Array.isArray(n.files))for(const e of n.files)"string"==typeof e&&t.files.push({fileUri:i.URI.file(e)})}return t},t.toStoreData=function(e){const t={workspaces3:[],files2:[]};let i=!1;const r=[];for(const o of e.workspaces)n.isRecentFolder(o)?t.workspaces3.push(o.folderUri.toString()):t.workspaces3.push({id:o.workspace.id,configURIPath:o.workspace.configPath.toString()}),r.push(o.label||null),i=i||!!o.label;i&&(t.workspaceLabels=r),i=!1;const o=[];for(const n of e.files)t.files2.push(n.fileUri.toString()),o.push(n.label||null),i=i||!!n.label
;return i&&(t.fileLabels=o),t}}),define(t[58],i([0,1]),function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(...e){this._entries=new Map;for(let[t,i]of e)this.set(t,i)}set(e,t){const i=this._entries.get(e);return this._entries.set(e,t),i}forEach(e){this._entries.forEach((t,i)=>e(i,t))}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}}t.ServiceCollection=i}),define(t[106],i([0,1,18,17,95,56,4,58,12]),function(e,t,i,n,r,o,s,a,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l="function"==typeof Proxy;class u{constructor(e=new a.ServiceCollection,t=!1,i){this._services=e,this._strict=t,this._parent=i,this._services.set(s.IInstantiationService,this)}createChild(e){return new u(e,this._strict,this)}invokeFunction(e,...t){let n=h.traceInvocation(e),r=!1;try{const o={get:(e,t)=>{if(r)throw i.illegalState("service accessor is only valid during the invocation of its target method");const o=this._getOrCreateServiceInstance(e,n)
;if(!o&&t!==s.optional)throw new Error(`[invokeFunction] unknown service '${e}'`);return o}};return e.apply(void 0,[o,...t])}finally{r=!0,n.stop()}}createInstance(e,...t){let i,n;return e instanceof o.SyncDescriptor?(i=h.traceCreation(e.ctor),n=this._createInstance(e.ctor,e.staticArguments.concat(t),i)):(i=h.traceCreation(e),n=this._createInstance(e,t,i)),i.stop(),n}_createInstance(e,t=[],i){let r=s._util.getServiceDependencies(e).sort((e,t)=>e.index-t.index),o=[];for(const t of r){let n=this._getOrCreateServiceInstance(t.id,i);if(!n&&this._strict&&!t.optional)throw new Error(`[createInstance] ${e.name} depends on UNKNOWN service ${t.id}.`);o.push(n)}let a=r.length>0?r[0].index:t.length;if(t.length!==a){console.warn(`[createInstance] First service dependency of ${e.name} at position ${a+1} conflicts with ${t.length} static arguments`);let i=a-t.length;t=i>0?t.concat(new Array(i)):t.slice(0,a)}return n.create.apply(null,[e].concat(t,o))}_setServiceInstance(e,t){
if(this._services.get(e)instanceof o.SyncDescriptor)this._services.set(e,t);else{if(!this._parent)throw new Error("illegalState - setting UNKNOWN service instance");this._parent._setServiceInstance(e,t)}}_getServiceInstanceOrDescriptor(e){let t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){let i=this._getServiceInstanceOrDescriptor(e);return i instanceof o.SyncDescriptor?this._createAndCacheServiceInstance(e,i,t.branch(e,!0)):(t.branch(e,!1),i)}_createAndCacheServiceInstance(e,t,i){function n(){const e=new Error("[createInstance] cyclic dependency between services");throw e.message=a.toString(),e}const a=new r.Graph(e=>e.id.toString());let c=0;const l=[{id:e,desc:t,_trace:i}];for(;l.length;){const t=l.pop();a.lookupOrInsertNode(t),c++>100&&n();let i=s._util.getServiceDependencies(t.desc.ctor);for(let n of i){let i=this._getServiceInstanceOrDescriptor(n.id)
;if(i||n.optional||console.warn(`[createInstance] ${e} depends on ${n.id} which is NOT registered.`),i instanceof o.SyncDescriptor){const e={id:n.id,desc:i,_trace:t._trace.branch(n.id,!0)};a.insertEdge(t,e),l.push(e)}}}for(;;){let e=a.roots();if(0===e.length){a.isEmpty()||n();break}for(let{data:t}of e){const e=this._createServiceInstanceWithOwner(t.id,t.desc.ctor,t.desc.staticArguments,t.desc.supportsDelayedInstantiation,t._trace);this._setServiceInstance(t.id,e),a.removeNode(t)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,i=[],n,r){if(this._services.get(e)instanceof o.SyncDescriptor)return this._createServiceInstance(t,i,n,r);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,i,n,r);throw new Error("illegalState - creating UNKNOWN service instance")}_createServiceInstance(e,t=[],i,n){if(i&&l){const i=new c.IdleValue(()=>this._createInstance(e,t,n));return new Proxy(Object.create(null),{get:(e,t)=>i.getValue()[t],set:(e,t,n)=>(i.getValue()[t]=n,!0)})
}return this._createInstance(e,t,n)}}t.InstantiationService=u;var d;!function(e){e[e.Creation=0]="Creation",e[e.Invocation=1]="Invocation",e[e.Branch=2]="Branch"}(d||(d={}));class h{constructor(e,t){this.type=e,this.name=t,this._start=Date.now(),this._dep=[]}static traceInvocation(e){return h._None}static traceCreation(e){return h._None}branch(e,t){let i=new h(2,e.toString());return this._dep.push([e,t,i]),i}stop(){function e(t,n){let r=[],o=new Array(t+1).join("\t");for(const[s,a,c]of n._dep)if(a&&c){i=!0,r.push(`${o}CREATES -> ${s}`);let n=e(t+1,c);n&&r.push(n)}else r.push(`${o}uses -> ${s}`);return r.join("\n")}let t=Date.now()-this._start;h._totals+=t;let i=!1,n=[`${0===this.type?"CREATE":"CALL"} ${this.name}`,`${e(1,this)}`,`DONE, took ${t.toFixed(2)}ms (grand total ${h._totals.toFixed(2)}ms)`];(t>2||i)&&console.log(n.join("\n"))}}h._None=new class extends h{constructor(){super(-1,null)}stop(){}branch(){return this}},h._totals=0}),define(t[107],i([0,1,4]),function(e,t,i){"use strict"
;Object.defineProperty(t,"__esModule",{value:!0}),t.IIssueService=i.createDecorator("issueService");!function(e){e[e.Bug=0]="Bug",e[e.PerformanceIssue=1]="PerformanceIssue",e[e.FeatureRequest=2]="FeatureRequest",e[e.SettingsSearchIssue=3]="SettingsSearchIssue"}(t.IssueType||(t.IssueType={}))}),define(t[108],i([0,1]),function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(e){this.service=e}listen(e,t){throw new Error(`Event not found: ${t}`)}call(e,t,i){switch(t){case"openIssueReporter":return this.service.openReporter(i);case"openProcessExplorer":return this.service.openProcessExplorer(i);case"getSystemStatus":return this.service.getSystemStatus()}throw new Error(`Call not found: ${t}`)}}t.IssueChannel=i}),define(t[109],i([0,1,18,158,52]),function(e,t,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class o extends r.ResolvedKeybinding{constructor(e,t){if(super(),0===t.length)throw i.illegalArgument("parts");this._os=e,this._parts=t}getLabel(){
return n.UILabelProvider.toLabel(this._os,this._parts,e=>this._getLabel(e))}getAriaLabel(){return n.AriaLabelProvider.toLabel(this._os,this._parts,e=>this._getAriaLabel(e))}getElectronAccelerator(){return this._parts.length>1?null:n.ElectronAcceleratorLabelProvider.toLabel(this._os,this._parts,e=>this._getElectronAccelerator(e))}getUserSettingsLabel(){return n.UserSettingsLabelProvider.toLabel(this._os,this._parts,e=>this._getUserSettingsLabel(e))}isWYSIWYG(){return this._parts.every(e=>this._isWYSIWYG(e))}isChord(){return this._parts.length>1}getParts(){return this._parts.map(e=>this._getPart(e))}_getPart(e){return new r.ResolvedKeybindingPart(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._getLabel(e),this._getAriaLabel(e))}getDispatchParts(){return this._parts.map(e=>this._getDispatchPart(e))}}t.BaseResolvedKeybinding=o}),define(t[110],i([0,1,52,109]),function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends n.BaseResolvedKeybinding{constructor(e,t){super(t,e.parts)}
_keyCodeToUILabel(e){if(2===this._os)switch(e){case 15:return"";case 16:return"";case 17:return"";case 18:return""}return i.KeyCodeUtils.toString(e)}_getLabel(e){return e.isDuplicateModifierCase()?"":this._keyCodeToUILabel(e.keyCode)}_getAriaLabel(e){return e.isDuplicateModifierCase()?"":i.KeyCodeUtils.toString(e.keyCode)}_keyCodeToElectronAccelerator(e){if(e>=93&&e<=108)return null;switch(e){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return i.KeyCodeUtils.toString(e)}_getElectronAccelerator(e){return e.isDuplicateModifierCase()?null:this._keyCodeToElectronAccelerator(e.keyCode)}_getUserSettingsLabel(e){if(e.isDuplicateModifierCase())return"";const t=i.KeyCodeUtils.toUserSettingsUS(e.keyCode);return t?t.toLowerCase():t}_isWYSIWYG(){return!0}_getDispatchPart(e){return r.getDispatchStr(e)}static getDispatchStr(e){if(e.isModifierKey())return null;let t="";return e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),e.metaKey&&(t+="meta+"),
t+=i.KeyCodeUtils.toString(e.keyCode)}}t.USLayoutResolvedKeybinding=r}),define(t[111],i([0,1,3,4,12]),function(e,t,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ILifecycleService=n.createDecorator("lifecycleService");!function(e){e[e.CLOSE=1]="CLOSE",e[e.QUIT=2]="QUIT",e[e.RELOAD=3]="RELOAD",e[e.LOAD=4]="LOAD"}(t.ShutdownReason||(t.ShutdownReason={}));!function(e){e[e.NewWindow=1]="NewWindow",e[e.ReloadedWindow=3]="ReloadedWindow",e[e.ReopenedWindow=4]="ReopenedWindow"}(t.StartupKind||(t.StartupKind={})),t.StartupKindToString=function(e){switch(e){case 1:return"NewWindow";case 3:return"ReloadedWindow";case 4:return"ReopenedWindow"}};!function(e){e[e.Starting=1]="Starting",e[e.Ready=2]="Ready",e[e.Restored=3]="Restored",e[e.Eventually=4]="Eventually"}(t.LifecyclePhase||(t.LifecyclePhase={})),t.LifecyclePhaseToString=function(e){switch(e){case 1:return"Starting";case 2:return"Ready";case 3:return"Restored";case 4:return"Eventually"}},t.NullLifecycleService={_serviceBrand:null,
onBeforeShutdown:i.Event.None,onWillShutdown:i.Event.None,onShutdown:i.Event.None,phase:3,startupKind:1,when:()=>Promise.resolve()},t.handleVetos=function(e,t){if(0===e.length)return Promise.resolve(!1);const i=[];let n=!1;for(let o of e){if(!0===o)return Promise.resolve(!0);r.isThenable(o)&&i.push(o.then(e=>{e&&(n=!0)},e=>{t(e),n=!0}))}return Promise.all(i).then(()=>n)}}),define(t[7],i([0,1,4,6,2,3]),function(e,t,i,n,r,o){"use strict";function s(){return(new Date).toISOString()}Object.defineProperty(t,"__esModule",{value:!0}),t.ILogService=i.createDecorator("logService");var a;!function(e){e[e.Trace=0]="Trace",e[e.Debug=1]="Debug",e[e.Info=2]="Info",e[e.Warning=3]="Warning",e[e.Error=4]="Error",e[e.Critical=5]="Critical",e[e.Off=6]="Off"}(a=t.LogLevel||(t.LogLevel={})),t.DEFAULT_LOG_LEVEL=a.Info;class c extends n.Disposable{constructor(){super(...arguments),this.level=t.DEFAULT_LOG_LEVEL,this._onDidChangeLogLevel=this._register(new o.Emitter),this.onDidChangeLogLevel=this._onDidChangeLogLevel.event}
setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}}t.AbstractLogService=c;class l extends c{constructor(e=t.DEFAULT_LOG_LEVEL){super(),this.setLevel(e),this.useColors=!r.isWindows}trace(e,...t){this.getLevel()<=a.Trace&&(this.useColors?console.log(`[90m[main ${s()}][0m`,e,...t):console.log(`[main ${s()}]`,e,...t))}debug(e,...t){this.getLevel()<=a.Debug&&(this.useColors?console.log(`[90m[main ${s()}][0m`,e,...t):console.log(`[main ${s()}]`,e,...t))}info(e,...t){this.getLevel()<=a.Info&&(this.useColors?console.log(`[90m[main ${s()}][0m`,e,...t):console.log(`[main ${s()}]`,e,...t))}warn(e,...t){this.getLevel()<=a.Warning&&(this.useColors?console.warn(`[93m[main ${s()}][0m`,e,...t):console.warn(`[main ${s()}]`,e,...t))}error(e,...t){this.getLevel()<=a.Error&&(this.useColors?console.error(`[91m[main ${s()}][0m`,e,...t):console.error(`[main ${s()}]`,e,...t))}critical(e,...t){
this.getLevel()<=a.Critical&&(this.useColors?console.error(`[90m[main ${s()}][0m`,e,...t):console.error(`[main ${s()}]`,e,...t))}dispose(){}}t.ConsoleLogMainService=l;class u extends c{constructor(e=t.DEFAULT_LOG_LEVEL){super(),this.setLevel(e)}trace(e,...t){this.getLevel()<=a.Trace&&console.log("%cTRACE","color: #888",e,...t)}debug(e,...t){this.getLevel()<=a.Debug&&console.log("%cDEBUG","background: #eee; color: #888",e,...t)}info(e,...t){this.getLevel()<=a.Info&&console.log("%c INFO","color: #33f",e,...t)}warn(e,...t){this.getLevel()<=a.Warning&&console.log("%c WARN","color: #993",e,...t)}error(e,...t){this.getLevel()<=a.Error&&console.log("%c  ERR","color: #f33",e,...t)}critical(e,...t){this.getLevel()<=a.Critical&&console.log("%cCRITI","background: #f33; color: white",e,...t)}dispose(){}}t.ConsoleLogService=u;class d extends c{constructor(e){super(),this.logServices=e,e.length&&this.setLevel(e[0].getLevel())}setLevel(e){for(const t of this.logServices)t.setLevel(e);super.setLevel(e)}trace(e,...t){
for(const i of this.logServices)i.trace(e,...t)}debug(e,...t){for(const i of this.logServices)i.debug(e,...t)}info(e,...t){for(const i of this.logServices)i.info(e,...t)}warn(e,...t){for(const i of this.logServices)i.warn(e,...t)}error(e,...t){for(const i of this.logServices)i.error(e,...t)}critical(e,...t){for(const i of this.logServices)i.critical(e,...t)}dispose(){for(const e of this.logServices)e.dispose()}}t.MultiplexLogService=d;class h extends n.Disposable{constructor(e){super(),this.logService=e,this._register(e)}get onDidChangeLogLevel(){return this.logService.onDidChangeLogLevel}setLevel(e){this.logService.setLevel(e)}getLevel(){return this.logService.getLevel()}trace(e,...t){this.logService.trace(e,...t)}debug(e,...t){this.logService.debug(e,...t)}info(e,...t){this.logService.info(e,...t)}warn(e,...t){this.logService.warn(e,...t)}error(e,...t){this.logService.error(e,...t)}critical(e,...t){this.logService.critical(e,...t)}}t.DelegatedLogService=h;class f{constructor(){
this.onDidChangeLogLevel=(new o.Emitter).event}setLevel(e){}getLevel(){return a.Info}trace(e,...t){}debug(e,...t){}info(e,...t){}warn(e,...t){}error(e,...t){}critical(e,...t){}dispose(){}}t.NullLogService=f,t.getLogLevel=function(e){if(e.verbose)return a.Trace;if("string"==typeof e.args.log)switch(e.args.log.toLowerCase()){case"trace":return a.Trace;case"debug":return a.Debug;case"info":return a.Info;case"warn":return a.Warning;case"error":return a.Error;case"critical":return a.Critical;case"off":return a.Off}return t.DEFAULT_LOG_LEVEL}}),define(t[113],i([0,1,7]),function(e,t,i){"use strict";function n(e,t){switch(t){case i.LogLevel.Trace:return e.trace;case i.LogLevel.Debug:return e.debug;case i.LogLevel.Info:return e.info;case i.LogLevel.Warning:return e.warn;case i.LogLevel.Error:return e.error;case i.LogLevel.Critical:return e.critical;default:throw new Error("Invalid log level")}}Object.defineProperty(t,"__esModule",{value:!0});class r extends i.AbstractLogService{constructor(){super(),this.buffer=[],
this._logger=void 0,this._register(this.onDidChangeLogLevel(e=>{this._logger&&this._logger.setLevel(e)}))}set logger(e){this._logger=e;for(const{level:t,args:i}of this.buffer){n(e,t).apply(e,i)}this.buffer=[]}_log(e,t){if(this._logger){n(this._logger,e).apply(this._logger,t)}else this.getLevel()<=e&&this.buffer.push({level:e,args:t})}trace(){this._log(i.LogLevel.Trace,arguments)}debug(){this._log(i.LogLevel.Debug,arguments)}info(){this._log(i.LogLevel.Info,arguments)}warn(){this._log(i.LogLevel.Warning,arguments)}error(){this._log(i.LogLevel.Error,arguments)}critical(){this._log(i.LogLevel.Critical,arguments)}dispose(){this._logger&&this._logger.dispose()}}t.BufferLogService=r}),define(t[114],i([0,1,7,3]),function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e){this.service=e,this.onDidChangeLogLevel=n.Event.buffer(e.onDidChangeLogLevel,!0)}listen(e,t){switch(t){case"onDidChangeLogLevel":return this.onDidChangeLogLevel}throw new Error(`Event not found: ${t}`)}
call(e,t,i){switch(t){case"setLevel":return this.service.setLevel(i),Promise.resolve()}throw new Error(`Call not found: ${t}`)}}t.LogLevelSetterChannel=r;class o{constructor(e){this.channel=e}get onDidChangeLogLevel(){return this.channel.listen("onDidChangeLogLevel")}setLevel(e){this.channel.call("setLevel",e)}}t.LogLevelSetterChannelClient=o;class s extends i.DelegatedLogService{constructor(e,t){super(t),this.master=e,this._register(e.onDidChangeLogLevel(e=>t.setLevel(e)))}setLevel(e){this.master.setLevel(e)}}t.FollowerLogService=s}),define(t[115],i([0,1,5,7]),function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSpdLogService=function(t,o,s){try{const n=e.__$__nodeRequire("spdlog");n.setAsyncMode(8192,500);const a=i.join(s,`${t}.log`),c=new n.RotatingLogger(t,a,5242880,6);return c.setLevel(0),new r(c,o)}catch(e){console.error(e)}return new n.NullLogService},t.createRotatingLogger=function(t,i,n,r){return e.__$__nodeRequire("spdlog").createRotatingLogger(t,i,n,r)}
;class r extends n.AbstractLogService{constructor(e,t=n.LogLevel.Error){super(),this.logger=e,this.setLevel(t)}trace(){this.getLevel()<=n.LogLevel.Trace&&this.logger.trace(this.format(arguments))}debug(){this.getLevel()<=n.LogLevel.Debug&&this.logger.debug(this.format(arguments))}info(){this.getLevel()<=n.LogLevel.Info&&this.logger.info(this.format(arguments))}warn(){this.getLevel()<=n.LogLevel.Warning&&this.logger.warn(this.format(arguments))}error(){if(this.getLevel()<=n.LogLevel.Error){const e=arguments[0];if(e instanceof Error){const t=Array.prototype.slice.call(arguments);t[0]=e.stack,this.logger.error(this.format(t))}else this.logger.error(this.format(arguments))}}critical(){this.getLevel()<=n.LogLevel.Critical&&this.logger.critical(this.format(arguments))}dispose(){this.logger.drop()}format(e){let t="";for(let i=0;i<e.length;i++){let n=e[i];if("object"==typeof n)try{n=JSON.stringify(n)}catch(e){}t+=(i>0?" ":"")+n}return t}}}),define(t[66],i([0,1,4]),function(e,t,i){"use strict";function n(e){
return void 0!==e.submenu}function r(e){return"vscode.menubar.separator"===e.id}function o(e){return void 0!==e.uri}Object.defineProperty(t,"__esModule",{value:!0}),t.IMenubarService=i.createDecorator("menubarService"),t.isMenubarMenuItemSubmenu=n,t.isMenubarMenuItemSeparator=r,t.isMenubarMenuItemUriAction=o,t.isMenubarMenuItemAction=function(e){return!n(e)&&!r(e)&&!o(e)}}),define(t[117],i([0,1]),function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(e){this.service=e}listen(e,t){throw new Error(`Event not found: ${t}`)}call(e,t,i){switch(t){case"updateMenubar":return this.service.updateMenubar(i[0],i[1])}throw new Error(`Call not found: ${t}`)}}t.MenubarChannel=i}),define(t[49],i([0,1,5,44]),function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i.dirname(n.getPathFromAmdModule(e,"")),o=i.join(r,"package.json");t.default=e.__$__nodeRequire(o)}),define(t[119],i([0,1,81,49]),function(e,t,i,n){"use strict";function r(e){
return"*"===(e=e.trim())||l.test(e)}function o(e){if(!r(e))return null;if("*"===(e=e.trim()))return{hasCaret:!1,hasGreaterEquals:!1,majorBase:0,majorMustEqual:!1,minorBase:0,minorMustEqual:!1,patchBase:0,patchMustEqual:!1,preRelease:null};let t=e.match(l);return t?{hasCaret:"^"===t[1],hasGreaterEquals:">="===t[1],majorBase:"x"===t[2]?0:parseInt(t[2],10),majorMustEqual:"x"!==t[2],minorBase:"x"===t[4]?0:parseInt(t[4],10),minorMustEqual:"x"!==t[4],patchBase:"x"===t[6]?0:parseInt(t[6],10),patchMustEqual:"x"!==t[6],preRelease:t[8]||null}:null}function s(e){if(!e)return null;let t=e.majorBase,i=e.majorMustEqual,n=e.minorBase,r=e.minorMustEqual,o=e.patchBase,s=e.patchMustEqual;return e.hasCaret&&(0===t?s=!1:(r=!1,s=!1)),{majorBase:t,majorMustEqual:i,minorBase:n,minorMustEqual:r,patchBase:o,patchMustEqual:s,isMinimum:e.hasGreaterEquals}}function a(e,t){let i;i="string"==typeof e?s(o(e)):e;let n;if(n="string"==typeof t?s(o(t)):t,!i||!n)return!1
;let r=i.majorBase,a=i.minorBase,c=i.patchBase,l=n.majorBase,u=n.minorBase,d=n.patchBase,h=n.majorMustEqual,f=n.minorMustEqual,p=n.patchMustEqual;return n.isMinimum?r>l||!(r<l)&&(a>u||!(a<u)&&c>=d):(1!==r||0!==l||h&&f&&p||(l=1,u=0,d=0,h=!0,f=!1,p=!1),!(r<l)&&(r>l?!h:!(a<u)&&(a>u?!f:!(c<d)&&(!(c>d)||!p))))}function c(e,t,n=[]){let r=s(o(t));if(!r)return n.push(i.localize(0,null,t)),!1;if(0===r.majorBase){if(!r.majorMustEqual||!r.minorMustEqual)return n.push(i.localize(1,null,t)),!1}else if(!r.majorMustEqual)return n.push(i.localize(2,null,t)),!1;return!!a(e,r)||(n.push(i.localize(3,null,e,t)),!1)}Object.defineProperty(t,"__esModule",{value:!0});const l=/^(\^|>=)?((\d+)|x)\.((\d+)|x)\.((\d+)|x)(\-.*)?$/;t.isValidVersionStr=r,t.parseVersion=o,t.normalizeVersion=s,t.isValidVersion=a,t.isValidExtensionVersion=function(e,t,i){return!(!t.isBuiltin&&void 0!==t.main)||c(e,t.engines.vscode,i)},t.isEngineValid=function(e){return"*"===e||c(n.default.version,e)},t.isVersionValid=c}),
define(t[20],i([0,1,5,44]),function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i.dirname(n.getPathFromAmdModule(e,"")),o=i.join(r,"product.json"),s=e.__$__nodeRequire(o);process.env.VSCODE_DEV&&(s.nameShort+=" Dev",s.nameLong+=" Dev",s.dataFolderName+="-dev"),t.default=s}),define(t[121],i([0,1,23,45,15,5,171,20,34]),function(e,t,i,r,o,s,a,c,l){"use strict";function u(e,t,c){return n(this,void 0,void 0,function*(){const u=d.getFromProduct();if(!u)return void console.error(a.localize(0,null));const h=yield e.getLogsPath();if(yield function(e,t){if((t.args["upload-logs"]||"").toLowerCase()==="iConfirmLogsUpload".toLowerCase())return!0;{const t=a.localize(3,null)+"\n\n"+a.localize(4,null,e)+"\n\n"+a.localize(5,null)+"\n\n"+a.localize(6,null,"iConfirmLogsUpload");return console.log(t),!1}}(h,c)){console.log(a.localize(1,null));const e=yield function(e,t,i){return n(this,void 0,void 0,function*(){const n=setInterval(()=>console.log("."),5e3);let r;try{r=yield i.request({
url:e.url,type:"POST",data:Buffer.from(o.readFileSync(t)).toString("base64"),headers:{"Content-Type":"application/zip"}},l.CancellationToken.None)}catch(e){throw clearInterval(n),console.log(a.localize(7,null,e)),e}return new Promise((e,t)=>{const i=[];r.stream.on("data",e=>{i.push(e)}),r.stream.on("end",()=>{clearInterval(n);try{const n=Buffer.concat(i).toString("utf-8");if(200===r.res.statusCode)e(JSON.parse(n));else{const e=a.localize(8,null,r.res.statusCode,n);console.log(e),t(new Error(e))}}catch(e){console.log(a.localize(9,null)),t(e)}})})})}(u,yield function(e){const t=o.mkdtempSync(s.join(i.tmpdir(),"vscode-log-upload")),n=s.join(t,"logs.zip");return new Promise((o,c)=>{!function(e,t,n,o){switch(i.platform()){case"win32":const a=s.join(n,"sub");return r.execFile("powershell",["-Command",`[System.IO.Directory]::CreateDirectory("${a}"); Copy-Item -recurse "${e}" "${a}"; Compress-Archive -Path "${a}" -DestinationPath "${t}"`],{cwd:e},o);default:r.execFile("zip",["-r",t,"."],{cwd:e},o)}}(e,n,t,(e,t,i)=>{
e?(console.error(a.localize(10,null,e.message)),c(e)):o(n)})})}(h),t);console.log(a.localize(2,null,e.blob_id))}})}Object.defineProperty(t,"__esModule",{value:!0});class d{constructor(e){this.url=e}static getFromProduct(){const e=c.default.logUploaderUrl;return e?new d(e):void 0}}t.uploadLogs=u}),define(t[68],i([0,1,96,20,49,23,63,19,2,11,5,8,4,15]),function(e,t,i,r,o,s,a,c,l,u,d,h,f,p){"use strict";function g(e){const t=[];return e.forEach((e,i)=>t.push({name:i,count:e})),t.sort((e,t)=>t.count-e.count)}function m(e,t){function i(e,t,r,o){let s=[];p.readdir(e,(c,l)=>n(this,void 0,void 0,function*(){if(c)return o(s);let n=l.length;if(0===n)return o(s);for(const c of l){if(r.maxReached)return o(s);p.stat(d.join(e,c),(l,u)=>{if(l){if(0==--n)return o(s)}else u.isDirectory()?-1===t.indexOf(c)?i(d.join(e,c),t,r,e=>{if(s=s.concat(e),0==--n)return o(s)}):0==--n&&o(s):(r.count>=a&&(r.maxReached=!0),r.count++,s.push(c),0==--n&&o(s))})}}))}const r=[{tag:"grunt.js",pattern:/^gruntfile\.js$/i},{tag:"gulp.js",
pattern:/^gulpfile\.js$/i},{tag:"tsconfig.json",pattern:/^tsconfig\.json$/i},{tag:"package.json",pattern:/^package\.json$/i},{tag:"jsconfig.json",pattern:/^jsconfig\.json$/i},{tag:"tslint.json",pattern:/^tslint\.json$/i},{tag:"eslint.json",pattern:/^eslint\.json$/i},{tag:"tasks.json",pattern:/^tasks\.json$/i},{tag:"launch.json",pattern:/^launch\.json$/i},{tag:"settings.json",pattern:/^settings\.json$/i},{tag:"webpack.config.js",pattern:/^webpack\.config\.js$/i},{tag:"project.json",pattern:/^project\.json$/i},{tag:"makefile",pattern:/^makefile$/i},{tag:"sln",pattern:/^.+\.sln$/i},{tag:"csproj",pattern:/^.+\.csproj$/i},{tag:"cmake",pattern:/^.+\.cmake$/i}],o=new Map,s=new Map,a=2e4,c={count:0,maxReached:!1};return new Promise((a,l)=>{i(e,t,c,e=>n(this,void 0,void 0,function*(){e.forEach(e=>{if(e.lastIndexOf(".")>=0){const t=e.split(".").pop();t&&(e=>{o.has(e)?o.set(e,o.get(e)+1):o.set(e,1)})(t)}(e=>{for(const t of r)t.pattern.test(e)&&(s.has(t.tag)?s.set(t.tag,s.get(t.tag)+1):s.set(t.tag,1))})(e)}),a({
configFiles:g(s),fileTypes:g(o),fileCount:c.count,maxFilesReached:c.maxReached})}))})}Object.defineProperty(t,"__esModule",{value:!0}),t.ID="diagnosticsService",t.IDiagnosticsService=f.createDecorator(t.ID);class v{formatEnvironment(e){const t=1073741824,i=[];i.push(`Version:          ${o.default.name} ${o.default.version} (${r.default.commit||"Commit unknown"}, ${r.default.date||"Date unknown"})`),i.push(`OS Version:       ${s.type()} ${s.arch()} ${s.release()}`);const n=s.cpus();return n&&n.length>0&&i.push(`CPUs:             ${n[0].model} (${n.length} x ${n[0].speed})`),i.push(`Memory (System):  ${(s.totalmem()/t).toFixed(2)}GB (${(s.freemem()/t).toFixed(2)}GB free)`),l.isWindows||i.push(`Load (avg):       ${s.loadavg().map(e=>Math.round(e)).join(", ")}`),i.push(`VM:               ${Math.round(100*a.virtualMachineHint.value())}%`),i.push(`Screen Reader:    ${u.app.isAccessibilitySupportEnabled()?"yes":"no"}`),i.push(`Process Argv:     ${e.mainArguments.join(" ")}`),
i.push(`GPU Status:       ${this.expandGPUFeatures()}`),i.join("\n")}getPerformanceInfo(e){return i.listProcesses(e.mainPID).then(t=>{const i=[],r=[];return e.windows.some(e=>e.folderURIs&&e.folderURIs.length>0)&&e.windows.forEach(e=>{0!==e.folderURIs.length&&(i.push(`|  Window (${e.title})`),e.folderURIs.forEach(e=>{const t=h.URI.revive(e);if("file"===t.scheme){const e=t.fsPath;r.push(m(e,["node_modules",".git"]).then(t=>n(this,void 0,void 0,function*(){let n=`${t.fileCount} files`;t.maxFilesReached&&(n=`more than ${n}`),i.push(`|    Folder (${d.basename(e)}): ${n}`),i.push(this.formatWorkspaceStats(t))})))}else i.push(`|    Folder (${t.toString()}): RPerformance stats not available.`)}))}),Promise.all(r).then(()=>({processInfo:this.formatProcessList(e,t),workspaceInfo:i.join("\n")})).catch(i=>({processInfo:this.formatProcessList(e,t),workspaceInfo:`Unable to calculate workspace stats: ${i}`}))})}getSystemInfo(e){const t=1073741824,i={
"Memory (System)":`${(s.totalmem()/t).toFixed(2)}GB (${(s.freemem()/t).toFixed(2)}GB free)`,VM:`${Math.round(100*a.virtualMachineHint.value())}%`,"Screen Reader":`${u.app.isAccessibilitySupportEnabled()?"yes":"no"}`,"Process Argv":`${e.mainArguments.join(" ")}`,"GPU Status":u.app.getGPUFeatureStatus()},n=s.cpus();return n&&n.length>0&&(i.CPUs=`${n[0].model} (${n.length} x ${n[0].speed})`),l.isWindows||(i["Load (avg)"]=`${s.loadavg().map(e=>Math.round(e)).join(", ")}`),i}getDiagnostics(e){const t=[];return i.listProcesses(e.mainPID).then(i=>{t.push(""),t.push(this.formatEnvironment(e)),t.push(""),t.push(this.formatProcessList(e,i));const r=[];return e.windows.some(e=>e.folderURIs&&e.folderURIs.length>0)&&(t.push(""),t.push("Workspace Stats: "),e.windows.forEach(e=>{0!==e.folderURIs.length&&(t.push(`|  Window (${e.title})`),e.folderURIs.forEach(e=>{const i=h.URI.revive(e);if("file"===i.scheme){const e=i.fsPath;r.push(m(e,["node_modules",".git"]).then(i=>n(this,void 0,void 0,function*(){
let n=`${i.fileCount} files`;i.maxFilesReached&&(n=`more than ${n}`),t.push(`|    Folder (${d.basename(e)}): ${n}`),t.push(this.formatWorkspaceStats(i))})).catch(i=>{t.push(`|      Error: Unable to collect workspace stats for folder ${e} (${i.toString()})`)}))}else t.push(`|    Folder (${i.toString()}): Workspace stats not available.`)}))})),Promise.all(r).then(()=>(t.push(""),t.push(""),t.join("\n")))})}formatWorkspaceStats(e){const t=[];let i=0;const n=(e,n)=>{const o=` ${e}(${n})`;i+o.length>60?(t.push(r),i=(r="|                 ").length):i+=o.length,r+=o};let r="|      File types:";let o=e.fileTypes.length>10?10:e.fileTypes.length;for(let t=0;t<o;t++){const i=e.fileTypes[t];n(i.name,i.count)}return t.push(r),e.configFiles.length>=0&&(r="|      Conf files:",i=0,e.configFiles.forEach(e=>{n(e.name,e.count)}),t.push(r)),t.join("\n")}expandGPUFeatures(){const e=u.app.getGPUFeatureStatus(),t=Math.max(...Object.keys(e).map(e=>e.length))
;return Object.keys(e).map(i=>`${i}:  ${c.repeat(" ",t-i.length)}  ${e[i]}`).join("\n                  ")}formatProcessList(e,t){const i=new Map;e.windows.forEach(e=>i.set(e.pid,e.title));const n=[];return n.push("CPU %\tMem MB\t   PID\tProcess"),t&&this.formatProcessItem(i,n,t,0),n.join("\n")}formatProcessItem(e,t,i,n){let o;0===n?o=`${r.default.applicationName} main`:(o=`${c.repeat("  ",n)} ${i.name}`,"window"===i.name&&(o=`${o} (${e.get(i.pid)})`));const a="win32"===process.platform?i.mem:s.totalmem()*(i.mem/100);t.push(`${c.pad(Number(i.load.toFixed(0)),5," ")}\t${c.pad(Number((a/1048576).toFixed(0)),6," ")}\t${c.pad(Number(i.pid.toFixed(0)),6," ")}\t${o}`),Array.isArray(i.children)&&i.children.forEach(i=>this.formatProcessItem(e,t,i,n+1))}}t.DiagnosticsService=v});var o=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n
;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};define(t[123],i([0,1,59,92,23,5,53,49,20,112,2,44,8]),function(e,t,i,n,r,s,a,c,l,u,d,h,f){"use strict";function p(e,t){return d.isWindows?function(e,t){return`\\\\.\\pipe\\${i.createHash("md5").update(e).digest("hex")}-${c.default.version}-${t}-sock`}(e,t):function(e,t){if(S){const n=i.createHash("md5").update(e).digest("hex").substr(0,8);return s.join(S,`vscode-${n}-${c.default.version}-${t}.sock`)}return s.join(e,`${c.default.version}-${t}.sock`)}(e,t)}function g(e,t){return v(e["inspect-extensions"],e["inspect-brk-extensions"],5870,t,e.debugId)}function m(e,t){return v(e["inspect-search"],e["inspect-brk-search"],5876,t)}function v(e,t,i,n,r){const o=t||e,s=Number(o)||(n?null:i);return{port:s,break:!!s&&Boolean(!!t),debugId:r}}function w(e,t){if(!e)return;const i=s.resolve(e)
;return s.normalize(e)===i?i:s.resolve(t.env.VSCODE_CWD||t.cwd(),e)}function y(e,t){return w(e["user-data-dir"],t)||s.resolve(n.getDefaultUserDataPath(t.platform))}Object.defineProperty(t,"__esModule",{value:!0});const S=process.env.XDG_RUNTIME_DIR;class b{constructor(e,t){if(this._args=e,this._execPath=t,!process.env.VSCODE_LOGS){const e=u.toLocalISOString(new Date).replace(/-|:|\.\d+Z$/g,"");process.env.VSCODE_LOGS=s.join(this.userDataPath,"logs",e)}this.logsPath=process.env.VSCODE_LOGS}get args(){return this._args}get appRoot(){return s.dirname(h.getPathFromAmdModule(e,""))}get execPath(){return this._execPath}get cliPath(){return function(e,t,i){return d.isWindows?i?s.join(s.dirname(e),"bin",`${l.default.applicationName}.cmd`):s.join(t,"scripts","code-cli.bat"):d.isLinux?i?s.join(s.dirname(e),"bin",`${l.default.applicationName}`):s.join(t,"scripts","code-cli.sh"):i?s.join(t,"bin","code"):s.join(t,"scripts","code-cli.sh")}(this.execPath,this.appRoot,this.isBuilt)}get userHome(){return r.homedir()}
get userDataPath(){const e=process.env.VSCODE_PORTABLE;return e?s.join(e,"user-data"):y(this._args,process)}get appNameLong(){return l.default.nameLong}get appQuality(){return l.default.quality}get appSettingsHome(){return s.join(this.userDataPath,"User")}get appSettingsPath(){return s.join(this.appSettingsHome,"settings.json")}get globalStorageHome(){return s.join(this.appSettingsHome,"globalStorage")}get workspaceStorageHome(){return s.join(this.appSettingsHome,"workspaceStorage")}get settingsSearchBuildId(){return l.default.settingsSearchBuildId}get settingsSearchUrl(){return l.default.settingsSearchUrl}get appKeybindingsPath(){return s.join(this.appSettingsHome,"keybindings.json")}get isExtensionDevelopment(){return!!this._args.extensionDevelopmentPath}get backupHome(){return s.join(this.userDataPath,"Backups")}get backupWorkspacesPath(){return s.join(this.backupHome,"workspaces.json")}get untitledWorkspacesHome(){return f.URI.file(s.join(this.userDataPath,"Workspaces"))}get installSourcePath(){
return s.join(this.userDataPath,"installSource")}get builtinExtensionsPath(){const t=w(this._args["builtin-extensions-dir"],process);return t||s.normalize(s.join(h.getPathFromAmdModule(e,""),"..","extensions"))}get extensionsPath(){const e=w(this._args["extensions-dir"],process);if(e)return e;const t=process.env.VSCODE_EXTENSIONS;if(t)return t;const i=process.env.VSCODE_PORTABLE;return i?s.join(i,"extensions"):s.join(this.userHome,l.default.dataFolderName,"extensions")}get extensionDevelopmentLocationURI(){const e=this._args.extensionDevelopmentPath;if(e)return/^[^:/?#]+?:\/\//.test(e)?f.URI.parse(e):f.URI.file(s.normalize(e))}get extensionTestsLocationURI(){const e=this._args.extensionTestsPath;if(e)return/^[^:/?#]+?:\/\//.test(e)?f.URI.parse(e):f.URI.file(s.normalize(e))}get disableExtensions(){if(this._args["disable-extensions"])return!0;const e=this._args["disable-extension"];if(e){if("string"==typeof e)return[e];if(Array.isArray(e)&&e.length>0)return e}return!1}get skipGettingStarted(){
return!!this._args["skip-getting-started"]}get skipReleaseNotes(){return!!this._args["skip-release-notes"]}get skipAddToRecentlyOpened(){return!!this._args["skip-add-to-recently-opened"]}get debugExtensionHost(){return g(this._args,this.isBuilt)}get debugSearch(){return m(this._args,this.isBuilt)}get isBuilt(){return!process.env.VSCODE_DEV}get verbose(){return!!this._args.verbose}get log(){return this._args.log}get wait(){return!!this._args.wait}get logExtensionHostCommunication(){return!!this._args.logExtensionHostCommunication}get status(){return!!this._args.status}get mainIPCHandle(){return p(this.userDataPath,"main")}get sharedIPCHandle(){return p(this.userDataPath,"shared")}get nodeCachedDataDir(){return process.env.VSCODE_NODE_CACHED_DATA_DIR||void 0}get disableUpdates(){return!!this._args["disable-updates"]}get disableCrashReporter(){return!!this._args["disable-crash-reporter"]}get driverHandle(){return this._args.driver}get driverVerbose(){return!!this._args["driver-verbose"]}}
o([a.memoize],b.prototype,"appRoot",null),o([a.memoize],b.prototype,"cliPath",null),o([a.memoize],b.prototype,"userHome",null),o([a.memoize],b.prototype,"userDataPath",null),o([a.memoize],b.prototype,"appSettingsHome",null),o([a.memoize],b.prototype,"appSettingsPath",null),o([a.memoize],b.prototype,"globalStorageHome",null),o([a.memoize],b.prototype,"workspaceStorageHome",null),o([a.memoize],b.prototype,"settingsSearchBuildId",null),o([a.memoize],b.prototype,"settingsSearchUrl",null),o([a.memoize],b.prototype,"appKeybindingsPath",null),o([a.memoize],b.prototype,"isExtensionDevelopment",null),o([a.memoize],b.prototype,"backupHome",null),o([a.memoize],b.prototype,"backupWorkspacesPath",null),o([a.memoize],b.prototype,"untitledWorkspacesHome",null),o([a.memoize],b.prototype,"installSourcePath",null),o([a.memoize],b.prototype,"builtinExtensionsPath",null),o([a.memoize],b.prototype,"extensionsPath",null),o([a.memoize],b.prototype,"extensionDevelopmentLocationURI",null),
o([a.memoize],b.prototype,"extensionTestsLocationURI",null),o([a.memoize],b.prototype,"debugExtensionHost",null),o([a.memoize],b.prototype,"debugSearch",null),o([a.memoize],b.prototype,"mainIPCHandle",null),o([a.memoize],b.prototype,"sharedIPCHandle",null),o([a.memoize],b.prototype,"nodeCachedDataDir",null),t.EnvironmentService=b,t.parseExtensionHostPort=g,t.parseSearchPort=m,t.parseDebugPort=v,t.parseUserDataDir=y}),define(t[36],i([0,1,17,103]),function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(){this.data={}}add(e,t){n.ok(i.isString(e)),n.ok(i.isObject(t)),n.ok(!this.data.hasOwnProperty(e),"There is already an extension with this id"),this.data[e]=t}knows(e){return this.data.hasOwnProperty(e)}as(e){return this.data[e]||null}}t.Registry=new r}),define(t[125],i([0,1,36,3]),function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Extensions={JSONContribution:"base.contributions.json"};class r{constructor(){
this._onDidChangeSchema=new n.Emitter,this.onDidChangeSchema=this._onDidChangeSchema.event,this.schemasById={}}registerSchema(e,t){this.schemasById[function(e){return e.length>0&&"#"===e.charAt(e.length-1)?e.substring(0,e.length-1):e}(e)]=t,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}getSchemaContributions(){return{schemas:this.schemasById}}}const o=new r;i.Registry.add(t.Extensions.JSONContribution,o)}),define(t[43],i([0,1,77,3,36,17,19,125]),function(e,t,i,n,r,o,s,a){"use strict";function c(e){switch(Array.isArray(e)?e[0]:e){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}function l(e){return t.OVERRIDE_PROPERTY_PATTERN.test(e)?i.localize(3,null,e):void 0!==g.getConfigurationProperties()[e]?i.localize(4,null,e):null}Object.defineProperty(t,"__esModule",{value:!0}),t.Extensions={Configuration:"base.contributions.configuration"};!function(e){
e[e.APPLICATION=1]="APPLICATION",e[e.WINDOW=2]="WINDOW",e[e.RESOURCE=3]="RESOURCE"}(t.ConfigurationScope||(t.ConfigurationScope={})),t.allSettings={properties:{},patternProperties:{}},t.applicationSettings={properties:{},patternProperties:{}},t.windowSettings={properties:{},patternProperties:{}},t.resourceSettings={properties:{},patternProperties:{}},t.editorConfigurationSchemaId="vscode://schemas/settings/editor";const u=r.Registry.as(a.Extensions.JSONContribution);class d{constructor(){this.overrideIdentifiers=[],this._onDidSchemaChange=new n.Emitter,this.onDidSchemaChange=this._onDidSchemaChange.event,this._onDidUpdateConfiguration=new n.Emitter,this.onDidUpdateConfiguration=this._onDidUpdateConfiguration.event,this.defaultOverridesConfigurationNode={id:"defaultOverrides",title:i.localize(0,null),properties:{}},this.configurationContributors=[this.defaultOverridesConfigurationNode],this.editorConfigurationSchema={properties:{},patternProperties:{},additionalProperties:!1,
errorMessage:"Unknown editor configuration setting"},this.configurationProperties={},this.excludedConfigurationProperties={},this.computeOverridePropertyPattern(),u.registerSchema(t.editorConfigurationSchemaId,this.editorConfigurationSchema)}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){const i=[];e.forEach(e=>{i.push(...this.validateAndRegisterProperties(e,t)),this.configurationContributors.push(e),this.registerJSONConfiguration(e),this.updateSchemaForOverrideSettingsConfiguration(e)}),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire(i)}deregisterConfigurations(e){const i=[],n=e=>{if(e.properties)for(const n in e.properties)switch(i.push(n),delete this.configurationProperties[n],delete this.editorConfigurationSchema.properties[n],delete t.allSettings.properties[n],e.properties[n].scope){case 1:delete t.applicationSettings.properties[n];break;case 2:delete t.windowSettings.properties[n];break;case 3:delete t.resourceSettings.properties[n]}
e.allOf&&e.allOf.forEach(e=>n(e))};for(const t of e){n(t);const e=this.configurationContributors.indexOf(t);-1!==e&&this.configurationContributors.splice(e,1)}u.registerSchema(t.editorConfigurationSchemaId,this.editorConfigurationSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire(i)}registerDefaultConfigurations(e){const n=[];for(const r of e)for(const e in r.defaults){const o=r.defaults[e];if(t.OVERRIDE_PROPERTY_PATTERN.test(e)&&"object"==typeof o){const r={type:"object",default:o,description:i.localize(1,null,e),$ref:t.editorConfigurationSchemaId};t.allSettings.properties[e]=r,this.defaultOverridesConfigurationNode.properties[e]=r,this.configurationProperties[e]=r,n.push(e)}}this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire(n)}deregisterDefaultConfigurations(e){const i=[];for(const n of e)for(const e in n.defaults)i.push(e),delete t.allSettings.properties[e],delete this.defaultOverridesConfigurationNode.properties[e],delete this.configurationProperties[e]
;this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire(i)}notifyConfigurationSchemaUpdated(...e){this._onDidSchemaChange.fire()}registerOverrideIdentifiers(e){this.overrideIdentifiers.push(...e),this.updateOverridePropertyPatternKey()}validateAndRegisterProperties(e,i=!0,n=2,r=!1){n=o.isUndefinedOrNull(e.scope)?n:e.scope,r=e.overridable||r;let s=[],a=e.properties;if(a)for(let e in a){let u;if(i&&(u=l(e))){console.warn(u),delete a[e];continue}let d=a[e],h=d.default;o.isUndefined(h)&&(d.default=c(d.type)),r&&(d.overridable=!0),t.OVERRIDE_PROPERTY_PATTERN.test(e)?d.scope=void 0:d.scope=o.isUndefinedOrNull(d.scope)?n:d.scope,!a[e].hasOwnProperty("included")||a[e].included?(this.configurationProperties[e]=a[e],s.push(e)):(this.excludedConfigurationProperties[e]=a[e],delete a[e])}let u=e.allOf;if(u)for(let e of u)s.push(...this.validateAndRegisterProperties(e,i,n,r));return s}getConfigurations(){return this.configurationContributors}getConfigurationProperties(){return this.configurationProperties}
getExcludedConfigurationProperties(){return this.excludedConfigurationProperties}registerJSONConfiguration(e){function i(e){let n=e.properties;if(n)for(const e in n)switch(t.allSettings.properties[e]=n[e],n[e].scope){case 1:t.applicationSettings.properties[e]=n[e];break;case 2:t.windowSettings.properties[e]=n[e];break;case 3:t.resourceSettings.properties[e]=n[e]}let r=e.allOf;r&&r.forEach(i)}i(e)}updateSchemaForOverrideSettingsConfiguration(e){e.id!==h&&(this.update(e),u.registerSchema(t.editorConfigurationSchemaId,this.editorConfigurationSchema))}updateOverridePropertyPatternKey(){let e=t.allSettings.patternProperties[this.overridePropertyPattern];e||(e={type:"object",description:i.localize(2,null),errorMessage:"Unknown Identifier. Use language identifiers",$ref:t.editorConfigurationSchemaId}),delete t.allSettings.patternProperties[this.overridePropertyPattern],delete t.applicationSettings.patternProperties[this.overridePropertyPattern],delete t.windowSettings.patternProperties[this.overridePropertyPattern],
delete t.resourceSettings.patternProperties[this.overridePropertyPattern],this.computeOverridePropertyPattern(),t.allSettings.patternProperties[this.overridePropertyPattern]=e,t.applicationSettings.patternProperties[this.overridePropertyPattern]=e,t.windowSettings.patternProperties[this.overridePropertyPattern]=e,t.resourceSettings.patternProperties[this.overridePropertyPattern]=e,this._onDidSchemaChange.fire()}update(e){let t=e.properties;if(t)for(let e in t)t[e].overridable&&(this.editorConfigurationSchema.properties[e]=this.getConfigurationProperties()[e]);let i=e.allOf;i&&i.forEach(e=>this.update(e))}computeOverridePropertyPattern(){this.overridePropertyPattern=this.overrideIdentifiers.length?p.replace("${0}",this.overrideIdentifiers.map(e=>s.createRegExp(e,!1).source).join("|")):f}}const h="override",f="\\[.*\\]$",p="\\[(${0})\\]$";t.OVERRIDE_PROPERTY_PATTERN=new RegExp(f),t.getDefaultValue=c;const g=new d;r.Registry.add(t.Extensions.Configuration,g),t.validateProperty=l,t.getScopes=function(){
const e={},t=g.getConfigurationProperties();for(const i of Object.keys(t))e[i]=t[i].scope;return e.launch=3,e.task=3,e}}),define(t[14],i([0,1,16,17,8,36,4,43]),function(e,t,i,n,r,o,s,a){"use strict";function c(e,t){const i=Object.create(null);for(let n in e)l(i,n,e[n],t);return i}function l(e,t,i,n){const r=t.split("."),o=r.pop();let s=e;for(let e=0;e<r.length;e++){let i=r[e],o=s[i];switch(typeof o){case"undefined":o=s[i]=Object.create(null);break;case"object":break;default:return void n(`Ignoring ${t} as ${r.slice(0,e+1).join(".")} is ${JSON.stringify(o)}`)}s=o}"object"==typeof s?s[o]=i:n(`Ignoring ${t} as ${r.join(".")} is ${JSON.stringify(s)}`)}function u(e,t){const i=t.shift();if(0!==t.length){if(-1!==Object.keys(e).indexOf(i)){const n=e[i];"object"!=typeof n||Array.isArray(n)||(u(n,t),0===Object.keys(n).length&&delete e[i])}}else delete e[i]}function d(e,t,i){const n=function(e,t){let i=e;for(const e of t){if("object"!=typeof i||null===i)return;i=i[e]}return i}(e,t.split("."));return void 0===n?i:n}
function h(e,t,i){Object.keys(t).forEach(r=>{r in e?n.isObject(e[r])&&n.isObject(t[r])?h(e[r],t[r],i):i&&(e[r]=t[r]):e[r]=t[r]})}function f(e){return e.substring(1,e.length-1)}Object.defineProperty(t,"__esModule",{value:!0}),t.IConfigurationService=s.createDecorator("configurationService"),t.isConfigurationOverrides=function(e){return e&&"object"==typeof e&&(!e.overrideIdentifier||"string"==typeof e.overrideIdentifier)&&(!e.resource||e.resource instanceof r.URI)};!function(e){e[e.USER=1]="USER",e[e.USER_LOCAL=2]="USER_LOCAL",e[e.USER_REMOTE=3]="USER_REMOTE",e[e.WORKSPACE=4]="WORKSPACE",e[e.WORKSPACE_FOLDER=5]="WORKSPACE_FOLDER",e[e.DEFAULT=6]="DEFAULT",e[e.MEMORY=7]="MEMORY"}(t.ConfigurationTarget||(t.ConfigurationTarget={})),t.ConfigurationTargetToString=function(e){switch(e){case 1:return"USER";case 2:return"USER_LOCAL";case 3:return"USER_REMOTE";case 4:return"WORKSPACE";case 5:return"WORKSPACE_FOLDER";case 6:return"DEFAULT";case 7:return"MEMORY"}},t.compare=function(e,t){
const n=t.keys.filter(t=>-1===e.keys.indexOf(t)),r=e.keys.filter(e=>-1===t.keys.indexOf(e)),o=[];for(const n of e.keys){const r=d(e.contents,n),s=d(t.contents,n);i.equals(r,s)||o.push(n)}return{added:n,removed:r,updated:o}},t.toOverrides=function(e,t){const i=[],n=o.Registry.as(a.Extensions.Configuration).getConfigurationProperties();for(const r of Object.keys(e))if(a.OVERRIDE_PROPERTY_PATTERN.test(r)){const o={};for(const t in e[r])n[t]&&n[t].overridable&&(o[t]=e[r][t]);i.push({identifiers:[f(r).trim()],contents:c(o,t)})}return i},t.toValuesTree=c,t.addToValueTree=l,t.removeFromValueTree=function(e,t){u(e,t.split("."))},t.getConfigurationValue=d,t.merge=h,t.getConfigurationKeys=function(){const e=o.Registry.as(a.Extensions.Configuration).getConfigurationProperties();return Object.keys(e)},t.getDefaultValues=function(){const e=Object.create(null),t=o.Registry.as(a.Extensions.Configuration).getConfigurationProperties();for(let i in t)l(e,i,t[i].default,e=>console.error(`Conflict in default settings: ${e}`))
;return e},t.overrideIdentifierFromKey=f,t.keyFromOverrideIdentifier=function(e){return`[${e}]`},t.getMigratedSettingValue=function(e,t,i){const n=e.inspect(t),r=e.inspect(i);return void 0!==n.user||void 0!==n.workspace||void 0!==n.workspaceFolder?n.value:void 0!==r.user||void 0!==r.workspace||void 0!==r.workspaceFolder?r.value:n.default}}),define(t[69],i([0,1,39,27,21,17,16,43,14]),function(e,t,i,n,r,o,s,a,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class l{constructor(e={},t=[],i=[]){this._contents=e,this._keys=t,this._overrides=i,this.isFrozen=!1}get contents(){return this.checkAndFreeze(this._contents)}get overrides(){return this.checkAndFreeze(this._overrides)}get keys(){return this.checkAndFreeze(this._keys)}isEmpty(){return 0===this._keys.length&&0===Object.keys(this._contents).length&&0===this._overrides.length}getValue(e){return e?c.getConfigurationValue(this.contents,e):this.contents}override(e){const t=this.getContentsForOverrideIdentifer(e)
;if(!t||"object"!=typeof t||!Object.keys(t).length)return this;let i={};for(const e of r.distinct([...Object.keys(this.contents),...Object.keys(t)])){let n=this.contents[e],r=t[e];r&&("object"==typeof n&&"object"==typeof r?(n=s.deepClone(n),this.mergeContents(n,r)):n=r),i[e]=n}return new l(i)}merge(...e){const t=s.deepClone(this.contents),i=s.deepClone(this.overrides),n=[...this.keys];for(const o of e){this.mergeContents(t,o.contents);for(const e of o.overrides){const[t]=i.filter(t=>r.equals(t.identifiers,e.identifiers));t?this.mergeContents(t.contents,e.contents):i.push(s.deepClone(e))}for(const e of o.keys)-1===n.indexOf(e)&&n.push(e)}return new l(t,n,i)}freeze(){return this.isFrozen=!0,this}mergeContents(e,t){for(const i of Object.keys(t))i in e&&o.isObject(e[i])&&o.isObject(t[i])?this.mergeContents(e[i],t[i]):e[i]=s.deepClone(t[i])}checkAndFreeze(e){return this.isFrozen&&!Object.isFrozen(e)?s.deepFreeze(e):e}getContentsForOverrideIdentifer(e){
for(const t of this.overrides)if(-1!==t.identifiers.indexOf(e))return t.contents;return null}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}setValue(e,t){this.addKey(e),c.addToValueTree(this.contents,e,t,e=>{throw new Error(e)})}removeValue(e){this.removeKey(e)&&c.removeFromValueTree(this.contents,e)}addKey(e){let t=this.keys.length;for(let i=0;i<t;i++)0===e.indexOf(this.keys[i])&&(t=i);this.keys.splice(t,1,e)}removeKey(e){let t=this.keys.indexOf(e);return-1!==t&&(this.keys.splice(t,1),!0)}}t.ConfigurationModel=l;class u extends l{constructor(){const e=c.getDefaultValues(),t=c.getConfigurationKeys(),i=[];for(const t of Object.keys(e))a.OVERRIDE_PROPERTY_PATTERN.test(t)&&i.push({identifiers:[c.overrideIdentifierFromKey(t).trim()],contents:c.toValuesTree(e[t],e=>console.error(`Conflict in default settings file: ${e}`))});super(e,t,i)}}t.DefaultConfigurationModel=u;class d{constructor(e){this._name=e,this._configurationModel=null,this._parseErrors=[]}get configurationModel(){
return this._configurationModel||new l}get errors(){return this._parseErrors}parse(e){if(e){const t=this.parseContent(e),i=this.parseRaw(t);this._configurationModel=new l(i.contents,i.keys,i.overrides)}}parseContent(e){function t(e){Array.isArray(o)?o.push(e):r&&(o[r]=e)}let n={},r=null,o=[],s=[],a=[],c={onObjectBegin:()=>{let e={};t(e),s.push(o),o=e,r=null},onObjectProperty:e=>{r=e},onObjectEnd:()=>{o=s.pop()},onArrayBegin:()=>{let e=[];t(e),s.push(o),o=e,r=null},onArrayEnd:()=>{o=s.pop()},onLiteralValue:t,onError:(e,t,i)=>{a.push({error:e,offset:t,length:i})}};if(e)try{i.visit(e,c),n=o[0]||{}}catch(e){console.error(`Error while parsing settings file ${this._name}: ${e}`),this._parseErrors=[e]}return n}parseRaw(e){return{contents:c.toValuesTree(e,e=>console.error(`Conflict in settings file ${this._name}: ${e}`)),keys:Object.keys(e),overrides:c.toOverrides(e,e=>console.error(`Conflict in settings file ${this._name}: ${e}`))}}}t.ConfigurationModelParser=d;class h{
constructor(e,t,i=new l,r=new l,o=new n.ResourceMap,s=new l,a=new n.ResourceMap,c=!0){this._defaultConfiguration=e,this._localUserConfiguration=t,this._remoteUserConfiguration=i,this._workspaceConfiguration=r,this._folderConfigurations=o,this._memoryConfiguration=s,this._memoryConfigurationByResource=a,this._freeze=c,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new n.ResourceMap}getValue(e,t,i){return this.getConsolidateConfigurationModel(t,i).getValue(e)}updateValue(e,t,i={}){let n;i.resource?(n=this._memoryConfigurationByResource.get(i.resource))||(n=new l,this._memoryConfigurationByResource.set(i.resource,n)):n=this._memoryConfiguration,void 0===t?n.removeValue(e):n.setValue(e,t),i.resource||(this._workspaceConsolidatedConfiguration=null)}inspect(e,t,i){
const n=this.getConsolidateConfigurationModel(t,i),r=this.getFolderConfigurationModelForResource(t.resource,i),o=t.resource?this._memoryConfigurationByResource.get(t.resource)||this._memoryConfiguration:this._memoryConfiguration;return{default:t.overrideIdentifier?this._defaultConfiguration.freeze().override(t.overrideIdentifier).getValue(e):this._defaultConfiguration.freeze().getValue(e),user:t.overrideIdentifier?this.userConfiguration.freeze().override(t.overrideIdentifier).getValue(e):this.userConfiguration.freeze().getValue(e),userLocal:t.overrideIdentifier?this.localUserConfiguration.freeze().override(t.overrideIdentifier).getValue(e):this.localUserConfiguration.freeze().getValue(e),userRemote:t.overrideIdentifier?this.remoteUserConfiguration.freeze().override(t.overrideIdentifier).getValue(e):this.remoteUserConfiguration.freeze().getValue(e),
workspace:i?t.overrideIdentifier?this._workspaceConfiguration.freeze().override(t.overrideIdentifier).getValue(e):this._workspaceConfiguration.freeze().getValue(e):void 0,workspaceFolder:r?t.overrideIdentifier?r.freeze().override(t.overrideIdentifier).getValue(e):r.freeze().getValue(e):void 0,memory:t.overrideIdentifier?o.override(t.overrideIdentifier).getValue(e):o.getValue(e),value:n.getValue(e)}}keys(e){const t=this.getFolderConfigurationModelForResource(void 0,e);return{default:this._defaultConfiguration.freeze().keys,user:this.userConfiguration.freeze().keys,workspace:this._workspaceConfiguration.freeze().keys,workspaceFolder:t?t.freeze().keys:[]}}updateDefaultConfiguration(e){this._defaultConfiguration=e,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateLocalUserConfiguration(e){this._localUserConfiguration=e,this._userConfiguration=null,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}
updateRemoteUserConfiguration(e){this._remoteUserConfiguration=e,this._userConfiguration=null,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateWorkspaceConfiguration(e){this._workspaceConfiguration=e,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateFolderConfiguration(e,t){this._folderConfigurations.set(e,t),this._foldersConsolidatedConfigurations.delete(e)}deleteFolderConfiguration(e){this.folderConfigurations.delete(e),this._foldersConsolidatedConfigurations.delete(e)}get defaults(){return this._defaultConfiguration}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration),this._freeze&&this._userConfiguration.freeze()),this._userConfiguration}get localUserConfiguration(){return this._localUserConfiguration}get remoteUserConfiguration(){
return this._remoteUserConfiguration}get workspaceConfiguration(){return this._workspaceConfiguration}get folderConfigurations(){return this._folderConfigurations}getConsolidateConfigurationModel(e,t){let i=this.getConsolidatedConfigurationModelForResource(e,t);return e.overrideIdentifier?i.override(e.overrideIdentifier):i}getConsolidatedConfigurationModelForResource({resource:e},t){let i=this.getWorkspaceConsolidatedConfiguration();if(t&&e){const n=t.getFolder(e);n&&(i=this.getFolderConsolidatedConfiguration(n.uri)||i);const r=this._memoryConfigurationByResource.get(e);r&&(i=i.merge(r))}return i}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration),this._freeze&&(this._workspaceConfiguration=this._workspaceConfiguration.freeze())),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(e){
let t=this._foldersConsolidatedConfigurations.get(e);if(!t){const i=this.getWorkspaceConsolidatedConfiguration(),n=this._folderConfigurations.get(e);n?(t=i.merge(n),this._freeze&&(t=t.freeze()),this._foldersConsolidatedConfigurations.set(e,t)):t=i}return t}getFolderConfigurationModelForResource(e,t){if(t&&e){const i=t.getFolder(e);if(i)return o.withUndefinedAsNull(this._folderConfigurations.get(i.uri))}return null}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:this._folderConfigurations.keys().reduce((e,t)=>{const{contents:i,overrides:n,keys:r}=this._folderConfigurations.get(t);return e[t.toString()]={contents:i,overrides:n,
keys:r},e},Object.create({})),isComplete:!0}}allKeys(e){let t=this.keys(e),i=[...t.default];const n=e=>{for(const t of e)-1===i.indexOf(t)&&i.push(t)};n(t.user),n(t.workspace);for(const e of this.folderConfigurations.keys())n(this.folderConfigurations.get(e).keys);return i}}t.Configuration=h;class f{doesConfigurationContains(e,t){let i,n=e.contents,r=c.toValuesTree({[t]:!0},()=>{});for(;"object"==typeof r&&(i=Object.keys(r)[0]);){if(!(n=n[i]))return!1;r=r[i]}return!0}updateKeys(e,t,i){for(const i of t)e.setValue(i,{})}}t.AbstractConfigurationChangeEvent=f;class p extends f{constructor(e=new l,t=new n.ResourceMap){super(),this._changedConfiguration=e,this._changedConfigurationByResource=t}get changedConfiguration(){return this._changedConfiguration}get changedConfigurationByResource(){return this._changedConfigurationByResource}change(e,t){if(e instanceof p){this._changedConfiguration=this._changedConfiguration.merge(e._changedConfiguration);for(const t of e._changedConfigurationByResource.keys()){
let i=this.getOrSetChangedConfigurationForResource(t);i=i.merge(e._changedConfigurationByResource.get(t)),this._changedConfigurationByResource.set(t,i)}}else this.changeWithKeys(e,t);return this}telemetryData(e,t){return this._source=e,this._sourceConfig=t,this}get affectedKeys(){const e=[...this._changedConfiguration.keys];return this._changedConfigurationByResource.forEach(t=>e.push(...t.keys)),r.distinct(e)}get source(){return this._source}get sourceConfig(){return this._sourceConfig}affectsConfiguration(e,t){let i=[this._changedConfiguration];if(t){let e=this._changedConfigurationByResource.get(t);e&&i.push(e)}else i.push(...this._changedConfigurationByResource.values());for(const t of i)if(this.doesConfigurationContains(t,e))return!0;return!1}changeWithKeys(e,t){let i=t?this.getOrSetChangedConfigurationForResource(t):this._changedConfiguration;this.updateKeys(i,e)}getOrSetChangedConfigurationForResource(e){let t=this._changedConfigurationByResource.get(e);return t||(t=new l,
this._changedConfigurationByResource.set(e,t)),t}}t.ConfigurationChangeEvent=p}),define(t[129],i([0,1,6,18,69,105,3,12,25]),function(e,t,i,n,r,o,s,a,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class l extends i.Disposable{constructor(e){super(),this.settingsPath=e,this._onDidChangeConfiguration=this._register(new s.Emitter),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event}initialize(){return this.initializePromise||(this.initializePromise=new Promise((e,t)=>{this.userConfigModelWatcher=new o.ConfigWatcher(this.settingsPath,{changeBufferDelay:300,onError:e=>n.onUnexpectedError(e),defaultConfig:new r.ConfigurationModelParser(this.settingsPath),parse:(e,t)=>{const i=new r.ConfigurationModelParser(this.settingsPath);return i.parse(e),[...i.errors],i},initCallback:()=>e(void 0)}),this._register(this.userConfigModelWatcher),
this._register(this.userConfigModelWatcher.onDidUpdateConfiguration(()=>this._onDidChangeConfiguration.fire(this.userConfigModelWatcher.getConfig().configurationModel)))})),this.initializePromise.then(()=>this.userConfigModelWatcher.getConfig().configurationModel)}initializeSync(){return this.initialize(),this.userConfigModelWatcher.getConfig().configurationModel}reload(){return this.initialize().then(()=>new Promise(e=>this.userConfigModelWatcher.reload(t=>e(t.configurationModel))))}}t.NodeBasedUserConfiguration=l;class u extends i.Disposable{constructor(e,t){super(),this.configurationResource=e,this.fileService=t,this._onDidChangeConfiguration=this._register(new s.Emitter),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._register(t.onFileChanges(e=>this.handleFileEvents(e))),this.reloadConfigurationScheduler=this._register(new a.RunOnceScheduler(()=>this.reload().then(e=>this._onDidChangeConfiguration.fire(e)),50)),this.fileService.watchFileChanges(this.configurationResource),
this._register(i.toDisposable(()=>this.fileService.unwatchFileChanges(this.configurationResource)))}initialize(){return this.reload()}reload(){return this.fileService.resolveContent(this.configurationResource).then(e=>e.value,()=>"").then(e=>{const t=new r.ConfigurationModelParser(this.configurationResource.toString());return t.parse(e),t.configurationModel})}handleFileEvents(e){const t=e.changes;let i=!1;for(let e=0,n=t.length;e<n&&!i;e++)i=c.isEqual(this.configurationResource,t[e].resource);i&&this.reloadConfigurationScheduler.schedule()}}t.FileServiceBasedUserConfiguration=u});var s=this&&this.__param||function(e,t){return function(i,n){t(i,n,e)}};define(t[130],i([0,1,36,43,6,14,69,3,9,129]),function(e,t,i,n,r,a,c,l,u,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let h=class extends r.Disposable{constructor(e){super(),this._onDidChangeConfiguration=this._register(new l.Emitter),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,
this.userConfiguration=this._register(new d.NodeBasedUserConfiguration(e.appSettingsPath));const t=new c.DefaultConfigurationModel,r=this.userConfiguration.initializeSync();this._configuration=new c.Configuration(t,r),this._register(this.userConfiguration.onDidChangeConfiguration(e=>this.onDidChangeUserConfiguration(e))),this._register(i.Registry.as(n.Extensions.Configuration).onDidUpdateConfiguration(e=>this.onDidDefaultConfigurationChange(e)))}get configuration(){return this._configuration}getConfigurationData(){return this.configuration.toData()}getValue(e,t){const i="string"==typeof e?e:void 0,n=a.isConfigurationOverrides(e)?e:a.isConfigurationOverrides(t)?t:{};return this.configuration.getValue(i,n,void 0)}updateValue(e,t,i,n){return Promise.reject(new Error("not supported"))}inspect(e){return this.configuration.inspect(e,{},void 0)}keys(){return this.configuration.keys(void 0)}reloadConfiguration(e){
return e?Promise.resolve(void 0):this.userConfiguration.reload().then(e=>this.onDidChangeUserConfiguration(e))}onDidChangeUserConfiguration(e){const{added:t,updated:i,removed:n}=a.compare(this._configuration.localUserConfiguration,e),r=[...t,...i,...n];r.length&&(this._configuration.updateLocalUserConfiguration(e),this.trigger(r,1))}onDidDefaultConfigurationChange(e){this._configuration.updateDefaultConfiguration(new c.DefaultConfigurationModel),this.trigger(e,6)}trigger(e,t){this._onDidChangeConfiguration.fire((new c.ConfigurationChangeEvent).change(e).telemetryData(t,this.getTargetConfiguration(t)))}getTargetConfiguration(e){switch(e){case 6:return this._configuration.defaults.contents;case 1:return this._configuration.localUserConfiguration.contents}return{}}};h=o([s(0,u.IEnvironmentService)],h),t.ConfigurationService=h}),define(t[131],i([0,1,65,28,6]),function(e,t,i,r,o){"use strict";function s(e,t,i){return n(this,void 0,void 0,function*(){throw new Error("Not implemented")})}function a(e){
return n(this,void 0,void 0,function*(){const t=yield s();return new Promise((i,n)=>{const r=t.onControlMessage(o=>{r.dispose();const s=d(JSON.parse(o.toString()));if(s)return n(s);e.reconnectionProtocol&&e.reconnectionProtocol.endAcceptReconnection(),i({protocol:t})})})})}function c(e,t){return n(this,void 0,void 0,function*(){const t=yield s();return new Promise((i,n)=>{const r=t.onControlMessage(o=>{r.dispose();const s=JSON.parse(o.toString()),a=d(s);if(a)return n(a);const c=s&&s.debugPort;e.reconnectionProtocol&&e.reconnectionProtocol.endAcceptReconnection(),i({protocol:t,debugPort:c})})})})}function l(e,t,i){return n(this,void 0,void 0,function*(){const{host:n,port:r}=yield e.addressProvider.getAddress();return{isBuilt:e.isBuilt,commit:e.commit,host:n,port:r,reconnectionToken:t,reconnectionProtocol:i,webSocketFactory:e.webSocketFactory}})}function u(e,t){return n(this,void 0,void 0,function*(){yield l(e,r.generateUuid(),null);return yield function(e,t){return n(this,void 0,void 0,function*(){
return yield s()})}()})}function d(e){if(e&&"error"===e.type){const t=new Error(`Connection error: ${e.reason}`);return t.code="VSCODE_CONNECTION_ERROR",t}return null}Object.defineProperty(t,"__esModule",{value:!0});!function(e){e[e.Management=1]="Management",e[e.ExtensionHost=2]="ExtensionHost",e[e.Tunnel=3]="Tunnel"}(t.ConnectionType||(t.ConnectionType={})),t.connectRemoteAgentManagement=function(e,t,i){return n(this,void 0,void 0,function*(){const n=r.generateUuid(),o=yield l(e,n,null),{protocol:s}=yield a(o);return new f(e,t,i,n,s)})},t.connectRemoteAgentExtensionHost=function(e,t){return n(this,void 0,void 0,function*(){const i=r.generateUuid(),n=yield l(e,i,null),{protocol:o,debugPort:s}=yield c(n);return new p(e,t,i,o,s)})},t.connectRemoteAgentTunnel=u;class h extends o.Disposable{constructor(e,t,i){super(),this._options=e,this.reconnectionToken=t,this.protocol=i}}class f extends h{constructor(e,t,n,r,o){super(e,r,o),this.client=this._register(new i.Client(o,{remoteAuthority:t,clientId:n}))}
_reconnect(e){return n(this,void 0,void 0,function*(){yield a(e)})}}t.ManagementPersistentConnection=f;class p extends h{constructor(e,t,i,n,r){super(e,i,n),this._startArguments=t,this.debugPort=r}_reconnect(e){return n(this,void 0,void 0,function*(){yield c(e,this._startArguments)})}}t.ExtensionHostPersistentConnection=p}),define(t[132],i([0,1,3,6,8,28,48]),function(e,t,i,r,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REMOTE_FILE_SYSTEM_CHANNEL_NAME="remotefilesystem";class c extends r.Disposable{constructor(e,t){super(),this._onDidChange=this._register(new i.Emitter),this.onDidChangeFile=this._onDidChange.event,this._onDidChangeCapabilities=this._register(new i.Emitter),this.onDidChangeCapabilities=this._onDidChangeCapabilities.event,this._session=s.generateUuid(),this._channel=e,this.setCaseSensitive(!0),t.then(e=>this.setCaseSensitive(!(!e||3!==e.os))),this._channel.listen("filechange",[this._session])(e=>{this._onDidChange.fire(e.map(c._createFileChange))})}dispose(){
super.dispose()}setCaseSensitive(e){let t=10;e&&(t|=1024),this.capabilities=t,this._onDidChangeCapabilities.fire(void 0)}watch(e,t){const i=Math.random();return this._channel.call("watch",[this._session,i,e,t]),r.toDisposable(()=>{this._channel.call("unwatch",[this._session,i])})}static _createFileChange(e){return{resource:o.URI.revive(e.resource),type:e.type}}stat(e){return this._channel.call("stat",[e])}readFile(e){return n(this,void 0,void 0,function*(){return(yield this._channel.call("readFile",[e])).buffer})}writeFile(e,t,i){const n=a.VSBuffer.wrap(t);return this._channel.call("writeFile",[e,n,i])}delete(e,t){return this._channel.call("delete",[e,t])}mkdir(e){return this._channel.call("mkdir",[e])}readdir(e){return this._channel.call("readdir",[e])}rename(e,t,i){return this._channel.call("rename",[e,t,i])}copy(e,t,i){return this._channel.call("copy",[e,t,i])}}t.RemoteExtensionsFileSystemProvider=c}),define(t[73],i([0,1]),function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),
t.REMOTE_HOST_SCHEME="vscode-remote",t.getRemoteAuthority=function(e){return e.scheme===t.REMOTE_HOST_SCHEME?e.authority:void 0}}),define(t[134],i([0,1]),function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.nodeWebSocketFactory=new class{connect(e,t,i,n){throw new Error("Not implemented")}}}),define(t[41],i([0,1,86,4,43,36]),function(e,t,i,n,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IRequestService=n.createDecorator("requestService"),o.Registry.as(r.Extensions.Configuration).registerConfiguration({id:"http",order:15,title:i.localize(0,null),type:"object",properties:{"http.proxy":{type:"string",pattern:"^https?://([^:]*(:[^@]*)?@)?([^:]+)(:\\d+)?/?$|^$",description:i.localize(1,null)},"http.proxyStrictSSL":{type:"boolean",default:!0,description:i.localize(2,null)},"http.proxyAuthorization":{type:["null","string"],default:null,description:i.localize(3,null)},"http.proxySupport":{type:"string",enum:["off","on","override"],
enumDescriptions:[i.localize(4,null),i.localize(5,null),i.localize(6,null)],default:"override",description:i.localize(7,null)},"http.systemCertificates":{type:"boolean",default:!0,description:i.localize(8,null)}}})}),define(t[29],i([0,1,4]),function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IStateService=i.createDecorator("stateService")}),define(t[24],i([0,1,11,7,29,3,4,111,2,6]),function(e,t,i,n,r,a,c,l,u,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ILifecycleService=c.createDecorator("lifecycleService");!function(e){e[e.CLOSE=1]="CLOSE",e[e.QUIT=2]="QUIT",e[e.RELOAD=3]="RELOAD",e[e.LOAD=4]="LOAD"}(t.UnloadReason||(t.UnloadReason={}));let h=class e extends d.Disposable{constructor(e,t){super(),this.logService=e,this.stateService=t,this.windowToCloseRequest=Object.create(null),this.oneTimeListenerTokenGenerator=0,this.windowCounter=0,this._quitRequested=!1,this._wasRestarted=!1,this._onBeforeShutdown=this._register(new a.Emitter),
this.onBeforeShutdown=this._onBeforeShutdown.event,this._onWillShutdown=this._register(new a.Emitter),this.onWillShutdown=this._onWillShutdown.event,this._onBeforeWindowClose=this._register(new a.Emitter),this.onBeforeWindowClose=this._onBeforeWindowClose.event,this._onBeforeWindowUnload=this._register(new a.Emitter),this.onBeforeWindowUnload=this._onBeforeWindowUnload.event,this.handleRestarted()}get quitRequested(){return this._quitRequested}get wasRestarted(){return this._wasRestarted}handleRestarted(){this._wasRestarted=!!this.stateService.getItem(e.QUIT_FROM_RESTART_MARKER),this._wasRestarted&&this.stateService.removeItem(e.QUIT_FROM_RESTART_MARKER)}ready(){this.registerListeners()}registerListeners(){const e=()=>{this._quitRequested||(this.logService.trace("Lifecycle#app.on(before-quit)"),this._quitRequested=!0,this.logService.trace("Lifecycle#onBeforeShutdown.fire()"),this._onBeforeShutdown.fire(),u.isMacintosh&&0===this.windowCounter&&this.beginOnWillShutdown())};i.app.addListener("before-quit",e)
;const t=()=>{this.logService.trace("Lifecycle#app.on(window-all-closed)"),!this._quitRequested&&u.isMacintosh||i.app.quit()};i.app.addListener("window-all-closed",t),i.app.once("will-quit",n=>{this.logService.trace("Lifecycle#app.on(will-quit)"),n.preventDefault();this.beginOnWillShutdown().finally(()=>{this.resolvePendingQuitPromise(!1),i.app.removeListener("before-quit",e),i.app.removeListener("window-all-closed",t),i.app.quit()})})}beginOnWillShutdown(){if(this.pendingWillShutdownPromise)return this.pendingWillShutdownPromise;this.logService.trace("Lifecycle#onWillShutdown.fire()");const e=[];return this._onWillShutdown.fire({join(t){t&&e.push(t)}}),this.pendingWillShutdownPromise=Promise.all(e).then(()=>void 0,e=>this.logService.error(e)),this.pendingWillShutdownPromise}registerWindow(e){this.windowCounter++,e.win.on("close",t=>{const i=e.id;this.windowToCloseRequest[i]?delete this.windowToCloseRequest[i]:(this.logService.trace(`Lifecycle#window.on('close') - window ID ${e.id}`),t.preventDefault(),
this.unload(e,1).then(t=>{t?delete this.windowToCloseRequest[i]:(this.windowToCloseRequest[i]=!0,this.logService.trace(`Lifecycle#onBeforeWindowClose.fire() - window ID ${i}`),this._onBeforeWindowClose.fire(e),e.close())}))}),e.win.on("closed",()=>{this.logService.trace(`Lifecycle#window.on('closed') - window ID ${e.id}`),this.windowCounter--,0!==this.windowCounter||u.isMacintosh&&!this._quitRequested||this.beginOnWillShutdown()})}unload(e,t){if(!e.isReady)return Promise.resolve(!1);this.logService.trace(`Lifecycle#unload() - window ID ${e.id}`);const i=this._quitRequested?2:t;return this.onBeforeUnloadWindowInRenderer(e,i).then(t=>t?(this.logService.trace(`Lifecycle#unload() - veto in renderer (window ID ${e.id})`),this.handleWindowUnloadVeto(t)):this.onBeforeUnloadWindowInMain(e,i).then(t=>t?(this.logService.trace(`Lifecycle#unload() - veto in main (window ID ${e.id})`),this.handleWindowUnloadVeto(t)):(this.logService.trace(`Lifecycle#unload() - no veto (window ID ${e.id})`),
this.onWillUnloadWindowInRenderer(e,i).then(()=>!1))))}handleWindowUnloadVeto(e){return!!e&&(this.resolvePendingQuitPromise(!0),this._quitRequested=!1,!0)}resolvePendingQuitPromise(e){this.pendingQuitPromiseResolve&&(this.pendingQuitPromiseResolve(e),this.pendingQuitPromiseResolve=null,this.pendingQuitPromise=null)}onBeforeUnloadWindowInRenderer(e,t){return new Promise(n=>{const r=this.oneTimeListenerTokenGenerator++,o=`vscode:ok${r}`,s=`vscode:cancel${r}`;i.ipcMain.once(o,()=>{n(!1)}),i.ipcMain.once(s,()=>{n(!0)}),e.send("vscode:onBeforeUnload",{okChannel:o,cancelChannel:s,reason:t})})}onBeforeUnloadWindowInMain(e,t){const i=[];return this._onBeforeWindowUnload.fire({reason:t,window:e,veto(e){i.push(e)}}),l.handleVetos(i,e=>this.logService.error(e))}onWillUnloadWindowInRenderer(e,t){return new Promise(n=>{const r=`vscode:reply${this.oneTimeListenerTokenGenerator++}`;i.ipcMain.once(r,()=>n()),e.send("vscode:onWillUnload",{replyChannel:r,reason:t})})}quit(t){
return this.pendingQuitPromise?this.pendingQuitPromise:(this.logService.trace(`Lifecycle#quit() - from update: ${t}`),t&&this.stateService.setItem(e.QUIT_FROM_RESTART_MARKER,!0),this.pendingQuitPromise=new Promise(e=>{this.pendingQuitPromiseResolve=e,this.logService.trace("Lifecycle#quit() - calling app.quit()"),i.app.quit()}),this.pendingQuitPromise)}relaunch(t){this.logService.trace("Lifecycle#relaunch()");const n=process.argv.slice(1);if(t&&t.addArgs&&n.push(...t.addArgs),t&&t.removeArgs)for(const e of t.removeArgs){const t=n.indexOf(e);t>=0&&n.splice(t,1)}let r=!1;i.app.once("quit",()=>{if(!r){this.stateService.setItem(e.QUIT_FROM_RESTART_MARKER,!0);try{if(u.isWindows){const e=process.env.VSCODE_CWD;e&&process.chdir(e)}}catch(e){this.logService.error(e)}this.logService.trace("Lifecycle#relaunch() - calling app.relaunch()"),i.app.relaunch({args:n})}}),this.quit().then(e=>r=e)}kill(e){this.logService.trace("Lifecycle#kill()"),i.app.exit(e)}};h.QUIT_FROM_RESTART_MARKER="quit.from.restart",
h=o([s(0,n.ILogService),s(1,r.IStateService)],h),t.LifecycleService=h}),define(t[138],i([0,1,16,53,9,11,12,7,24,29,57,6]),function(e,t,i,r,a,c,l,u,d,h,f,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let g=class{constructor(e,t,i,n,r,o){this.machineId=e,this.userEnv=t,this.environmentService=i,this.lifecycleService=n,this.stateService=r,this.logService=o,this.barrier=new l.Barrier}get _whenReady(){this.window=new c.BrowserWindow({show:!1,backgroundColor:f.getBackgroundColor(this.stateService),webPreferences:{images:!1,webaudio:!1,webgl:!1,disableBlinkFeatures:"Auxclick"}});const t=i.assign({appRoot:this.environmentService.appRoot,machineId:this.machineId,nodeCachedDataDir:this.environmentService.nodeCachedDataDir,userEnv:this.userEnv}),n=`${e.toUrl("vs/code/electron-browser/sharedProcess/sharedProcess.html")}?config=${encodeURIComponent(JSON.stringify(t))}`;this.window.loadURL(n);const r=e=>{this.logService.trace("SharedProcess#close prevented"),e.preventDefault(),
this.window&&this.window.isVisible()&&this.window.hide()};this.window.on("close",r);const o=[];return this.lifecycleService.onWillShutdown(()=>{p.dispose(o),this.window&&this.window.removeListener("close",r),setTimeout(()=>{try{this.window&&this.window.close()}catch(e){}this.window=null},0)}),new Promise(e=>{c.ipcMain.once("handshake:hello",({sender:t})=>{t.send("handshake:hey there",{sharedIPCHandle:this.environmentService.sharedIPCHandle,args:this.environmentService.args,logLevel:this.logService.getLevel()}),o.push(p.toDisposable(()=>t.send("handshake:goodbye"))),c.ipcMain.once("handshake:im ready",()=>e(void 0))})})}spawn(e){this.userEnv=Object.assign({},this.userEnv,e),this.barrier.open()}whenReady(){return n(this,void 0,void 0,function*(){yield this.barrier.wait(),yield this._whenReady})}toggle(){!this.window||this.window.isVisible()?this.hide():this.show()}show(){this.window&&(this.window.show(),this.window.webContents.openDevTools())}hide(){this.window&&(this.window.webContents.closeDevTools(),
this.window.hide())}};o([r.memoize],g.prototype,"_whenReady",null),g=o([s(2,a.IEnvironmentService),s(3,d.ILifecycleService),s(4,h.IStateService),s(5,u.ILogService)],g),t.SharedProcess=g}),define(t[139],i([0,1,5,15,9,33,17,7,22]),function(e,t,i,n,r,a,c,l,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class d{constructor(e,t){this.dbPath=e,this.onError=t,this._database=null,this.lastFlushedSerializedDatabase=null}get database(){return this._database||(this._database=this.loadSync()),this._database}init(){return u.readFile(this.dbPath).then(e=>{try{this.lastFlushedSerializedDatabase=e.toString(),this._database=JSON.parse(this.lastFlushedSerializedDatabase)}catch(e){this._database={}}},e=>{"ENOENT"!==e.code&&this.onError(e),this._database={}})}loadSync(){try{return this.lastFlushedSerializedDatabase=n.readFileSync(this.dbPath).toString(),JSON.parse(this.lastFlushedSerializedDatabase)}catch(e){return"ENOENT"!==e.code&&this.onError(e),{}}}getItem(e,t){const i=this.database[e]
;return c.isUndefinedOrNull(i)?t:i}setItem(e,t){if(c.isUndefinedOrNull(t))return this.removeItem(e);("string"!=typeof t&&"number"!=typeof t&&"boolean"!=typeof t||this.database[e]!==t)&&(this.database[e]=t,this.saveSync())}removeItem(e){c.isUndefined(this.database[e])||(this.database[e]=void 0,this.saveSync())}saveSync(){const e=JSON.stringify(this.database,null,4);if(e!==this.lastFlushedSerializedDatabase)try{a.writeFileAndFlushSync(this.dbPath,e),this.lastFlushedSerializedDatabase=e}catch(e){this.onError(e)}}}t.FileStorage=d;let h=class e{constructor(t,n){this.fileStorage=new d(i.join(t.userDataPath,e.STATE_FILE),e=>n.error(e))}init(){return this.fileStorage.init()}getItem(e,t){return this.fileStorage.getItem(e,t)}setItem(e,t){this.fileStorage.setItem(e,t)}removeItem(e){this.fileStorage.removeItem(e)}};h.STATE_FILE="storage.json",h=o([s(0,r.IEnvironmentService),s(1,l.ILogService)],h),t.StateService=h}),define(t[140],i([0,1,4,3,6,7,9,116,5,22,19]),function(e,t,i,n,r,a,c,l,u,d,h){"use strict"
;Object.defineProperty(t,"__esModule",{value:!0}),t.IStorageMainService=i.createDecorator("storageMainService");let f=class t extends r.Disposable{constructor(e,t){super(),this.logService=e,this.environmentService=t,this._onDidChangeStorage=this._register(new n.Emitter),this._onWillSaveState=this._register(new n.Emitter),this.storage=new l.Storage(new l.InMemoryStorageDatabase)}get onDidChangeStorage(){return this._onDidChangeStorage.event}get onWillSaveState(){return this._onWillSaveState.event}get items(){return this.storage.items}get storagePath(){return this.environmentService.extensionTestsLocationURI?l.SQLiteStorageDatabase.IN_MEMORY_PATH:u.join(this.environmentService.globalStorageHome,t.STORAGE_NAME)}createLogginOptions(){return{logTrace:this.logService.getLevel()===a.LogLevel.Trace?e=>this.logService.trace(e):void 0,logError:e=>this.logService.error(e)}}initialize(){return this.initializePromise||(this.initializePromise=this.doInitialize()),this.initializePromise}doInitialize(){
const e=this.storagePath===l.SQLiteStorageDatabase.IN_MEMORY_PATH;let t;return(t=e?Promise.resolve(!0):d.exists(this.storagePath)).then(t=>(this.storage.dispose(),this.storage=new l.Storage(new l.SQLiteStorageDatabase(this.storagePath,{logging:this.createLogginOptions()})),this._register(this.storage.onDidChangeStorage(e=>this._onDidChangeStorage.fire({key:e}))),this.storage.init().then(()=>{let i;return i=e||t?Promise.resolve():this.migrateGlobalStorage().then(()=>this.logService.info("[storage] migrated global storage"),e=>this.logService.error(`[storage] migration error ${e}`))})))}migrateGlobalStorage(){this.logService.info("[storage] migrating global storage from localStorage into SQLite");const t=u.join(this.environmentService.userDataPath,"Local Storage","file__0.vscmig");return d.exists(t).then(i=>i?d.readdir(this.environmentService.extensionsPath).then(i=>{const n=new Map
;["editorFontInfo","peekViewLayout","expandSuggestionDocs","extensionsIdentifiers/disabled","integrityService","telemetry.lastSessionDate","telemetry.instanceId","telemetry.firstSessionDate","workbench.sidebar.width","workbench.panel.width","workbench.panel.height","workbench.panel.sizeBeforeMaximized","workbench.activity.placeholderViewlets","colorThemeData","iconThemeData","workbench.telemetryOptOutShown","workbench.hide.welcome","releaseNotes/lastVersion","debug.actionswidgetposition","debug.actionswidgety","editor.neverPromptForLargeFiles","menubar/electronFixRecommended","learnMoreDirtyWriteError","extensions.ignoredAutoUpdateExtension","askToInstallRemoteServerExtension","hasNotifiedOfSettingsAutosave","commandPalette.mru.cache","commandPalette.mru.counter","parts-splash-data","terminal.integrated.neverMeasureRenderTime","terminal.integrated.neverSuggestSelectWindowsShell","memento/workbench.parts.editor","memento/workbench.view.search","langugage.update.donotask","extensionsAssistant/languagePackSuggestionIgnore","workbench.panel.pinnedPanels","workbench.activity.pinnedViewlets","extensionsAssistant/ignored_recommendations","extensionsAssistant/recommendations","extensionsAssistant/importantRecommendationsIgnore","extensionsAssistant/fileExtensionsSuggestionIgnore","nps/skipVersion","nps/lastSessionDate","nps/sessionCount","nps/isCandidate","allExperiments","currentOrPreviouslyRunExperiments","update/win32-64bits","update/win32-fast-updates","update/lastKnownVersion","update/updateNotificationTime"].forEach(e=>n.set(e.toLowerCase(),e))
;const r=["Microsoft","GitHub"],o=["ms-vscode.Go","WallabyJs.quokka-vscode","Telerik.nativescript","Shan.code-settings-sync","ritwickdey.LiveServer","PKief.material-icon-theme","PeterJausovec.vscode-docker","ms-vscode.PowerShell","LaurentTreguier.vscode-simple-icons","KnisterPeter.vscode-github","DotJoshJohnson.xml","Dart-Code.dart-code","alefragnani.Bookmarks"];return i.forEach(e=>{let t;if(t=e.indexOf("-")>=0?e.substring(0,e.lastIndexOf("-")):e){for(let e=0;e<r.length;e++){const i=r[e];if(h.startsWith(t,`${i.toLowerCase()}.`)){t=`${i}${t.substr(i.length)}`;break}}for(let e=0;e<o.length;e++){const i=o[e];if(t===i.toLowerCase()){t=i;break}}n.set(t.toLowerCase(),t)}}),new Promise((t,i)=>{e(["vscode-sqlite3"],t,i)}).then(e=>new Promise((i,r)=>{const o=(e,t,i)=>{if(h.endsWith(t,i.toLowerCase())){const n=e.value.toString("utf16le"),r=t.substring(0,t.length-i.length)+i;return this.store(r,n),!0}return!1},s=new e.Database(t,e=>{if(e)return s&&s.close(),r(e);s.all("SELECT key, value FROM ItemTable",(e,t)=>{
if(e)return s.close(),r(e);try{t.forEach(e=>{let t=e.key;if(0!==t.indexOf("storage://global/"))return;t=t.substr("storage://global/".length);const i=n.get(t);if(i){const t=e.value.toString("utf16le");this.store(i,t)}else if(h.endsWith(t,".hidden")||h.startsWith(t,"experiments.")){const i=e.value.toString("utf16le");this.store(t,i)}else o(e,t,".sessionCount")||o(e,t,".lastSessionDate")||o(e,t,".skipVersion")||o(e,t,".isCandidate")||o(e,t,".editedCount")||o(e,t,".editedDate")}),s.close()}catch(e){return s.close(),r(e)}i()})})}))}):Promise.resolve())}get(e,t){return this.storage.get(e,t)}getBoolean(e,t){return this.storage.getBoolean(e,t)}getNumber(e,t){return this.storage.getNumber(e,t)}store(e,t){return this.storage.set(e,t)}remove(e){return this.storage.delete(e)}close(){return this._onWillSaveState.fire(),this.storage.close()}checkIntegrity(e){return this.storage.checkIntegrity(e)}};f.STORAGE_NAME="state.vscdb",f=o([s(0,a.ILogService),s(1,c.IEnvironmentService)],f),t.StorageMainService=f}),
define(t[31],i([0,1,4]),function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ITelemetryService=i.createDecorator("telemetryService")}),define(t[142],i([0,1,87,19,4,14,43,6,16,36]),function(e,t,i,n,r,a,c,l,u,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let h=class{constructor(e,t){this._configurationService=t,this._disposables=[],this._cleanupPatterns=[],this._appender=e.appender,this._commonProperties=e.commonProperties||Promise.resolve({}),this._piiPaths=e.piiPaths||[],this._userOptIn=!0,this._cleanupPatterns=[/file:\/\/\/.*?\/resources\/app\//gi];for(let e of this._piiPaths)this._cleanupPatterns.push(new RegExp(n.escapeRegExpCharacters(e),"gi"));this._configurationService&&(this._updateUserOptIn(),this._configurationService.onDidChangeConfiguration(this._updateUserOptIn,this,this._disposables),this.publicLog("optInStatus",{optIn:this._userOptIn}),this._commonProperties.then(e=>{const t=/^[a-f0-9]+$/i.test(e["common.machineId"])
;this.publicLog("machineIdFallback",{usingFallbackGuid:!t})}))}_updateUserOptIn(){const e=this._configurationService.getValue(f);this._userOptIn=e?e.enableTelemetry:this._userOptIn}get isOptedIn(){return this._userOptIn}getTelemetryInfo(){return this._commonProperties.then(e=>{return{sessionId:e.sessionID,instanceId:e["common.instanceId"],machineId:e["common.machineId"]}})}dispose(){this._disposables=l.dispose(this._disposables)}publicLog(e,t,i){return this._userOptIn?this._commonProperties.then(n=>{t=u.mixin(t,n),t=u.cloneAndChange(t,e=>{if("string"==typeof e)return this._cleanupInfo(e,i)}),this._appender.log(e,t)},e=>{console.error(e)}):Promise.resolve(void 0)}_cleanupInfo(e,t){let i=e;if(t){const t=[];for(let i of this._cleanupPatterns)for(;;){const n=i.exec(e);if(!n)break;t.push([n.index,i.lastIndex])}const n=/^[\\\/]?(node_modules|node_modules\.asar)[\\\/]/,r=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-\._]+(\\\\|\\|\/))+[\w-\._]*/g;let o=0;for(i="";;){const s=r.exec(e);if(!s)break
;!n.test(s[0])&&t.every(([e,t])=>s.index<e||s.index>=t)&&(i+=e.substring(o,s.index)+"<REDACTED: user-file-path>",o=r.lastIndex)}o<e.length&&(i+=e.substr(o))}for(let e of this._cleanupPatterns)i=i.replace(e,"");return i}};h.IDLE_START_EVENT_NAME="UserIdleStart",h.IDLE_STOP_EVENT_NAME="UserIdleStop",h=o([s(1,r.optional(a.IConfigurationService))],h),t.TelemetryService=h;const f="telemetry";d.Registry.as(c.Extensions.Configuration).registerConfiguration({id:f,order:110,type:"object",title:i.localize(0,null),properties:{"telemetry.enableTelemetry":{type:"boolean",description:i.localize(1,null),default:!0,tags:["usesOnlineServices"]}}})}),define(t[143],i([0,1,14,7]),function(e,t,i,n){"use strict";function r(e,t){return t.onDidChangeConfiguration(t=>{6!==t.source&&(e.publicLog("updateConfiguration",{configurationSource:i.ConfigurationTargetToString(t.source),configurationKeys:function(e){if(!e)return[];const t=[];return a(t,"",e),t}(t.sourceConfig)}),e.publicLog("updateConfigurationValues",{
configurationSource:i.ConfigurationTargetToString(t.source),configurationValues:function(e,t){if(!e)return[];return t.reduce((t,i)=>{const n=i.split(".").reduce((e,t)=>e&&"object"==typeof e?e[t]:void 0,e);return void 0!==n&&t.push({[i]:n}),t},[])}(t.sourceConfig,l)}))})}function a(e,t,i){i&&"object"==typeof i&&!Array.isArray(i)?Object.keys(i).forEach(n=>a(e,t?`${t}.${n}`:n,i[n])):e.push(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.NullTelemetryService=new class{publicLog(e,t){return Promise.resolve(void 0)}getTelemetryInfo(){return Promise.resolve({instanceId:"someValue.instanceId",sessionId:"someValue.sessionId",machineId:"someValue.machineId"})}},t.combinedAppender=function(...e){return{log:(t,i)=>e.forEach(e=>e.log(t,i)),dispose:()=>Promise.all(e.map(e=>e.dispose()))}},t.NullAppender={log:()=>null,dispose:()=>Promise.resolve(null)};let c=class{constructor(e){this._logService=e,this.commonPropertiesRegex=/^sessionID$|^version$|^timestamp$|^commitHash$|^common\./}dispose(){
return Promise.resolve(void 0)}log(e,t){const i={};Object.keys(t).forEach(e=>{this.commonPropertiesRegex.test(e)||(i[e]=t[e])}),this._logService.trace(`telemetry/${e}`,i)}};c=o([s(0,n.ILogService)],c),t.LogAppender=c
;const l=["editor.fontFamily","editor.fontWeight","editor.fontSize","editor.lineHeight","editor.letterSpacing","editor.lineNumbers","editor.rulers","editor.wordSeparators","editor.tabSize","editor.indentSize","editor.insertSpaces","editor.detectIndentation","editor.roundedSelection","editor.scrollBeyondLastLine","editor.minimap.enabled","editor.minimap.side","editor.minimap.renderCharacters","editor.minimap.maxColumn","editor.find.seedSearchStringFromSelection","editor.find.autoFindInSelection","editor.wordWrap","editor.wordWrapColumn","editor.wrappingIndent","editor.mouseWheelScrollSensitivity","editor.multiCursorModifier","editor.quickSuggestions","editor.quickSuggestionsDelay","editor.parameterHints.enabled","editor.parameterHints.cycle","editor.autoClosingBrackets","editor.autoClosingQuotes","editor.autoSurround","editor.autoIndent","editor.formatOnType","editor.formatOnPaste","editor.suggestOnTriggerCharacters","editor.acceptSuggestionOnEnter","editor.acceptSuggestionOnCommitCharacter","editor.snippetSuggestions","editor.emptySelectionClipboard","editor.wordBasedSuggestions","editor.suggestSelection","editor.suggestFontSize","editor.suggestLineHeight","editor.tabCompletion","editor.selectionHighlight","editor.occurrencesHighlight","editor.overviewRulerLanes","editor.overviewRulerBorder","editor.cursorBlinking","editor.cursorSmoothCaretAnimation","editor.cursorStyle","editor.mouseWheelZoom","editor.fontLigatures","editor.hideCursorInOverviewRuler","editor.renderWhitespace","editor.renderControlCharacters","editor.renderIndentGuides","editor.renderLineHighlight","editor.codeLens","editor.folding","editor.showFoldingControls","editor.matchBrackets","editor.glyphMargin","editor.useTabStops","editor.trimAutoWhitespace","editor.stablePeek","editor.dragAndDrop","editor.formatOnSave","editor.colorDecorators","breadcrumbs.enabled","breadcrumbs.filePath","breadcrumbs.symbolPath","breadcrumbs.symbolSortOrder","breadcrumbs.useQuickPick","explorer.openEditors.visible","extensions.autoUpdate","files.associations","files.autoGuessEncoding","files.autoSave","files.autoSaveDelay","files.encoding","files.eol","files.hotExit","files.trimTrailingWhitespace","git.confirmSync","git.enabled","http.proxyStrictSSL","javascript.validate.enable","php.builtInCompletions.enable","php.validate.enable","php.validate.run","terminal.integrated.fontFamily","window.openFilesInNewWindow","window.restoreWindows","window.zoomLevel","workbench.editor.enablePreview","workbench.editor.enablePreviewFromQuickOpen","workbench.editor.showTabs","workbench.editor.highlightModifiedTabs","workbench.editor.swipeToNavigate","workbench.sideBar.location","workbench.startupEditor","workbench.statusBar.visible","workbench.welcome.enabled"]
;t.configurationTelemetry=r,t.keybindingsTelemetry=function(e,t){return t.onDidUpdateKeybindings(t=>{2===t.source&&t.keybindings&&e.publicLog("updateKeybindings",{bindings:t.keybindings.map(e=>({key:e.key,command:e.command,when:e.when,args:!!e.args||void 0}))})})}}),define(t[67],i([0,1,2,23,28,22]),function(e,t,i,n,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveCommonProperties=function(e,t,s,a){const c=Object.create(null);c["common.machineId"]=s,c.sessionID=r.generateUuid()+Date.now(),c.commitHash=e,c.version=t,c["common.platformVersion"]=(n.release()||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),c["common.platform"]=i.PlatformToString(i.platform),c["common.nodePlatform"]=process.platform,c["common.nodeArch"]=process.arch;let l=0;const u=Date.now();return Object.defineProperties(c,{timestamp:{get:()=>new Date,enumerable:!0},"common.timesincesessionstart":{get:()=>Date.now()-u,enumerable:!0},"common.sequence":{get:()=>l++,enumerable:!0}}),
"linux"===process.platform&&process.env.SNAP&&process.env.SNAP_REVISION&&(c["common.snap"]="true"),o.readFile(a,"utf8").then(e=>(c["common.source"]=e.slice(0,30),c),e=>c)}}),define(t[145],i([0,1]),function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(e){this.appender=e}listen(e,t){throw new Error(`Event not found: ${t}`)}call(e,t,{eventName:i,data:n}){return this.appender.log(i,n),Promise.resolve(null)}}t.TelemetryAppenderChannel=i;class n{constructor(e){this.channel=e}log(e,t){return this.channel.call("log",{eventName:e,data:t}).then(void 0,e=>`Failed to log telemetry: ${console.warn(e)}`),Promise.resolve(null)}dispose(){}}t.TelemetryAppenderClient=n}),define(t[146],i([0,1,67]),function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.instanceStorageKey="telemetry.instanceId",t.currentSessionDateStorageKey="telemetry.currentSessionDate",t.firstSessionDateStorageKey="telemetry.firstSessionDate",
t.lastSessionDateStorageKey="telemetry.lastSessionDate",t.resolveWorkbenchCommonProperties=function(e,n,r,o,s){return i.resolveCommonProperties(n,r,o,s).then(i=>{const n=e.get(t.instanceStorageKey,0),r=e.get(t.firstSessionDateStorageKey,0),o=e.get(t.lastSessionDateStorageKey,0);return i["common.version.shell"]=process.versions&&process.versions.electron,i["common.version.renderer"]=process.versions&&process.versions.chrome,i["common.firstSessionDate"]=r,i["common.lastSessionDate"]=o||"",i["common.isNewSession"]=o?"0":"1",i["common.instanceId"]=n,i})}}),define(t[147],i([0,1,3,27,6,18,28,146]),function(e,t,i,n,r,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class c extends r.Disposable{constructor(e,t){super(),this.logService=e,this.storageMainService=t,this._onDidChangeItems=this._register(new i.Emitter),this.whenReady=this.init()}get onDidChangeItems(){return this._onDidChangeItems.event}init(){return this.storageMainService.initialize().then(void 0,e=>{o.onUnexpectedError(e),
this.logService.error(e)}).then(()=>{this.initTelemetry(),this.registerListeners()})}initTelemetry(){void 0===this.storageMainService.get(a.instanceStorageKey,void 0)&&this.storageMainService.store(a.instanceStorageKey,s.generateUuid());void 0===this.storageMainService.get(a.firstSessionDateStorageKey,void 0)&&this.storageMainService.store(a.firstSessionDateStorageKey,(new Date).toUTCString());const e=this.storageMainService.get(a.currentSessionDateStorageKey,void 0),t=(new Date).toUTCString();this.storageMainService.store(a.lastSessionDateStorageKey,void 0===e?null:e),this.storageMainService.store(a.currentSessionDateStorageKey,t)}registerListeners(){this._register(i.Event.debounce(this.storageMainService.onDidChangeStorage,(e,t)=>(e?e.push(t):e=[t],e),c.STORAGE_CHANGE_DEBOUNCE_TIME)(e=>{e.length&&this._onDidChangeItems.fire(this.serializeEvents(e))}))}serializeEvents(e){const t=new Map;return e.forEach(e=>t.set(e.key,this.storageMainService.get(e.key))),{items:n.mapToSerializable(t)}}listen(e,t){switch(t){
case"onDidChangeItems":return this.onDidChangeItems}throw new Error(`Event not found: ${t}`)}call(e,t,i){switch(t){case"getItems":return this.whenReady.then(()=>n.mapToSerializable(this.storageMainService.items));case"updateItems":return this.whenReady.then(()=>{const e=i;if(e.insert)for(const[t,i]of e.insert)this.storageMainService.store(t,i);e.delete&&e.delete.forEach(e=>this.storageMainService.remove(e))});case"checkIntegrity":return this.whenReady.then(()=>this.storageMainService.checkIntegrity(i))}throw new Error(`Call not found: ${t}`)}}c.STORAGE_CHANGE_DEBOUNCE_TIME=100,t.GlobalStorageDatabaseChannel=c;class l extends r.Disposable{constructor(e){super(),this.channel=e,this._onDidChangeItemsExternal=this._register(new i.Emitter),this.registerListeners()}get onDidChangeItemsExternal(){return this._onDidChangeItemsExternal.event}registerListeners(){this.onDidChangeItemsOnMainListener=this.channel.listen("onDidChangeItems")(e=>this.onDidChangeItemsOnMain(e))}onDidChangeItemsOnMain(e){
Array.isArray(e.items)&&this._onDidChangeItemsExternal.fire({items:n.serializableToMap(e.items)})}getItems(){return this.channel.call("getItems").then(e=>n.serializableToMap(e))}updateItems(e){let t=0;const i=Object.create(null);return e.insert&&(i.insert=n.mapToSerializable(e.insert),t+=e.insert.size),e.delete&&(i.delete=n.values(e.delete),t+=e.delete.size),0===t?Promise.resolve():this.channel.call("updateItems",i)}checkIntegrity(e){return this.channel.call("checkIntegrity",e)}close(){return this.onDidChangeItemsOnMainListener=r.dispose(this.onDidChangeItemsOnMainListener),Promise.resolve()}dispose(){super.dispose(),this.onDidChangeItemsOnMainListener=r.dispose(this.onDidChangeItemsOnMainListener)}}t.GlobalStorageDatabaseChannelClient=l}),define(t[32],i([0,1,4]),function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e.Uninitialized="uninitialized",e.Idle="idle",e.CheckingForUpdates="checking for updates",e.AvailableForDownload="available for download",
e.Downloading="downloading",e.Downloaded="downloaded",e.Updating="updating",e.Ready="ready"}(t.StateType||(t.StateType={}));!function(e){e[e.Setup=0]="Setup",e[e.Archive=1]="Archive",e[e.Snap=2]="Snap"}(t.UpdateType||(t.UpdateType={})),t.State={Uninitialized:{type:"uninitialized"},Idle:(e,t)=>({type:"idle",updateType:e,error:t}),CheckingForUpdates:e=>({type:"checking for updates",context:e}),AvailableForDownload:e=>({type:"available for download",update:e}),Downloading:e=>({type:"downloading",update:e}),Downloaded:e=>({type:"downloaded",update:e}),Updating:e=>({type:"updating",update:e}),Ready:e=>({type:"ready",update:e})},t.IUpdateService=i.createDecorator("updateService")}),define(t[60],i([0,1,3,12,14,24,20,32,9,7,41,34]),function(e,t,i,r,a,c,l,u,d,h,f,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createUpdateURL=function(e,t){return`${l.default.updateUrl}/api/update/${e}/${t}/${l.default.commit}`};let g=class{constructor(e,t,n,r,o){if(this.lifecycleService=e,
this.configurationService=t,this.environmentService=n,this.requestService=r,this.logService=o,this._state=u.State.Uninitialized,this._onStateChange=new i.Emitter,this.environmentService.disableUpdates)return void this.logService.info("update#ctor - updates are disabled by the environment");if(!l.default.updateUrl||!l.default.commit)return void this.logService.info("update#ctor - updates are disabled as there is no update URL");const s=a.getMigratedSettingValue(this.configurationService,"update.mode","update.channel"),c=this.getProductQuality(s);c?(this.url=this.buildUpdateFeedUrl(c),this.url?(this.setState(u.State.Idle(this.getUpdateType())),"manual"!==s?this.scheduleCheckForUpdates(3e4).then(void 0,e=>this.logService.error(e)):this.logService.info("update#ctor - manual checks only; automatic updates are disabled by user preference")):this.logService.info("update#ctor - updates are disabled as the update URL is badly formed")):this.logService.info("update#ctor - updates are disabled by user preference")}
get onStateChange(){return this._onStateChange.event}get state(){return this._state}setState(e){this.logService.info("update#setState",e.type),this._state=e,this._onStateChange.fire(e)}getProductQuality(e){return"none"===e?void 0:l.default.quality}scheduleCheckForUpdates(e=36e5){return r.timeout(e).then(()=>this.checkForUpdates(null)).then(()=>this.scheduleCheckForUpdates(36e5))}checkForUpdates(e){return n(this,void 0,void 0,function*(){this.logService.trace("update#checkForUpdates, state = ",this.state.type),"idle"===this.state.type&&this.doCheckForUpdates(e)})}downloadUpdate(){return n(this,void 0,void 0,function*(){this.logService.trace("update#downloadUpdate, state = ",this.state.type),"available for download"===this.state.type&&(yield this.doDownloadUpdate(this.state))})}doDownloadUpdate(e){return n(this,void 0,void 0,function*(){})}applyUpdate(){return n(this,void 0,void 0,function*(){this.logService.trace("update#applyUpdate, state = ",this.state.type),
"downloaded"===this.state.type&&(yield this.doApplyUpdate())})}doApplyUpdate(){return n(this,void 0,void 0,function*(){})}quitAndInstall(){return this.logService.trace("update#quitAndInstall, state = ",this.state.type),"ready"!==this.state.type?Promise.resolve(void 0):(this.logService.trace("update#quitAndInstall(): before lifecycle quit()"),this.lifecycleService.quit(!0).then(e=>{this.logService.trace(`update#quitAndInstall(): after lifecycle quit() with veto: ${e}`),e||(this.logService.trace("update#quitAndInstall(): running raw#quitAndInstall()"),this.doQuitAndInstall())}),Promise.resolve(void 0))}isLatestVersion(){return this.url?this.requestService.request({url:this.url},p.CancellationToken.None).then(e=>204===e.res.statusCode):Promise.resolve(void 0)}getUpdateType(){return 1}doQuitAndInstall(){}};g=o([s(0,c.ILifecycleService),s(1,a.IConfigurationService),s(2,d.IEnvironmentService),s(3,f.IRequestService),s(4,h.ILogService)],g),t.AbstractUpdateService=g}),
define(t[150],i([0,1,11,6,3,53,14,24,32,31,9,7,60,41]),function(e,t,i,n,r,a,c,l,u,d,h,f,p,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let m=class extends p.AbstractUpdateService{constructor(e,t,i,n,r,o){super(e,t,n,r,o),this.telemetryService=i,this.disposables=[],this.onRawError(this.onError,this,this.disposables),this.onRawUpdateAvailable(this.onUpdateAvailable,this,this.disposables),this.onRawUpdateDownloaded(this.onUpdateDownloaded,this,this.disposables),this.onRawUpdateNotAvailable(this.onUpdateNotAvailable,this,this.disposables)}get onRawError(){return r.Event.fromNodeEventEmitter(i.autoUpdater,"error",(e,t)=>t)}get onRawUpdateNotAvailable(){return r.Event.fromNodeEventEmitter(i.autoUpdater,"update-not-available")}get onRawUpdateAvailable(){return r.Event.fromNodeEventEmitter(i.autoUpdater,"update-available",(e,t,i)=>({url:t,version:i,productVersion:i}))}get onRawUpdateDownloaded(){return r.Event.fromNodeEventEmitter(i.autoUpdater,"update-downloaded",(e,t,i,n)=>({releaseNotes:t,
version:i,productVersion:i,date:n}))}onError(e){this.logService.error("UpdateService error:",e);const t="checking for updates"!==this.state.type||!!this.state.context?e:void 0;this.setState(u.State.Idle(1,t))}buildUpdateFeedUrl(e){const t=p.createUpdateURL("darwin",e);try{i.autoUpdater.setFeedURL({url:t})}catch(e){return void this.logService.error("Failed to set update feed URL",e)}return t}doCheckForUpdates(e){this.setState(u.State.CheckingForUpdates(e)),i.autoUpdater.checkForUpdates()}onUpdateAvailable(e){"checking for updates"===this.state.type&&this.setState(u.State.Downloading(e))}onUpdateDownloaded(e){"downloading"===this.state.type&&(this.telemetryService.publicLog("update:downloaded",{version:e.version}),this.setState(u.State.Ready(e)))}onUpdateNotAvailable(){"checking for updates"===this.state.type&&(this.telemetryService.publicLog("update:notAvailable",{explicit:!!this.state.context}),this.setState(u.State.Idle(1)))}doQuitAndInstall(){
this.logService.trace("update#quitAndInstall(): running raw#quitAndInstall()"),i.autoUpdater.quitAndInstall()}dispose(){this.disposables=n.dispose(this.disposables)}};o([a.memoize],m.prototype,"onRawError",null),o([a.memoize],m.prototype,"onRawUpdateNotAvailable",null),o([a.memoize],m.prototype,"onRawUpdateAvailable",null),o([a.memoize],m.prototype,"onRawUpdateDownloaded",null),m=o([s(0,l.ILifecycleService),s(1,c.IConfigurationService),s(2,d.ITelemetryService),s(3,h.IEnvironmentService),s(4,g.IRequestService),s(5,f.ILogService)],m),t.DarwinUpdateService=m}),define(t[151],i([0,1,3,12,24,32,9,7,5,15,45,31]),function(e,t,i,r,a,c,l,u,d,h,f,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let g=class{constructor(e,t,n){this.lifecycleService=e,this.logService=n,this._state=c.State.Uninitialized,this._onStateChange=new i.Emitter,t.disableUpdates?this.logService.info("update#ctor - updates are disabled"):(this.setState(c.State.Idle(this.getUpdateType())),
this.scheduleCheckForUpdates(3e4).then(void 0,e=>this.logService.error(e)))}get onStateChange(){return this._onStateChange.event}get state(){return this._state}setState(e){this.logService.info("update#setState",e.type),this._state=e,this._onStateChange.fire(e)}scheduleCheckForUpdates(e=36e5){return r.timeout(e).then(()=>this.checkForUpdates(null)).then(()=>this.scheduleCheckForUpdates(36e5))}checkForUpdates(e){return n(this,void 0,void 0,function*(){this.logService.trace("update#checkForUpdates, state = ",this.state.type),"idle"===this.state.type&&this.doCheckForUpdates(e)})}downloadUpdate(){return n(this,void 0,void 0,function*(){this.logService.trace("update#downloadUpdate, state = ",this.state.type),"available for download"===this.state.type&&(yield this.doDownloadUpdate(this.state))})}doDownloadUpdate(e){return Promise.resolve(void 0)}applyUpdate(){return n(this,void 0,void 0,function*(){this.logService.trace("update#applyUpdate, state = ",this.state.type),
"downloaded"===this.state.type&&(yield this.doApplyUpdate())})}doApplyUpdate(){return Promise.resolve(void 0)}quitAndInstall(){return this.logService.trace("update#quitAndInstall, state = ",this.state.type),"ready"!==this.state.type?Promise.resolve(void 0):(this.logService.trace("update#quitAndInstall(): before lifecycle quit()"),this.lifecycleService.quit(!0).then(e=>{this.logService.trace(`update#quitAndInstall(): after lifecycle quit() with veto: ${e}`),e||(this.logService.trace("update#quitAndInstall(): running raw#quitAndInstall()"),this.doQuitAndInstall())}),Promise.resolve(void 0))}getUpdateType(){return 2}doQuitAndInstall(){}};g=o([s(0,a.ILifecycleService),s(1,l.IEnvironmentService),s(2,u.ILogService)],g);let m=class extends g{constructor(e,t,n,r,o,s){super(n,r,o),this.snap=e,this.snapRevision=t,this.telemetryService=s
;const a=h.watch(d.dirname(this.snap)),c=i.Event.fromNodeEventEmitter(a,"change",(e,t)=>t),l=i.Event.filter(c,e=>"current"===e),u=i.Event.debounce(l,(e,t)=>t,2e3)(this.checkForUpdates,this);n.onWillShutdown(()=>{u.dispose(),a.close()})}doCheckForUpdates(e){this.setState(c.State.CheckingForUpdates(e)),this.isUpdateAvailable().then(t=>{t?this.setState(c.State.Ready({version:"something",productVersion:"something"})):(this.telemetryService.publicLog("update:notAvailable",{explicit:!!e}),this.setState(c.State.Idle(2)))},t=>{this.logService.error(t),this.telemetryService.publicLog("update:notAvailable",{explicit:!!e}),this.setState(c.State.Idle(2,t.message||t))})}doQuitAndInstall(){this.logService.trace("update#quitAndInstall(): running raw#quitAndInstall()"),f.spawn("sleep 3 && "+d.basename(process.argv[0]),{shell:!0,detached:!0,stdio:"ignore"})}isUpdateAvailable(){return n(this,void 0,void 0,function*(){
const e=yield new Promise((e,t)=>h.realpath(`${d.dirname(this.snap)}/current`,(i,n)=>i?t(i):e(n))),t=d.basename(e);return this.snapRevision!==t})}isLatestVersion(){return this.isUpdateAvailable().then(void 0,e=>{this.logService.error("update#checkForSnapUpdate(): Could not get realpath of application.")})}};m=o([s(2,a.ILifecycleService),s(3,l.IEnvironmentService),s(4,u.ILogService),s(5,p.ITelemetryService)],m),t.SnapUpdateService=m}),define(t[152],i([0,1,36,43,88]),function(e,t,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});i.Registry.as(n.Extensions.Configuration).registerConfiguration({id:"update",order:15,title:r.localize(0,null),type:"object",properties:{"update.mode":{type:"string",enum:["none","manual","default"],default:"default",scope:1,description:r.localize(1,null),tags:["usesOnlineServices"],enumDescriptions:[r.localize(2,null),r.localize(3,null),r.localize(4,null)]},"update.channel":{type:"string",default:"default",scope:1,description:r.localize(5,null),
deprecationMessage:r.localize(6,null,"update.mode")},"update.enableWindowsBackgroundUpdates":{type:"boolean",default:!0,scope:1,description:r.localize(7,null),tags:["usesOnlineServices"]},"update.showReleaseNotes":{type:"boolean",default:!0,description:r.localize(8,null),tags:["usesOnlineServices"]}}})}),define(t[153],i([0,1,152]),function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),define(t[154],i([0,1]),function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(e){this.service=e}listen(e,t){switch(t){case"onStateChange":return this.service.onStateChange}throw new Error(`Event not found: ${t}`)}call(e,t,i){switch(t){case"checkForUpdates":return this.service.checkForUpdates(i);case"downloadUpdate":return this.service.downloadUpdate();case"applyUpdate":return this.service.applyUpdate();case"quitAndInstall":return this.service.quitAndInstall();case"_getInitialState":return Promise.resolve(this.service.state);case"isLatestVersion":
return this.service.isLatestVersion()}throw new Error(`Call not found: ${t}`)}}t.UpdateChannel=i}),define(t[54],i([0,1,4]),function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IURLService=i.createDecorator("urlService")}),define(t[156],i([0,1,6,12,27]),function(e,t,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class o{constructor(){this.handlers=new Set}open(e){const t=r.values(this.handlers);return n.first(t.map(t=>()=>t.handleURL(e)),void 0,!1).then(e=>e||!1)}registerHandler(e){return this.handlers.add(e),i.toDisposable(()=>this.handlers.delete(e))}}t.URLService=o}),define(t[157],i([0,1,8]),function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(e){this.service=e}listen(e,t){throw new Error(`Event not found: ${t}`)}call(e,t,n){switch(t){case"open":return this.service.open(i.URI.revive(n))}throw new Error(`Call not found: ${t}`)}}t.URLServiceChannel=n;class r{constructor(e){this.channel=e}open(e){
return this.channel.call("open",e.toJSON())}registerHandler(e){throw new Error("Not implemented.")}}t.URLServiceChannelClient=r;class o{constructor(e){this.handler=e}listen(e,t){throw new Error(`Event not found: ${t}`)}call(e,t,n){switch(t){case"handleURL":return this.handler.handleURL(i.URI.revive(n))}throw new Error(`Call not found: ${t}`)}}t.URLHandlerChannel=o;class s{constructor(e){this.channel=e}handleURL(e){return this.channel.call("handleURL",e.toJSON())}}t.URLHandlerChannelClient=s}),define(t[50],i([0,1,4,3,2,6]),function(e,t,i,n,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IWindowsService=i.createDecorator("windowsService"),t.IWindowService=i.createDecorator("windowService"),t.getTitleBarStyle=function(e,t,i=t.isExtensionDevelopment){const n=e.getValue("window"),o=!t.isBuilt||i;if(r.isMacintosh&&o)return"native";if(n){if(r.isMacintosh&&!0===n.nativeTabs)return"native";if(r.isMacintosh&&!1===n.nativeFullScreen)return"native";const e=n.titleBarStyle
;if("native"===e||"custom"===e)return e}return r.isLinux?"native":"custom"};!function(e){e[e.CLI=0]="CLI",e[e.DOCK=1]="DOCK",e[e.MENU=2]="MENU",e[e.DIALOG=3]="DIALOG",e[e.DESKTOP=4]="DESKTOP",e[e.API=5]="API"}(t.OpenContext||(t.OpenContext={}));!function(e){e[e.NONE=0]="NONE",e[e.LOADING=1]="LOADING",e[e.NAVIGATING=2]="NAVIGATING",e[e.READY=3]="READY"}(t.ReadyState||(t.ReadyState={}));let c=class{constructor(e){this.disposables=[];n.Event.latch(n.Event.any(e.onWindowOpen,e.onWindowFocus))(this.setActiveWindow,this,this.disposables),this.firstActiveWindowIdPromise=e.getActiveWindowId().then(e=>void 0===this._activeWindowId&&this.setActiveWindow(e))}setActiveWindow(e){this.firstActiveWindowIdPromise&&(this.firstActiveWindowIdPromise=null),this._activeWindowId=e}getActiveClientId(){return this.firstActiveWindowIdPromise?this.firstActiveWindowIdPromise:Promise.resolve(`window:${this._activeWindowId}`)}dispose(){this.disposables=a.dispose(this.disposables)}};c=o([s(0,t.IWindowsService)],c),t.ActiveWindowManager=c
}),define(t[38],i([0,1,4]),function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e[e.Maximized=0]="Maximized",e[e.Normal=1]="Normal",e[e.Minimized=2]="Minimized",e[e.Fullscreen=3]="Fullscreen"}(t.WindowMode||(t.WindowMode={})),t.IWindowsMainService=i.createDecorator("windowsMainService")}),define(t[160],i([0,1,166,6,38,3,11]),function(e,t,i,n,r,a,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let l=class{constructor(e){this.windowsMainService=e,this.retryCount=0,this.disposables=[];a.Event.fromNodeEventEmitter(c.app,"login",(e,t,i,n,r)=>({event:e,webContents:t,req:i,authInfo:n,cb:r}))(this.onLogin,this,this.disposables)}onLogin({event:t,authInfo:n,cb:r}){if(!n.isProxy)return;if(this.retryCount++>1)return;t.preventDefault();const o={alwaysOnTop:!0,skipTaskbar:!0,resizable:!1,width:450,height:220,show:!0,title:"VS Code"},s=this.windowsMainService.getFocusedWindow();s&&(o.parent=s.win,o.modal=!0)
;const a=new c.BrowserWindow(o),l=`${e.toUrl("vs/code/electron-browser/proxy/auth.html")}?config=${encodeURIComponent(JSON.stringify({}))}`,u=`${n.host}:${n.port}`,d={title:i.localize(0,null),message:i.localize(1,null,u)},h="promptForCredentials("+JSON.stringify(d)+")",f=()=>r("","");a.on("close",f),a.setMenu(null),a.loadURL(l),a.webContents.executeJavaScript(h,!0).then(({username:e,password:t})=>{r(e,t),a.removeListener("close",f),a.close()})}dispose(){this.disposables=n.dispose(this.disposables)}};l=o([s(0,r.IWindowsMainService)],l),t.ProxyAuthHandler=l}),define(t[161],i([0,1,98,38,51,6,46,52,110,2,3,71,91,12]),function(e,t,i,r,a,c,l,u,d,h,f,p,g,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let v=class{constructor(e,t,i){this.windowServer=e,this.options=t,this.windowsService=i,this.registeredWindowIds=new Set,this.reloadingWindowIds=new Set,this.onDidReloadingChange=new f.Emitter}registerWindowDriver(e){return n(this,void 0,void 0,function*(){return this.registeredWindowIds.add(e),
this.reloadingWindowIds.delete(e),this.onDidReloadingChange.fire(),this.options})}reloadWindowDriver(e){return n(this,void 0,void 0,function*(){this.reloadingWindowIds.add(e)})}getWindowIds(){return n(this,void 0,void 0,function*(){return this.windowsService.getWindows().map(e=>e.id).filter(e=>this.registeredWindowIds.has(e)&&!this.reloadingWindowIds.has(e))})}capturePage(e){return n(this,void 0,void 0,function*(){yield this.whenUnfrozen(e);const t=this.windowsService.getWindowById(e);if(!t)throw new Error("Invalid window");const i=t.win.webContents;return(yield new Promise(e=>i.capturePage(e))).toPNG().toString("base64")})}reloadWindow(e){return n(this,void 0,void 0,function*(){yield this.whenUnfrozen(e);const t=this.windowsService.getWindowById(e);if(!t)throw new Error("Invalid window");this.reloadingWindowIds.add(e),this.windowsService.reload(t)})}exitApplication(){return n(this,void 0,void 0,function*(){return this.windowsService.quit()})}dispatchKeybinding(e,t){return n(this,void 0,void 0,function*(){
yield this.whenUnfrozen(e);const i=g.KeybindingParser.parseUserBinding(t);for(let t of i)yield this._dispatchKeybinding(e,t)})}_dispatchKeybinding(e,t){return n(this,void 0,void 0,function*(){if(t instanceof p.ScanCodeBinding)throw new Error("ScanCodeBindings not supported");const i=this.windowsService.getWindowById(e);if(!i)throw new Error("Invalid window");const n=i.win.webContents,r=new u.SimpleKeybinding(!1,!1,!1,!1,t.keyCode),o=new d.USLayoutResolvedKeybinding(r.toChord(),h.OS).getElectronAccelerator(),s=[];t.ctrlKey&&s.push("ctrl"),t.metaKey&&s.push("meta"),t.shiftKey&&s.push("shift"),t.altKey&&s.push("alt"),n.sendInputEvent({type:"keyDown",keyCode:o,modifiers:s}),function(e){return e<21}(t.keyCode)||n.sendInputEvent({type:"char",keyCode:o,modifiers:s}),n.sendInputEvent({type:"keyUp",keyCode:o,modifiers:s}),yield m.timeout(100)})}click(e,t,i,r){return n(this,void 0,void 0,function*(){yield(yield this.getWindowDriver(e)).click(t,i,r)})}doubleClick(e,t){return n(this,void 0,void 0,function*(){
yield(yield this.getWindowDriver(e)).doubleClick(t)})}setValue(e,t,i){return n(this,void 0,void 0,function*(){yield(yield this.getWindowDriver(e)).setValue(t,i)})}getTitle(e){return n(this,void 0,void 0,function*(){return yield(yield this.getWindowDriver(e)).getTitle()})}isActiveElement(e,t){return n(this,void 0,void 0,function*(){return yield(yield this.getWindowDriver(e)).isActiveElement(t)})}getElements(e,t,i){return n(this,void 0,void 0,function*(){return yield(yield this.getWindowDriver(e)).getElements(t,i)})}typeInEditor(e,t,i){return n(this,void 0,void 0,function*(){yield(yield this.getWindowDriver(e)).typeInEditor(t,i)})}getTerminalBuffer(e,t){return n(this,void 0,void 0,function*(){return yield(yield this.getWindowDriver(e)).getTerminalBuffer(t)})}writeInTerminal(e,t,i){return n(this,void 0,void 0,function*(){yield(yield this.getWindowDriver(e)).writeInTerminal(t,i)})}getWindowDriver(e){return n(this,void 0,void 0,function*(){yield this.whenUnfrozen(e)
;const t=`window:${e}`,n=new l.StaticRouter(e=>e===t),r=this.windowServer.getChannel("windowDriver",n);return new i.WindowDriverChannelClient(r)})}whenUnfrozen(e){return n(this,void 0,void 0,function*(){for(;this.reloadingWindowIds.has(e);)yield f.Event.toPromise(this.onDidReloadingChange.event)})}};v=o([s(2,r.IWindowsMainService)],v),t.Driver=v,t.serve=function(e,t,r,o){return n(this,void 0,void 0,function*(){const n=r.driverVerbose,s=o.createInstance(v,e,{verbose:n}),l=new i.WindowDriverRegistryChannel(s);e.registerChannel("windowDriverRegistry",l);const u=yield a.serve(t),d=new i.DriverChannel(s);return u.registerChannel("driver",d),c.combinedDisposable([u,e])})}}),define(t[162],i([0,1,85,2,9,11,50,14,31,32,20,12,4,42,38,37,66,8,29,24]),function(e,t,i,n,r,a,c,l,u,d,h,f,p,g,m,v,w,y,S,b){"use strict";function _(){return new a.MenuItem({type:"separator"})}Object.defineProperty(t,"__esModule",{value:!0});let C=class e{constructor(e,t,i,r,o,s,a,l,u){this.updateService=e,this.configurationService=i,
this.windowsMainService=r,this.environmentService=o,this.telemetryService=s,this.historyMainService=a,this.stateService=l,this.lifecycleService=u,this.fallbackMenuHandlers={},this.menuUpdater=new f.RunOnceScheduler(()=>this.doUpdateMenu(),0),this.menuGC=new f.RunOnceScheduler(()=>{this.oldMenus=[]},1e4),this.menubarMenus=Object.create(null),this.keybindings=Object.create(null),(n.isMacintosh||"native"===c.getTitleBarStyle(this.configurationService,this.environmentService))&&this.restoreCachedMenubarData(),this.addFallbackHandlers(),this.closedLastWindow=!1,this.oldMenus=[],this.install(),this.registerListeners()}restoreCachedMenubarData(){const t=this.stateService.getItem(e.lastKnownMenubarStorageKey);t&&(t.menus&&(this.menubarMenus=t.menus),t.keybindings&&(this.keybindings=t.keybindings))}addFallbackHandlers(){this.fallbackMenuHandlers["workbench.action.files.newUntitledFile"]=(()=>this.windowsMainService.openNewWindow(2)),
this.fallbackMenuHandlers["workbench.action.newWindow"]=(()=>this.windowsMainService.openNewWindow(2)),this.fallbackMenuHandlers["workbench.action.files.openFileFolder"]=((e,t,i)=>this.windowsMainService.pickFileFolderAndOpen({forceNewWindow:this.isOptionClick(i),telemetryExtraData:{from:"menu"}})),this.fallbackMenuHandlers["workbench.action.openWorkspace"]=((e,t,i)=>this.windowsMainService.pickWorkspaceAndOpen({forceNewWindow:this.isOptionClick(i),telemetryExtraData:{from:"menu"}})),this.fallbackMenuHandlers["workbench.action.clearRecentFiles"]=(()=>this.historyMainService.clearRecentlyOpened()),h.default.twitterUrl&&(this.fallbackMenuHandlers["workbench.action.openTwitterUrl"]=(()=>this.openUrl(h.default.twitterUrl,"openTwitterUrl"))),h.default.requestFeatureUrl&&(this.fallbackMenuHandlers["workbench.action.openRequestFeatureUrl"]=(()=>this.openUrl(h.default.requestFeatureUrl,"openUserVoiceUrl"))),
h.default.reportIssueUrl&&(this.fallbackMenuHandlers["workbench.action.openIssueReporter"]=(()=>this.openUrl(h.default.reportIssueUrl,"openReportIssues"))),h.default.licenseUrl&&(this.fallbackMenuHandlers["workbench.action.openLicenseUrl"]=(()=>{if(n.language){const e=h.default.licenseUrl.indexOf("?")>0?"&":"?";this.openUrl(`${h.default.licenseUrl}${e}lang=${n.language}`,"openLicenseUrl")}else this.openUrl(h.default.licenseUrl,"openLicenseUrl")})),h.default.privacyStatementUrl&&(this.fallbackMenuHandlers["workbench.action.openPrivacyStatementUrl"]=(()=>{if(n.language){const e=h.default.licenseUrl.indexOf("?")>0?"&":"?";this.openUrl(`${h.default.privacyStatementUrl}${e}lang=${n.language}`,"openPrivacyStatement")}else this.openUrl(h.default.privacyStatementUrl,"openPrivacyStatement")}))}registerListeners(){this.lifecycleService.onWillShutdown(()=>this.willShutdown=!0),this.windowsMainService.onWindowsCountChanged(e=>this.onWindowsCountChanged(e))}get currentEnableMenuBarMnemonics(){
let e=this.configurationService.getValue("window.enableMenuBarMnemonics");return"boolean"!=typeof e&&(e=!0),e}get currentEnableNativeTabs(){if(!n.isMacintosh)return!1;let e=this.configurationService.getValue("window.nativeTabs");return"boolean"!=typeof e&&(e=!1),e}updateMenu(t,i){this.menubarMenus=t.menus,this.keybindings=t.keybindings,this.stateService.setItem(e.lastKnownMenubarStorageKey,t),this.scheduleUpdateMenu()}scheduleUpdateMenu(){this.menuUpdater.schedule()}doUpdateMenu(){this.willShutdown||setTimeout(()=>{this.willShutdown||this.install()},10)}onWindowsCountChanged(e){n.isMacintosh&&(0===e.oldCount&&e.newCount>0||e.oldCount>0&&0===e.newCount)&&(this.closedLastWindow=0===e.newCount,this.scheduleUpdateMenu())}install(){const e=a.Menu.getApplicationMenu();if(e&&this.oldMenus.push(e),0===Object.keys(this.menubarMenus).length)return void a.Menu.setApplicationMenu(n.isMacintosh?new a.Menu:null);const t=new a.Menu;let r;if(n.isMacintosh){const e=new a.Menu;r=new a.MenuItem({label:h.default.nameShort,
submenu:e}),this.setMacApplicationMenu(e),t.append(r)}if(n.isMacintosh&&!this.appMenuInstalled){this.appMenuInstalled=!0;const e=new a.Menu;e.append(new a.MenuItem({label:this.mnemonicLabel(i.localize(0,null)),click:()=>this.windowsMainService.openNewWindow(1)})),a.app.dock.setMenu(e)}const o=new a.Menu,s=new a.MenuItem({label:this.mnemonicLabel(i.localize(1,null)),submenu:o});this.setMenuById(o,"File"),t.append(s);const c=new a.Menu,l=new a.MenuItem({label:this.mnemonicLabel(i.localize(2,null)),submenu:c});this.setMenuById(c,"Edit"),t.append(l);const u=new a.Menu,d=new a.MenuItem({label:this.mnemonicLabel(i.localize(3,null)),submenu:u});this.setMenuById(u,"Selection"),t.append(d);const f=new a.Menu,p=new a.MenuItem({label:this.mnemonicLabel(i.localize(4,null)),submenu:f});this.setMenuById(f,"View"),t.append(p);const g=new a.Menu,m=new a.MenuItem({label:this.mnemonicLabel(i.localize(5,null)),submenu:g});this.setMenuById(g,"Go"),t.append(m);const v=new a.Menu,w=new a.MenuItem({
label:this.mnemonicLabel(i.localize(6,null)),submenu:v});this.setMenuById(v,"Debug"),t.append(w);const y=new a.Menu,S=new a.MenuItem({label:this.mnemonicLabel(i.localize(7,null)),submenu:y});this.setMenuById(y,"Terminal"),t.append(S);let b;if(this.shouldDrawMenu("Window")){const e=new a.Menu;b=new a.MenuItem({label:this.mnemonicLabel(i.localize(8,null)),submenu:e,role:"window"}),this.setMacWindowMenu(e)}b&&t.append(b);const _=new a.Menu,C=new a.MenuItem({label:this.mnemonicLabel(i.localize(9,null)),submenu:_,role:"help"});this.setMenuById(_,"Help"),t.append(C),t.items&&t.items.length>0?a.Menu.setApplicationMenu(t):a.Menu.setApplicationMenu(null),this.menuGC.schedule()}setMacApplicationMenu(e){const t=new a.MenuItem({label:i.localize(10,null,h.default.nameLong),role:"about"}),n=this.getUpdateMenuItems();let r;if(this.shouldDrawMenu("Preferences")){const e=new a.Menu;this.setMenuById(e,"Preferences"),r=new a.MenuItem({label:this.mnemonicLabel(i.localize(11,null)),submenu:e})}
const o=new a.Menu,s=new a.MenuItem({label:i.localize(12,null),role:"services",submenu:o}),c=new a.MenuItem({label:i.localize(13,null,h.default.nameLong),role:"hide",accelerator:"Command+H"}),l=new a.MenuItem({label:i.localize(14,null),role:"hideothers",accelerator:"Command+Alt+H"}),u=new a.MenuItem({label:i.localize(15,null),role:"unhide"}),d=new a.MenuItem(this.likeAction("workbench.action.quit",{label:i.localize(16,null,h.default.nameLong),click:()=>{(0===this.windowsMainService.getWindowCount()||this.windowsMainService.getFocusedWindow()||this.windowsMainService.getLastActiveWindow().isMinimized())&&this.windowsMainService.quit()}})),f=[t];f.push(...n),r&&f.push(...[_(),r]),f.push(...[_(),s,_(),c,l,u,_(),d]),f.forEach(t=>e.append(t))}shouldDrawMenu(e){if(!n.isMacintosh&&"custom"===c.getTitleBarStyle(this.configurationService,this.environmentService))return!1;switch(e){case"File":case"Help":
if(n.isMacintosh)return 0===this.windowsMainService.getWindowCount()&&this.closedLastWindow||!!this.menubarMenus&&!!this.menubarMenus[e];case"Window":if(n.isMacintosh)return 0===this.windowsMainService.getWindowCount()&&this.closedLastWindow||!!this.menubarMenus;default:return this.windowsMainService.getWindowCount()>0&&!!this.menubarMenus&&!!this.menubarMenus[e]}}setMenu(e,t){t.forEach(t=>{if(w.isMenubarMenuItemSeparator(t))e.append(_());else if(w.isMenubarMenuItemSubmenu(t)){const i=new a.Menu,n=new a.MenuItem({label:this.mnemonicLabel(t.label),submenu:i});this.setMenu(i,t.submenu.items),e.append(n)}else w.isMenubarMenuItemUriAction(t)?e.append(this.createOpenRecentMenuItem(t.uri,t.label,t.id)):w.isMenubarMenuItemAction(t)&&("workbench.action.showAboutDialog"===t.id&&this.insertCheckForUpdatesItems(e),n.isMacintosh&&0===this.windowsMainService.getWindowCount()&&this.closedLastWindow?this.fallbackMenuHandlers[t.id]?e.append(new a.MenuItem(this.likeAction(t.id,{label:this.mnemonicLabel(t.label),
click:this.fallbackMenuHandlers[t.id]}))):e.append(this.createMenuItem(t.label,t.id,!1,t.checked)):e.append(this.createMenuItem(t.label,t.id,!1!==t.enabled,!!t.checked)))})}setMenuById(e,t){this.menubarMenus&&this.menubarMenus[t]&&this.setMenu(e,this.menubarMenus[t].items)}insertCheckForUpdatesItems(e){const t=this.getUpdateMenuItems();t.length&&(t.forEach(t=>e.append(t)),e.append(_()))}createOpenRecentMenuItem(e,t,i){const n=y.URI.revive(e),r="openRecentFile"===i||"openRecentWorkspace"===i?"file":"folder";return new a.MenuItem(this.likeAction(i,{label:t,click:(e,t,o)=>{const s=this.isOptionClick(o);this.windowsMainService.open({context:2,cli:this.environmentService.args,urisToOpen:[{uri:n,typeHint:r}],forceNewWindow:s,forceOpenWorkspaceAsFile:"openRecentFile"===i}).length>0||this.historyMainService.removeFromRecentlyOpened([n])}},!1))}isOptionClick(e){return!(!e||!(!n.isMacintosh&&(e.ctrlKey||e.shiftKey)||n.isMacintosh&&(e.metaKey||e.altKey)))}createRoleMenuItem(e,t,i){const n={label:this.mnemonicLabel(e),
role:i,enabled:!0};return new a.MenuItem(this.withKeybinding(t,n))}setMacWindowMenu(e){const t=new a.MenuItem({label:i.localize(17,null),role:"minimize",accelerator:"Command+M",enabled:this.windowsMainService.getWindowCount()>0}),n=new a.MenuItem({label:i.localize(18,null),role:"zoom",enabled:this.windowsMainService.getWindowCount()>0}),r=new a.MenuItem({label:i.localize(19,null),role:"front",enabled:this.windowsMainService.getWindowCount()>0}),o=this.createMenuItem(i.localize(20,null),"workbench.action.switchWindow"),s=[];this.currentEnableNativeTabs&&(s.push(_()),s.push(this.createMenuItem(i.localize(21,null),"workbench.action.newWindowTab")),s.push(this.createRoleMenuItem(i.localize(22,null),"workbench.action.showPreviousWindowTab","selectPreviousTab")),s.push(this.createRoleMenuItem(i.localize(23,null),"workbench.action.showNextWindowTab","selectNextTab")),s.push(this.createRoleMenuItem(i.localize(24,null),"workbench.action.moveWindowTabToNewWindow","moveTabToNewWindow")),
s.push(this.createRoleMenuItem(i.localize(25,null),"workbench.action.mergeAllWindowTabs","mergeAllWindows"))),[t,n,o,...s,_(),r].forEach(t=>e.append(t))}getUpdateMenuItems(){switch(this.updateService.state.type){case"uninitialized":return[];case"idle":return[new a.MenuItem({label:this.mnemonicLabel(i.localize(26,null)),click:()=>setTimeout(()=>{this.reportMenuActionTelemetry("CheckForUpdate");const e=this.windowsMainService.getFocusedWindow(),t=e?{windowId:e.id}:null;this.updateService.checkForUpdates(t)},0)})];case"checking for updates":return[new a.MenuItem({label:i.localize(27,null),enabled:!1})];case"available for download":return[new a.MenuItem({label:this.mnemonicLabel(i.localize(28,null)),click:()=>{this.updateService.downloadUpdate()}})];case"downloading":return[new a.MenuItem({label:i.localize(29,null),enabled:!1})];case"downloaded":return[new a.MenuItem({label:this.mnemonicLabel(i.localize(30,null)),click:()=>{this.reportMenuActionTelemetry("InstallUpdate"),this.updateService.applyUpdate()}})]
;case"updating":return[new a.MenuItem({label:i.localize(31,null),enabled:!1})];case"ready":return[new a.MenuItem({label:this.mnemonicLabel(i.localize(32,null)),click:()=>{this.reportMenuActionTelemetry("RestartToUpdate"),this.updateService.quitAndInstall()}})]}}static _menuItemIsTriggeredViaKeybinding(e,t){if(!t)return!1;let i=/ctrl/.test(t),n=/shift/.test(t),r=/alt/.test(t),o=/cmd/.test(t)||/super/.test(t);return!!(i||n||r||o)&&(i===e.ctrlKey&&n===e.shiftKey&&r===e.altKey&&o===e.metaKey)}createMenuItem(t,i,r,o){const s=this.mnemonicLabel(t),c="function"==typeof i?i:(t,n,r)=>{const o=t?t.userSettingsLabel:null;let s=i;Array.isArray(i)&&(s=this.isOptionClick(r)?i[1]:i[0]),o&&e._menuItemIsTriggeredViaKeybinding(r,o)?this.runActionInRenderer({type:"keybinding",userSettingsLabel:o}):this.runActionInRenderer({type:"commandId",commandId:s})},l="boolean"==typeof r?r:this.windowsMainService.getWindowCount()>0,u="boolean"==typeof o&&o,d={label:s,click:c,enabled:l};u&&(d.type="checkbox",d.checked=u);let h
;return"string"==typeof i?h=i:Array.isArray(i)&&(h=i[0]),n.isMacintosh&&("editor.action.clipboardCutAction"===h?d.role="cut":"editor.action.clipboardCopyAction"===h?d.role="copy":"editor.action.clipboardPasteAction"===h&&(d.role="paste"),"undo"===h?d.click=this.makeContextAwareClickHandler(c,{inDevTools:e=>e.undo(),inNoWindow:()=>a.Menu.sendActionToFirstResponder("undo:")}):"redo"===h?d.click=this.makeContextAwareClickHandler(c,{inDevTools:e=>e.redo(),inNoWindow:()=>a.Menu.sendActionToFirstResponder("redo:")}):"editor.action.selectAll"===h&&(d.click=this.makeContextAwareClickHandler(c,{inDevTools:e=>e.selectAll(),inNoWindow:()=>a.Menu.sendActionToFirstResponder("selectAll:")}))),new a.MenuItem(this.withKeybinding(h,d))}makeContextAwareClickHandler(e,t){return()=>{const i=this.windowsMainService.getFocusedWindow();return i?i.win.webContents.isDevToolsFocused()?t.inDevTools(i.win.webContents.devToolsWebContents):void e():t.inNoWindow()}}runActionInRenderer(e){let t=this.windowsMainService.getFocusedWindow()
;if(!t){const e=this.windowsMainService.getLastActiveWindow();e&&e.isMinimized()&&(t=e)}if(t){if(n.isMacintosh&&!this.environmentService.isBuilt&&!t.isReady&&("commandId"===e.type&&"workbench.action.toggleDevTools"===e.commandId||"commandId"!==e.type&&"alt+cmd+i"===e.userSettingsLabel))return;"commandId"===e.type?this.windowsMainService.sendToFocused("vscode:runAction",{id:e.commandId,from:"menu"}):this.windowsMainService.sendToFocused("vscode:runKeybinding",{userSettingsLabel:e.userSettingsLabel})}}withKeybinding(e,t){const i="string"==typeof e?this.keybindings[e]:void 0;if(i&&i.label){if(!1!==i.isNative)t.accelerator=i.label,t.userSettingsLabel=i.userSettingsLabel;else if("string"==typeof t.label){const e=t.label.indexOf("[");t.label=e>=0?`${t.label.substr(0,e)} [${i.label}]`:`${t.label} [${i.label}]`}}else t.accelerator=void 0;return t}likeAction(e,t,i=!t.accelerator){i&&(t=this.withKeybinding(e,t));const n=t.click;return t.click=((t,i,r)=>{this.reportMenuActionTelemetry(e),n&&n(t,i,r)}),t}openUrl(e,t){
a.shell.openExternal(e),this.reportMenuActionTelemetry(t)}reportMenuActionTelemetry(e){this.telemetryService.publicLog("workbenchActionExecuted",{id:e,from:"menu"})}mnemonicLabel(e){return g.mnemonicMenuLabel(e,!this.currentEnableMenuBarMnemonics)}};C.lastKnownMenubarStorageKey="lastKnownMenubarData",C=o([s(0,d.IUpdateService),s(1,p.IInstantiationService),s(2,l.IConfigurationService),s(3,m.IWindowsMainService),s(4,r.IEnvironmentService),s(5,u.ITelemetryService),s(6,v.IHistoryMainService),s(7,S.IStateService),s(8,b.ILifecycleService)],C),t.Menubar=C}),define(t[163],i([0,1,162,7,4]),function(e,t,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let a=class{constructor(e,t){this.instantiationService=e,this.logService=t,this._menubar=this.instantiationService.createInstance(i.Menubar)}updateMenubar(e,t){return this.logService.trace("menubarService#updateMenubar",e),this._menubar&&this._menubar.updateMenu(t,e),Promise.resolve(void 0)}};a=o([s(0,r.IInstantiationService),s(1,n.ILogService)],a),
t.MenubarService=a}),define(t[164],i([0,1,3,54,20,11,8,6,38,2,21]),function(e,t,i,n,r,a,c,l,u,d,h){"use strict";function f(e){try{return c.URI.parse(e)}catch(e){return null}}Object.defineProperty(t,"__esModule",{value:!0});let p=class{constructor(e,t,n){this.urlService=t,this.disposables=[];const o=global.getOpenUrls()||[],s=[..."string"==typeof e?[e]:e,...o],c=h.coalesce(s.map(f)),l=()=>c.forEach(e=>{e&&t.open(e)});d.isWindows&&a.app.setAsDefaultProtocolClient(r.default.urlProtocol,process.execPath,["--open-url","--"]);const u=i.Event.map(i.Event.fromNodeEventEmitter(a.app,"open-url",(e,t)=>({event:e,url:t})),({event:e,url:t})=>(e.preventDefault(),t));i.Event.filter(i.Event.map(u,f),e=>!!e)(this.urlService.open,this.urlService,this.disposables);n.getWindows().filter(e=>e.isReady).length>0?l():i.Event.once(n.onWindowReady)(l)}dispose(){this.disposables=l.dispose(this.disposables)}};p=o([s(1,n.IURLService),s(2,u.IWindowsMainService)],p),t.ElectronURLListener=p}),
define(t[165],i([0,1,89,23,6,16,8,20,9,11,3,54,24,38,37,30,42,2,7]),function(e,t,i,r,a,c,l,u,d,h,f,p,g,m,v,w,y,S,b){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let _=class{constructor(e,t,i,n,r,o,s){this.sharedProcess=e,this.windowsMainService=t,this.environmentService=i,this.lifecycleService=r,this.historyService=o,this.logService=s,this.disposables=[],this.onWindowOpen=f.Event.filter(f.Event.fromNodeEventEmitter(h.app,"browser-window-created",(e,t)=>t.id),e=>!!this.windowsMainService.getWindowById(e)),this.onWindowBlur=f.Event.filter(f.Event.fromNodeEventEmitter(h.app,"browser-window-blur",(e,t)=>t.id),e=>!!this.windowsMainService.getWindowById(e)),this.onWindowMaximize=f.Event.filter(f.Event.fromNodeEventEmitter(h.app,"browser-window-maximize",(e,t)=>t.id),e=>!!this.windowsMainService.getWindowById(e)),this.onWindowUnmaximize=f.Event.filter(f.Event.fromNodeEventEmitter(h.app,"browser-window-unmaximize",(e,t)=>t.id),e=>!!this.windowsMainService.getWindowById(e)),
this.onWindowFocus=f.Event.any(f.Event.map(f.Event.filter(f.Event.map(this.windowsMainService.onWindowsCountChanged,()=>this.windowsMainService.getLastActiveWindow()),e=>!!e),e=>e.id),f.Event.filter(f.Event.fromNodeEventEmitter(h.app,"browser-window-focus",(e,t)=>t.id),e=>!!this.windowsMainService.getWindowById(e))),this.onRecentlyOpenedChange=this.historyService.onRecentlyOpenedChange,n.registerHandler(this),f.Event.latch(f.Event.any(this.onWindowOpen,this.onWindowFocus))(e=>this._activeWindowId=e,null,this.disposables)}pickFileFolderAndOpen(e){return n(this,void 0,void 0,function*(){this.logService.trace("windowsService#pickFileFolderAndOpen"),this.windowsMainService.pickFileFolderAndOpen(e)})}pickFileAndOpen(e){return n(this,void 0,void 0,function*(){this.logService.trace("windowsService#pickFileAndOpen"),this.windowsMainService.pickFileAndOpen(e)})}pickFolderAndOpen(e){return n(this,void 0,void 0,function*(){this.logService.trace("windowsService#pickFolderAndOpen"),
this.windowsMainService.pickFolderAndOpen(e)})}pickWorkspaceAndOpen(e){return n(this,void 0,void 0,function*(){this.logService.trace("windowsService#pickWorkspaceAndOpen"),this.windowsMainService.pickWorkspaceAndOpen(e)})}showMessageBox(e,t){return n(this,void 0,void 0,function*(){return this.logService.trace("windowsService#showMessageBox",e),this.withWindow(e,e=>this.windowsMainService.showMessageBox(t,e),()=>this.windowsMainService.showMessageBox(t))})}showSaveDialog(e,t){return n(this,void 0,void 0,function*(){return this.logService.trace("windowsService#showSaveDialog",e),this.withWindow(e,e=>this.windowsMainService.showSaveDialog(t,e),()=>this.windowsMainService.showSaveDialog(t))})}showOpenDialog(e,t){return n(this,void 0,void 0,function*(){return this.logService.trace("windowsService#showOpenDialog",e),this.withWindow(e,e=>this.windowsMainService.showOpenDialog(t,e),()=>this.windowsMainService.showOpenDialog(t))})}reloadWindow(e,t){return n(this,void 0,void 0,function*(){
return this.logService.trace("windowsService#reloadWindow",e),this.withWindow(e,e=>this.windowsMainService.reload(e,t))})}openDevTools(e,t){return n(this,void 0,void 0,function*(){return this.logService.trace("windowsService#openDevTools",e),this.withWindow(e,e=>e.win.webContents.openDevTools(t))})}toggleDevTools(e){return n(this,void 0,void 0,function*(){return this.logService.trace("windowsService#toggleDevTools",e),this.withWindow(e,e=>{const t=e.win.webContents;S.isMacintosh&&e.hasHiddenTitleBarStyle()&&!e.isFullScreen()&&!t.isDevToolsOpened()?t.openDevTools({mode:"undocked"}):t.toggleDevTools()})})}updateTouchBar(e,t){return n(this,void 0,void 0,function*(){return this.logService.trace("windowsService#updateTouchBar",e),this.withWindow(e,e=>e.updateTouchBar(t))})}closeWorkspace(e){return n(this,void 0,void 0,function*(){return this.logService.trace("windowsService#closeWorkspace",e),this.withWindow(e,e=>this.windowsMainService.closeWorkspace(e))})}enterWorkspace(e,t){
return n(this,void 0,void 0,function*(){return this.logService.trace("windowsService#enterWorkspace",e),this.withWindow(e,e=>this.windowsMainService.enterWorkspace(e,t))})}toggleFullScreen(e){return n(this,void 0,void 0,function*(){return this.logService.trace("windowsService#toggleFullScreen",e),this.withWindow(e,e=>e.toggleFullScreen())})}setRepresentedFilename(e,t){return n(this,void 0,void 0,function*(){return this.logService.trace("windowsService#setRepresentedFilename",e),this.withWindow(e,e=>e.setRepresentedFilename(t))})}addRecentlyOpened(e){return n(this,void 0,void 0,function*(){this.logService.trace("windowsService#addRecentlyOpened"),this.historyService.addRecentlyOpened(e)})}removeFromRecentlyOpened(e){return n(this,void 0,void 0,function*(){this.logService.trace("windowsService#removeFromRecentlyOpened"),this.historyService.removeFromRecentlyOpened(e)})}clearRecentlyOpened(){return n(this,void 0,void 0,function*(){this.logService.trace("windowsService#clearRecentlyOpened"),
this.historyService.clearRecentlyOpened()})}getRecentlyOpened(e){return n(this,void 0,void 0,function*(){return this.logService.trace("windowsService#getRecentlyOpened",e),this.withWindow(e,e=>this.historyService.getRecentlyOpened(e.config.workspace,e.config.folderUri,e.config.filesToOpen),()=>this.historyService.getRecentlyOpened())})}newWindowTab(){return n(this,void 0,void 0,function*(){this.logService.trace("windowsService#newWindowTab"),this.windowsMainService.openNewTabbedWindow(5)})}showPreviousWindowTab(){return n(this,void 0,void 0,function*(){this.logService.trace("windowsService#showPreviousWindowTab"),h.Menu.sendActionToFirstResponder("selectPreviousTab:")})}showNextWindowTab(){return n(this,void 0,void 0,function*(){this.logService.trace("windowsService#showNextWindowTab"),h.Menu.sendActionToFirstResponder("selectNextTab:")})}moveWindowTabToNewWindow(){return n(this,void 0,void 0,function*(){this.logService.trace("windowsService#moveWindowTabToNewWindow"),
h.Menu.sendActionToFirstResponder("moveTabToNewWindow:")})}mergeAllWindowTabs(){return n(this,void 0,void 0,function*(){this.logService.trace("windowsService#mergeAllWindowTabs"),h.Menu.sendActionToFirstResponder("mergeAllWindows:")})}toggleWindowTabsBar(){return n(this,void 0,void 0,function*(){this.logService.trace("windowsService#toggleWindowTabsBar"),h.Menu.sendActionToFirstResponder("toggleTabBar:")})}focusWindow(e){return n(this,void 0,void 0,function*(){return this.logService.trace("windowsService#focusWindow",e),S.isMacintosh?this.withWindow(e,e=>e.win.show()):this.withWindow(e,e=>e.win.focus())})}closeWindow(e){return n(this,void 0,void 0,function*(){return this.logService.trace("windowsService#closeWindow",e),this.withWindow(e,e=>e.win.close())})}isFocused(e){return n(this,void 0,void 0,function*(){return this.logService.trace("windowsService#isFocused",e),this.withWindow(e,e=>e.win.isFocused(),()=>!1)})}isMaximized(e){return n(this,void 0,void 0,function*(){
return this.logService.trace("windowsService#isMaximized",e),this.withWindow(e,e=>e.win.isMaximized(),()=>!1)})}maximizeWindow(e){return n(this,void 0,void 0,function*(){return this.logService.trace("windowsService#maximizeWindow",e),this.withWindow(e,e=>e.win.maximize())})}unmaximizeWindow(e){return n(this,void 0,void 0,function*(){return this.logService.trace("windowsService#unmaximizeWindow",e),this.withWindow(e,e=>e.win.unmaximize())})}minimizeWindow(e){return n(this,void 0,void 0,function*(){return this.logService.trace("windowsService#minimizeWindow",e),this.withWindow(e,e=>e.win.minimize())})}onWindowTitleDoubleClick(e){return n(this,void 0,void 0,function*(){return this.logService.trace("windowsService#onWindowTitleDoubleClick",e),this.withWindow(e,e=>e.onWindowTitleDoubleClick())})}setDocumentEdited(e,t){return n(this,void 0,void 0,function*(){return this.logService.trace("windowsService#setDocumentEdited",e),this.withWindow(e,e=>{e.win.isDocumentEdited()!==t&&e.win.setDocumentEdited(t)})})}
openWindow(e,t,i){return n(this,void 0,void 0,function*(){this.logService.trace("windowsService#openWindow"),t&&t.length&&this.windowsMainService.open({context:5,contextWindowId:e,urisToOpen:t,cli:i.args?Object.assign({},this.environmentService.args,i.args):this.environmentService.args,forceNewWindow:i.forceNewWindow,forceReuseWindow:i.forceReuseWindow,forceOpenWorkspaceAsFile:i.forceOpenWorkspaceAsFile,diffMode:i.diffMode,addMode:i.addMode,noRecentEntry:i.noRecentEntry,waitMarkerFileURI:i.waitMarkerFileURI})})}openNewWindow(e){return n(this,void 0,void 0,function*(){this.logService.trace("windowsService#openNewWindow "+JSON.stringify(e)),this.windowsMainService.openNewWindow(5,e)})}getWindows(){return n(this,void 0,void 0,function*(){this.logService.trace("windowsService#getWindows");return this.windowsMainService.getWindows().map(e=>({id:e.id,workspace:e.openedWorkspace,folderUri:e.openedFolderUri,title:e.win.getTitle(),filename:e.getRepresentedFilename()}))})}getWindowCount(){
return n(this,void 0,void 0,function*(){return this.logService.trace("windowsService#getWindowCount"),this.windowsMainService.getWindows().length})}log(e,...t){return n(this,void 0,void 0,function*(){console[e].apply(console,...t)})}showItemInFolder(e){return n(this,void 0,void 0,function*(){this.logService.trace("windowsService#showItemInFolder"),e.scheme===w.Schemas.file&&h.shell.showItemInFolder(e.fsPath)})}getActiveWindowId(){return n(this,void 0,void 0,function*(){return this._activeWindowId})}openExternal(e){return n(this,void 0,void 0,function*(){return this.logService.trace("windowsService#openExternal"),h.shell.openExternal(e)})}startCrashReporter(e){return n(this,void 0,void 0,function*(){this.logService.trace("windowsService#startCrashReporter"),h.crashReporter.start(e)})}quit(){return n(this,void 0,void 0,function*(){this.logService.trace("windowsService#quit"),this.windowsMainService.quit()})}relaunch(e){return n(this,void 0,void 0,function*(){this.logService.trace("windowsService#relaunch"),
this.lifecycleService.relaunch(e)})}whenSharedProcessReady(){return n(this,void 0,void 0,function*(){return this.logService.trace("windowsService#whenSharedProcessReady"),this.sharedProcess.whenReady()})}toggleSharedProcess(){return n(this,void 0,void 0,function*(){this.logService.trace("windowsService#toggleSharedProcess"),this.sharedProcess.toggle()})}openAboutDialog(){return n(this,void 0,void 0,function*(){this.logService.trace("windowsService#openAboutDialog");let e=h.app.getVersion();u.default.target&&(e=`${e} (${u.default.target} setup)`);const t="linux"===process.platform&&process.env.SNAP&&process.env.SNAP_REVISION,n=i.localize(0,null,e,u.default.commit||"Unknown",u.default.date||"Unknown",process.versions.electron,process.versions.chrome,process.versions.node,process.versions.v8,`${r.type()} ${r.arch()} ${r.release()}${t?" snap":""}`),o=i.localize(1,null),s=y.mnemonicButtonLabel(i.localize(2,null));let a;a=S.isLinux?[s,o]:[o,s],this.windowsMainService.showMessageBox({title:u.default.nameLong,
type:"info",message:u.default.nameLong,detail:`\n${n}`,buttons:a,noLink:!0,defaultId:a.indexOf(o)},this.windowsMainService.getFocusedWindow()||this.windowsMainService.getLastActiveWindow()).then(e=>{a[e.button]===s&&h.clipboard.writeText(n)})})}handleURL(e){return n(this,void 0,void 0,function*(){return!(e.authority!==w.Schemas.file||!e.path)&&(this.openFileForURI({uri:l.URI.file(e.fsPath)}),!0)})}openFileForURI(e){const t=c.assign(Object.create(null),this.environmentService.args,{goto:!0}),i=[e];this.windowsMainService.open({context:5,cli:t,urisToOpen:i})}resolveProxy(e,t){return n(this,void 0,void 0,function*(){return new Promise(i=>{const n=this.windowsMainService.getWindowById(e);n?n.win.webContents.session.resolveProxy(t,e=>{i(e)}):i()})})}withWindow(e,t,i){const n=this.windowsMainService.getWindowById(e);return n?t(n):i?i():void 0}dispose(){this.disposables=a.dispose(this.disposables)}}
;_=o([s(1,m.IWindowsMainService),s(2,d.IEnvironmentService),s(3,p.IURLService),s(4,g.ILifecycleService),s(5,v.IHistoryMainService),s(6,b.ILogService)],_),t.WindowsService=_}),define(t[26],i([0,1,4,90,8,2,5,25,155,39,30,42,40]),function(e,t,i,n,r,o,s,a,c,l,u,d,h){"use strict";function f(e){return p(e)||g(e)}function p(e){return e&&"object"==typeof e&&"string"==typeof e.path&&(!e.name||"string"==typeof e.name)}function g(e){return e&&"object"==typeof e&&"string"==typeof e.uri&&(!e.name||"string"==typeof e.name)}function m(e){return e instanceof r.URI}function v(e,t,i,n=!o.isWindows){if(e.scheme!==i.scheme)return{name:t,uri:e.toString(!0)};let r;if(a.isEqualOrParent(e,i))r=a.relativePath(i,e)||".",o.isWindows&&e.scheme===u.Schemas.file&&!n&&(r=r.replace(/\//g,"\\"));else if(e.scheme===u.Schemas.file)r=e.fsPath,o.isWindows&&(r=d.normalizeDriveLetter(r),n&&(r=h.toSlashes(r)));else{if(!a.isEqualAuthority(e.authority,i.authority))return{name:t,uri:e.toString(!0)};r=e.path}return{name:t,path:r}}function w(e,t,i){
let n=function(e,t){let i=l.parse(t);Array.isArray(i.folders)&&(i.folders=i.folders.filter(e=>f(e)));if(!Array.isArray(i.folders))throw new Error(`${e} looks like an invalid workspace file.`);return i}(t,e);const s=a.dirname(t),u=a.dirname(i),d=[],h=y(n.folders);for(const e of n.folders){let t=p(e)?a.resolvePath(s,e.path):r.URI.parse(e.uri);d.push(v(t,e.name,u,h))}let g=e;return c.setProperty(e,["folders"],d,{insertSpaces:!1,tabSize:4,eol:o.isLinux||o.isMacintosh?"\n":"\r\n"}).forEach(t=>{g=c.applyEdit(e,t)}),g}function y(e){if(o.isWindows){for(const t of e)if(p(t)&&t.path.indexOf(b)>=0)return!0;return!1}return!0}Object.defineProperty(t,"__esModule",{value:!0}),t.IWorkspacesMainService=i.createDecorator("workspacesMainService"),t.IWorkspacesService=i.createDecorator("workspacesService"),t.WORKSPACE_EXTENSION="code-workspace",t.WORKSPACE_FILTER=[{name:n.localize(0,null),extensions:[t.WORKSPACE_EXTENSION]}],t.UNTITLED_WORKSPACE_NAME="workspace.json",t.reviveWorkspaceIdentifier=function(e){return{id:e.id,
configPath:r.URI.revive(e.configPath)}},t.isStoredWorkspaceFolder=f,t.isRawFileWorkspaceFolder=p,t.isRawUriWorkspaceFolder=g,t.isSingleFolderWorkspaceIdentifier=m,t.isWorkspaceIdentifier=function(e){const t=e;return t&&"string"==typeof t.id&&t.configPath instanceof r.URI},t.toWorkspaceIdentifier=function(e){return e.configuration?{configPath:e.configuration,id:e.id}:1===e.folders.length?e.folders[0].uri:void 0},t.isSingleFolderWorkspaceInitializationPayload=function(e){return m(e.folder)};const S="."+t.WORKSPACE_EXTENSION;t.hasWorkspaceFileExtension=function(e){return s.extname(e)===S};const b="/";t.getStoredWorkspaceFolder=v,t.rewriteWorkspaceFileForNewLocation=w,t.useSlashForPath=y}),define(t[167],i([0,1,2,40,26,25]),function(e,t,i,n,r,o){"use strict";function s({windows:e,newWindow:t,context:i,fileUri:n,localWorkspaceResolver:r}){if(!t&&n&&(4===i||0===i||1===i)){const t=function(e,t,i){for(const n of e){const e=n.openedWorkspace;if(e){const r=i(e);if(r){
if(r.folders.some(e=>o.isEqualOrParent(t,e.uri)))return n}else if(o.isEqualOrParent(t,e.configPath))return n}}const n=e.filter(e=>e.openedFolderUri&&o.isEqualOrParent(t,e.openedFolderUri));if(n.length)return n.sort((e,t)=>-(e.openedFolderUri.path.length-t.openedFolderUri.path.length))[0];return null}(e,n,r);if(t)return t}return t?void 0:a(e)}function a(e){const t=Math.max.apply(Math,e.map(e=>e.lastFocusTime));return e.filter(e=>e.lastFocusTime===t)[0]}Object.defineProperty(t,"__esModule",{value:!0}),t.findBestWindowOrFolderForFile=s,t.getLastActiveWindow=a,t.findWindowOnWorkspace=function(e,t){if(r.isSingleFolderWorkspaceIdentifier(t)){for(const i of e)if(r.isSingleFolderWorkspaceIdentifier(t)&&i.openedFolderUri&&o.isEqual(i.openedFolderUri,t))return i}else if(r.isWorkspaceIdentifier(t))for(const i of e)if(i.openedWorkspace&&i.openedWorkspace.id===t.id)return i;return null},t.findWindowOnExtensionDevelopmentPath=function(e,t){
for(const r of e)if(r.extensionDevelopmentPath&&n.isEqual(r.extensionDevelopmentPath,t,!i.isLinux))return r;return null},t.findWindowOnWorkspaceOrFolderUri=function(e,t){if(!t)return null;for(const i of e){if(i.openedWorkspace&&o.isEqual(i.openedWorkspace.configPath,t))return i;if(i.openedFolderUri&&o.isEqual(i.openedFolderUri,t))return i}return null}}),define(t[168],i([0,1,15,59,5,2,33,21,9,14,64,7,26,8,25,40,30,22]),function(e,t,i,r,a,c,l,u,d,h,f,p,g,m,v,w,y,S){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let b=class{constructor(e,t,i){this.configurationService=t,this.logService=i,this.backupHome=e.backupHome,this.workspacesJsonPath=e.backupWorkspacesPath}initialize(){return n(this,void 0,void 0,function*(){let e;try{e=JSON.parse(yield S.readFile(this.workspacesJsonPath,"utf8"))}catch(t){e=Object.create(null)}
e.emptyWorkspaceInfos?this.emptyWorkspaces=yield this.validateEmptyWorkspaces(e.emptyWorkspaceInfos):Array.isArray(e.emptyWorkspaces)?this.emptyWorkspaces=yield this.validateEmptyWorkspaces(e.emptyWorkspaces.map(e=>({backupFolder:e}))):this.emptyWorkspaces=[];let t=[];try{Array.isArray(e.rootURIWorkspaces)?t=e.rootURIWorkspaces.map(e=>({workspace:{id:e.id,configPath:m.URI.parse(e.configURIPath)},remoteAuthority:e.remoteAuthority})):Array.isArray(e.rootWorkspaces)&&(t=e.rootWorkspaces.map(e=>({workspace:{id:e.id,configPath:m.URI.file(e.configPath)}})))}catch(e){}this.rootWorkspaces=yield this.validateWorkspaces(t);let i=[];try{if(Array.isArray(e.folderURIWorkspaces))i=e.folderURIWorkspaces.map(e=>m.URI.parse(e));else if(Array.isArray(e.folderWorkspaces)){i=[];for(const t of e.folderWorkspaces){const e=this.getLegacyFolderHash(t),n=m.URI.file(t),r=this.getFolderHash(n);r!==e&&(yield this.moveBackupFolder(this.getBackupPath(r),this.getBackupPath(e))),i.push(n)}}}catch(e){}
this.folderWorkspaces=yield this.validateFolders(i),yield this.save()})}getWorkspaceBackups(){return this.isHotExitOnExitAndWindowClose()?[]:this.rootWorkspaces.slice(0)}getFolderBackupPaths(){return this.isHotExitOnExitAndWindowClose()?[]:this.folderWorkspaces.slice(0)}isHotExitEnabled(){return this.getHotExitConfig()!==f.HotExitConfiguration.OFF}isHotExitOnExitAndWindowClose(){return this.getHotExitConfig()===f.HotExitConfiguration.ON_EXIT_AND_WINDOW_CLOSE}getHotExitConfig(){const e=this.configurationService.getValue();return e&&e.files&&e.files.hotExit||f.HotExitConfiguration.ON_EXIT}getEmptyWindowBackupPaths(){return this.emptyWorkspaces.slice(0)}registerWorkspaceBackupSync(e,t){this.rootWorkspaces.some(t=>e.workspace.id===t.workspace.id)||(this.rootWorkspaces.push(e),this.saveSync());const i=this.getBackupPath(e.workspace.id);return t&&this.moveBackupFolderSync(i,t),i}moveBackupFolderSync(e,t){if(i.existsSync(e)&&this.convertToEmptyWindowBackupSync(e),i.existsSync(t))try{i.renameSync(t,e)}catch(e){
this.logService.error(`Backup: Could not move backup folder to new location: ${e.toString()}`)}}moveBackupFolder(e,t){return n(this,void 0,void 0,function*(){if((yield S.exists(e))&&(yield this.convertToEmptyWindowBackup(e)),yield S.exists(t))try{yield S.rename(t,e)}catch(e){this.logService.error(`Backup: Could not move backup folder to new location: ${e.toString()}`)}})}unregisterWorkspaceBackupSync(e){const t=e.id;let i=u.firstIndex(this.rootWorkspaces,e=>e.workspace.id===t);-1!==i&&(this.rootWorkspaces.splice(i,1),this.saveSync())}registerFolderBackupSync(e){return this.folderWorkspaces.some(t=>v.isEqual(e,t))||(this.folderWorkspaces.push(e),this.saveSync()),this.getBackupPath(this.getFolderHash(e))}unregisterFolderBackupSync(e){let t=u.firstIndex(this.folderWorkspaces,t=>v.isEqual(e,t));-1!==t&&(this.folderWorkspaces.splice(t,1),this.saveSync())}registerEmptyWindowBackupSync(e,t){return e||(e=this.getRandomEmptyWindowId()),
this.emptyWorkspaces.some(t=>!!t.backupFolder&&w.isEqual(t.backupFolder,e,!c.isLinux))||(this.emptyWorkspaces.push({backupFolder:e,remoteAuthority:t}),this.saveSync()),this.getBackupPath(e)}unregisterEmptyWindowBackupSync(e){let t=u.firstIndex(this.emptyWorkspaces,t=>!!t.backupFolder&&w.isEqual(t.backupFolder,e,!c.isLinux));-1!==t&&(this.emptyWorkspaces.splice(t,1),this.saveSync())}getBackupPath(e){return a.join(this.backupHome,e)}validateWorkspaces(e){return n(this,void 0,void 0,function*(){if(!Array.isArray(e))return[];const t=Object.create(null),i=[];for(let n of e){const e=n.workspace;if(!g.isWorkspaceIdentifier(e))return[];if(!t[e.id]){t[e.id]=!0;const r=this.getBackupPath(e.id);(yield this.hasBackups(r))?e.configPath.scheme!==y.Schemas.file||(yield S.exists(e.configPath.fsPath))?i.push(n):yield this.convertToEmptyWindowBackup(r):yield this.deleteStaleBackup(r)}}return i})}validateFolders(e){return n(this,void 0,void 0,function*(){if(!Array.isArray(e))return[];const t=[],i=Object.create(null)
;for(let n of e){const e=v.getComparisonKey(n);if(!i[e]){i[e]=!0;const r=this.getBackupPath(this.getFolderHash(n));(yield this.hasBackups(r))?n.scheme!==y.Schemas.file||(yield S.exists(n.fsPath))?t.push(n):yield this.convertToEmptyWindowBackup(r):yield this.deleteStaleBackup(r)}}return t})}validateEmptyWorkspaces(e){return n(this,void 0,void 0,function*(){if(!Array.isArray(e))return[];const t=[],i=Object.create(null);for(let n of e){const e=n.backupFolder;if("string"!=typeof e)return[];if(!i[e]){i[e]=!0;const r=this.getBackupPath(e);(yield this.hasBackups(r))?t.push(n):yield this.deleteStaleBackup(r)}}return t})}deleteStaleBackup(e){return n(this,void 0,void 0,function*(){try{(yield S.exists(e))&&(yield S.del(e))}catch(e){this.logService.error(`Backup: Could not delete stale backup: ${e.toString()}`)}})}convertToEmptyWindowBackup(e){return n(this,void 0,void 0,function*(){let t=this.getRandomEmptyWindowId()
;for(;this.emptyWorkspaces.some(e=>!!e.backupFolder&&w.isEqual(e.backupFolder,t,c.isLinux));)t=this.getRandomEmptyWindowId();const i=this.getBackupPath(t);try{yield S.rename(e,i)}catch(e){return this.logService.error(`Backup: Could not rename backup folder: ${e.toString()}`),!1}return this.emptyWorkspaces.push({backupFolder:t}),!0})}convertToEmptyWindowBackupSync(e){let t=this.getRandomEmptyWindowId();for(;this.emptyWorkspaces.some(e=>!!e.backupFolder&&w.isEqual(e.backupFolder,t,c.isLinux));)t=this.getRandomEmptyWindowId();const n=this.getBackupPath(t);try{i.renameSync(e,n)}catch(e){return this.logService.error(`Backup: Could not rename backup folder: ${e.toString()}`),!1}return this.emptyWorkspaces.push({backupFolder:t}),!0}hasBackups(e){return n(this,void 0,void 0,function*(){try{const t=yield S.readdir(e);for(const i of t)try{if((yield S.readdir(a.join(e,i))).length>0)return!0}catch(e){}}catch(e){}return!1})}saveSync(){try{
l.writeFileAndFlushSync(this.workspacesJsonPath,JSON.stringify(this.serializeBackups()))}catch(e){this.logService.error(`Backup: Could not save workspaces.json: ${e.toString()}`)}}save(){return n(this,void 0,void 0,function*(){try{yield S.writeFile(this.workspacesJsonPath,JSON.stringify(this.serializeBackups()))}catch(e){this.logService.error(`Backup: Could not save workspaces.json: ${e.toString()}`)}})}serializeBackups(){return{rootURIWorkspaces:this.rootWorkspaces.map(e=>({id:e.workspace.id,configURIPath:e.workspace.configPath.toString(),remoteAuthority:e.remoteAuthority})),folderURIWorkspaces:this.folderWorkspaces.map(e=>e.toString()),emptyWorkspaceInfos:this.emptyWorkspaces,emptyWorkspaces:this.emptyWorkspaces.map(e=>e.backupFolder)}}getRandomEmptyWindowId(){return(Date.now()+Math.round(1e3*Math.random())).toString()}getFolderHash(e){let t;return t=e.scheme===y.Schemas.file?c.isLinux?e.fsPath:e.fsPath.toLowerCase():v.hasToIgnoreCase(e)?e.toString().toLowerCase():e.toString(),
r.createHash("md5").update(t).digest("hex")}getLegacyFolderHash(e){return r.createHash("md5").update(c.isLinux?e:e.toLowerCase()).digest("hex")}};b=o([s(0,d.IEnvironmentService),s(1,h.IConfigurationService),s(2,p.ILogService)],b),t.BackupMainService=b}),define(t[169],i([0,1,4,26,84,25]),function(e,t,i,n,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.getSimpleWorkspaceLabel=function(e,t){if(n.isSingleFolderWorkspaceIdentifier(e))return o.basename(e);if(o.isEqualOrParent(e.configPath,t))return r.localize(0,null);const i=o.basename(e.configPath),s=i.substr(0,i.length-n.WORKSPACE_EXTENSION.length-1);return r.localize(1,null,s)},t.ILabelService=i.createDecorator("label")}),define(t[170],i([0,1,82,21,29,11,7,42,3,2,26,37,12,25,8,30,9,169,104,22]),function(e,t,i,r,a,c,l,u,d,h,f,p,g,m,v,w,y,S,b,_){"use strict";function C(e){return p.isRecentFolder(e)?e.folderUri:p.isRecentFile(e)?e.fileUri:e.workspace.configPath}function E(e,t){
return r.firstIndex(e,e=>p.isRecentWorkspace(e)&&e.workspace.id===t.id)}function k(e,t){return r.firstIndex(e,e=>p.isRecentFolder(e)&&m.isEqual(e.folderUri,t))}function I(e,t){return r.firstIndex(e,e=>m.isEqual(e.fileUri,t))}Object.defineProperty(t,"__esModule",{value:!0});let P=class e{constructor(e,t,i,n){this.stateService=e,this.logService=t,this.workspacesMainService=i,this.environmentService=n,this._onRecentlyOpenedChange=new d.Emitter,this.onRecentlyOpenedChange=this._onRecentlyOpenedChange.event,this.macOSRecentDocumentsUpdater=new g.ThrottledDelayer(800)}addRecentlyOpened(t){const i=[],n=[];for(let e of t)p.isRecentWorkspace(e)?this.workspacesMainService.isUntitledWorkspace(e.workspace)||-1!==E(i,e.workspace)||i.push(e):p.isRecentFolder(e)?-1===k(i,e.folderUri)&&i.push(e):-1===I(n,e.fileUri)&&(n.push(e),h.isWindows&&e.fileUri.scheme===w.Schemas.file&&c.app.addRecentDocument(e.fileUri.fsPath));this.addEntriesFromStorage(i,n),i.length>e.MAX_TOTAL_RECENT_ENTRIES&&(i.length=e.MAX_TOTAL_RECENT_ENTRIES),
n.length>e.MAX_TOTAL_RECENT_ENTRIES&&(n.length=e.MAX_TOTAL_RECENT_ENTRIES),this.saveRecentlyOpened({workspaces:i,files:n}),this._onRecentlyOpenedChange.fire(),h.isMacintosh&&this.macOSRecentDocumentsUpdater.trigger(()=>this.updateMacOSRecentDocuments())}removeFromRecentlyOpened(e){const t=t=>{const i=C(t);for(const t of e)if(m.isEqual(t,i))return!1;return!0},i=this.getRecentlyOpened(),n=i.workspaces.filter(t),r=i.files.filter(t);n.length===i.workspaces.length&&r.length===i.files.length||(this.saveRecentlyOpened({files:r,workspaces:n}),this._onRecentlyOpenedChange.fire(),h.isMacintosh&&this.macOSRecentDocumentsUpdater.trigger(()=>this.updateMacOSRecentDocuments()))}updateMacOSRecentDocuments(){return n(this,void 0,void 0,function*(){if(!h.isMacintosh)return;c.app.clearRecentDocuments();const t=this.getRecentlyOpened();for(let i=0,n=0;i<t.workspaces.length&&n<e.MAX_MACOS_DOCK_RECENT_FOLDERS;i++){const e=C(t.workspaces[i]);if(e.scheme===w.Schemas.file){const t=m.originalFSPath(e)
;(yield _.exists(t))&&(c.app.addRecentDocument(t),n++)}}for(let i=0,n=0;i<t.files.length&&n<e.MAX_MACOS_DOCK_RECENT_FILES;i++){const e=C(t.files[i]);if(e.scheme===w.Schemas.file){const t=m.originalFSPath(e);(yield _.exists(t))&&(c.app.addRecentDocument(t),n++)}}})}clearRecentlyOpened(){this.saveRecentlyOpened({workspaces:[],files:[]}),c.app.clearRecentDocuments(),this._onRecentlyOpenedChange.fire()}getRecentlyOpened(e,t,i){const n=[],r=[];if(e&&!this.workspacesMainService.isUntitledWorkspace(e)&&n.push({workspace:e}),t&&n.push({folderUri:t}),i)for(let e of i){const t=e.fileUri;t&&-1===I(r,t)&&r.push({fileUri:t})}return this.addEntriesFromStorage(n,r),{workspaces:n,files:r}}addEntriesFromStorage(e,t){let i=this.getRecentlyOpenedFromStorage();for(let t of i.workspaces){let i=p.isRecentFolder(t)?k(e,t.folderUri):E(e,t.workspace);i>=0?e[i].label=e[i].label||t.label:e.push(t)}for(let e of i.files){let i=I(t,e.fileUri);i>=0?t[i].label=t[i].label||e.label:t.push(e)}}getRecentlyOpenedFromStorage(){
const t=this.stateService.getItem(e.recentlyOpenedStorageKey);return b.restoreRecentlyOpened(t)}saveRecentlyOpened(t){const i=b.toStoreData(t);this.stateService.setItem(e.recentlyOpenedStorageKey,i)}updateWindowsJumpList(){if(!h.isWindows)return;const e=[];if(e.push({type:"tasks",items:[{type:"task",title:i.localize(0,null),description:i.localize(1,null),program:process.execPath,args:"-n",iconPath:process.execPath,iconIndex:0}]}),this.getRecentlyOpened().workspaces.length>0){let t=[];for(let e of c.app.getJumpListSettings().removedItems){const i=e.args;if(i){const e=/^--(folder|file)-uri\s+"([^"]+)"$/.exec(i);e&&t.push(v.URI.parse(e[2]))}}this.removeFromRecentlyOpened(t),e.push({type:"custom",name:i.localize(2,null),items:r.coalesce(this.getRecentlyOpened().workspaces.slice(0,7).map(e=>{const t=p.isRecentWorkspace(e)?e.workspace:e.folderUri,n=e.label||S.getSimpleWorkspaceLabel(t,this.environmentService.untitledWorkspacesHome);let r,o;if(f.isSingleFolderWorkspaceIdentifier(t)){const e=m.dirname(t)
;r=i.localize(3,null,u.getBaseLabel(t),u.getPathLabel(e,this.environmentService)),o=`--folder-uri "${t.toString()}"`}else r=i.localize(4,null),o=`--file-uri "${t.configPath.toString()}"`;return{type:"task",title:n,description:r,program:process.execPath,args:o,iconPath:"explorer.exe",iconIndex:0}}))})}e.push({type:"recent"});try{c.app.setJumpList(e)}catch(e){this.logService.warn("#setJumpList",e)}}};P.MAX_TOTAL_RECENT_ENTRIES=100,P.MAX_MACOS_DOCK_RECENT_FOLDERS=10,P.MAX_MACOS_DOCK_RECENT_FILES=5,P.recentlyOpenedStorageKey="openedPathsList",P=o([s(0,a.IStateService),s(1,l.ILogService),s(2,f.IWorkspacesMainService),s(3,y.IEnvironmentService)],P),t.HistoryMainService=P}),define(t[62],i([0,1,7,54,2,9,4,38,22,26,14,8,11,35,21]),function(e,t,i,n,r,a,c,l,u,d,h,f,p,g,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ID="launchService",t.ILaunchService=c.createDecorator(t.ID);class v{constructor(e){this.service=e}listen(e,t){throw new Error(`Event not found: ${t}`)}call(e,t,i){switch(t){case"start":
const{args:e,userEnv:n}=i;return this.service.start(e,n);case"get-main-process-id":return this.service.getMainProcessId();case"get-main-process-info":return this.service.getMainProcessInfo();case"get-logs-path":return this.service.getLogsPath()}throw new Error(`Call not found: ${t}`)}}t.LaunchChannel=v;class w{constructor(e){this.channel=e}start(e,t){return this.channel.call("start",{args:e,userEnv:t})}getMainProcessId(){return this.channel.call("get-main-process-id",null)}getMainProcessInfo(){return this.channel.call("get-main-process-info",null)}getLogsPath(){return this.channel.call("get-logs-path",null)}}t.LaunchChannelClient=w;let y=class{constructor(e,t,i,n,r,o){this.logService=e,this.windowsMainService=t,this.urlService=i,this.workspacesMainService=n,this.environmentService=r,this.configurationService=o}start(e,t){this.logService.trace("Received data from other instance: ",e,t);const i=function(e){return e["open-url"]&&e._urls&&e._urls.length>0?m.coalesce(e._urls.map(e=>{try{return f.URI.parse(e)
}catch(e){return null}})):[]}(e);if(i.length){let e=Promise.resolve(null);if(0===this.windowsMainService.getWindowCount()){e=this.windowsMainService.openNewWindow(4)[0].ready()}return e.then(()=>{for(const e of i)this.urlService.open(e)}),Promise.resolve(void 0)}return this.startOpenWindow(e,t)}startOpenWindow(e,t){const i=t.VSCODE_CLI?0:4;let n=[];const o=e.wait&&e.waitMarkerFilePath?f.URI.file(e.waitMarkerFilePath):void 0;if(e.extensionDevelopmentPath)this.windowsMainService.openExtensionDevelopmentHostWindow(e.extensionDevelopmentPath,{context:i,cli:e,userEnv:t,waitMarkerFileURI:o});else if(g.hasArgs(e._)||g.hasArgs(e["folder-uri"])||g.hasArgs(e["file-uri"]))n=this.windowsMainService.open({context:i,cli:e,userEnv:t,forceNewWindow:e["new-window"],preferNewWindow:!e["reuse-window"]&&!e.wait,forceReuseWindow:e["reuse-window"],diffMode:e.diff,addMode:e.add,noRecentEntry:!!e["skip-add-to-recently-opened"],waitMarkerFileURI:o});else{let s=!1
;if(e["new-window"]||e["unity-launch"])s=!0;else if(e["reuse-window"])s=!1;else{const e=this.configurationService.getValue("window");switch(e&&e.openWithoutArgumentsInNewWindow||"default"){case"on":s=!0;break;case"off":s=!1;break;default:s=!r.isMacintosh}}n=s?this.windowsMainService.open({context:i,cli:e,userEnv:t,forceNewWindow:!0,forceEmpty:!0,waitMarkerFileURI:o}):[this.windowsMainService.focusLastActive(e,i)]}return o&&1===n.length&&n[0]?Promise.race([this.windowsMainService.waitForWindowCloseOrLoad(n[0].id),u.whenDeleted(o.fsPath)]).then(()=>void 0,()=>void 0):Promise.resolve(void 0)}getMainProcessId(){return this.logService.trace("Received request for process ID from other instance."),Promise.resolve(process.pid)}getMainProcessInfo(){this.logService.trace("Received request for main process info from other instance.");const e=[];return p.BrowserWindow.getAllWindows().forEach(t=>{const i=this.windowsMainService.getWindowById(t.id);i?e.push(this.codeWindowToInfo(i)):e.push(this.browserWindowToInfo(t))}),
Promise.resolve({mainPID:process.pid,mainArguments:process.argv.slice(1),windows:e})}getLogsPath(){return this.logService.trace("Received request for logs path from other instance."),Promise.resolve(this.environmentService.logsPath)}codeWindowToInfo(e){const t=[];if(e.openedFolderUri)t.push(e.openedFolderUri);else if(e.openedWorkspace){const i=e.openedWorkspace.configPath,n=this.workspacesMainService.resolveLocalWorkspaceSync(i);if(n){n.folders.forEach(e=>{t.push(e.uri)})}}return this.browserWindowToInfo(e.win,t)}browserWindowToInfo(e,t=[]){return{pid:e.webContents.getOSProcessId(),title:e.getTitle(),folderURIs:t}}};y=o([s(0,i.ILogService),s(1,l.IWindowsMainService),s(2,n.IURLService),s(3,d.IWorkspacesMainService),s(4,a.IEnvironmentService),s(5,h.IConfigurationService)],y),t.LaunchService=y}),define(t[172],i([0,1,83,16,35,11,62,68,9,2,7,50]),function(e,t,i,n,r,a,c,l,u,d,h,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let p=class{constructor(e,t,i,n,r,o,s){this.machineId=e,this.userEnv=t,
this.environmentService=i,this.launchService=n,this.logService=r,this.diagnosticsService=o,this.windowsService=s,this.registerListeners()}registerListeners(){a.ipcMain.on("vscode:issueSystemInfoRequest",e=>{this.getSystemInformation().then(t=>{e.sender.send("vscode:issueSystemInfoResponse",t)})}),a.ipcMain.on("vscode:issuePerformanceInfoRequest",e=>{this.getPerformanceInfo().then(t=>{e.sender.send("vscode:issuePerformanceInfoResponse",t)})}),a.ipcMain.on("vscode:issueReporterConfirmClose",()=>{const e={message:i.localize(0,null),type:"warning",buttons:[i.localize(1,null),i.localize(2,null)]};this._issueWindow&&a.dialog.showMessageBox(this._issueWindow,e,e=>{0===e&&this._issueWindow&&(this._issueWindow.destroy(),this._issueWindow=null)})}),a.ipcMain.on("vscode:workbenchCommand",(e,t)=>{const{id:i,from:n,args:r}=t;let o;switch(n){case"issueReporter":o=this._issueParentWindow;break;case"processExplorer":o=this._processExplorerParentWindow;break;default:throw new Error(`Unexpected command source: ${n}`)}
o&&o.webContents.send("vscode:runAction",{id:i,from:n,args:r})}),a.ipcMain.on("vscode:openExternal",(e,t)=>{this.windowsService.openExternal(t)}),a.ipcMain.on("vscode:closeIssueReporter",e=>{this._issueWindow&&this._issueWindow.close()}),a.ipcMain.on("windowsInfoRequest",e=>{this.launchService.getMainProcessInfo().then(t=>{e.sender.send("vscode:windowsInfoResponse",t.windows)})})}openReporter(e){return new Promise(t=>{if(!this._issueWindow&&(this._issueParentWindow=a.BrowserWindow.getFocusedWindow(),this._issueParentWindow)){const t=this.getWindowPosition(this._issueParentWindow,700,800);this._issueWindow=new a.BrowserWindow({fullscreen:!1,width:t.width,height:t.height,minWidth:300,minHeight:200,x:t.x,y:t.y,title:i.localize(3,null),backgroundColor:e.styles.backgroundColor||"#1E1E1E"}),this._issueWindow.setMenuBarVisibility(!1);this.logService.trace("issueService#openReporter: opening issue reporter"),this._issueWindow.loadURL(this.getIssueReporterPath(e,{})),
this._issueWindow.on("close",()=>this._issueWindow=null),this._issueParentWindow.on("closed",()=>{this._issueWindow&&(this._issueWindow.close(),this._issueWindow=null)})}this._issueWindow&&this._issueWindow.focus()})}openProcessExplorer(t){return new Promise(o=>{if(!this._processExplorerWindow&&(this._processExplorerParentWindow=a.BrowserWindow.getFocusedWindow(),this._processExplorerParentWindow)){const o=this.getWindowPosition(this._processExplorerParentWindow,800,300);this._processExplorerWindow=new a.BrowserWindow({skipTaskbar:!0,resizable:!0,fullscreen:!1,width:o.width,height:o.height,minWidth:300,minHeight:200,x:o.x,y:o.y,backgroundColor:t.styles.backgroundColor,title:i.localize(4,null)}),this._processExplorerWindow.setMenuBarVisibility(!1);const s={appRoot:this.environmentService.appRoot,nodeCachedDataDir:this.environmentService.nodeCachedDataDir,windowId:this._processExplorerWindow.id,userEnv:this.userEnv,machineId:this.machineId,data:t},c=r.parseArgs(process.argv),l=n.assign(c,s)
;for(let e in l)void 0!==l[e]&&null!==l[e]&&""!==l[e]||delete l[e];this._processExplorerWindow.loadURL(`${e.toUrl("vs/code/electron-browser/processExplorer/processExplorer.html")}?config=${encodeURIComponent(JSON.stringify(l))}`),this._processExplorerWindow.on("close",()=>this._processExplorerWindow=null),this._processExplorerParentWindow.on("close",()=>{this._processExplorerWindow&&(this._processExplorerWindow.close(),this._processExplorerWindow=null)})}this._processExplorerWindow&&this._processExplorerWindow.focus()})}getSystemStatus(){return this.launchService.getMainProcessInfo().then(e=>this.diagnosticsService.getDiagnostics(e))}getWindowPosition(e,t,i){let n;const r=a.screen.getAllDisplays();if(1===r.length)n=r[0];else{if(d.isMacintosh){const e=a.screen.getCursorScreenPoint();n=a.screen.getDisplayNearestPoint(e)}!n&&e&&(n=a.screen.getDisplayMatching(e.getBounds())),n||(n=a.screen.getPrimaryDisplay()||r[0])}const o={width:t,height:i},s=n.bounds;return o.x=s.x+s.width/2-o.width/2,
o.y=s.y+s.height/2-o.height/2,s.width>0&&s.height>0&&(o.x<s.x&&(o.x=s.x),o.y<s.y&&(o.y=s.y),o.x>s.x+s.width&&(o.x=s.x),o.y>s.y+s.height&&(o.y=s.y),o.width>s.width&&(o.width=s.width),o.height>s.height&&(o.height=s.height)),o}getSystemInformation(){return new Promise((e,t)=>{this.launchService.getMainProcessInfo().then(t=>{e(this.diagnosticsService.getSystemInfo(t))})})}getPerformanceInfo(){return new Promise((e,t)=>{this.launchService.getMainProcessInfo().then(i=>{this.diagnosticsService.getPerformanceInfo(i).then(t=>{e(t)}).catch(e=>{this.logService.warn("issueService#getPerformanceInfo ",e.message),t(e)})})})}getIssueReporterPath(t,i){if(!this._issueWindow)throw new Error("Issue window has been disposed");const o={appRoot:this.environmentService.appRoot,nodeCachedDataDir:this.environmentService.nodeCachedDataDir,windowId:this._issueWindow.id,machineId:this.machineId,userEnv:this.userEnv,data:t,features:i},s=r.parseArgs(process.argv),a=n.assign(s,o)
;for(let e in a)void 0!==a[e]&&null!==a[e]&&""!==a[e]||delete a[e];return`${e.toUrl("vs/code/electron-browser/issue/issueReporter.html")}?config=${encodeURIComponent(JSON.stringify(a))}`}};p=o([s(2,u.IEnvironmentService),s(3,c.ILaunchService),s(4,h.ILogService),s(5,l.IDiagnosticsService),s(6,f.IWindowsService)],p),t.IssueService=p}),define(t[173],i([0,1,3,26,8,37]),function(e,t,i,n,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class s{constructor(e){this.service=e,this.onWindowOpen=i.Event.buffer(e.onWindowOpen,!0),this.onWindowFocus=i.Event.buffer(e.onWindowFocus,!0),this.onWindowBlur=i.Event.buffer(e.onWindowBlur,!0),this.onWindowMaximize=i.Event.buffer(e.onWindowMaximize,!0),this.onWindowUnmaximize=i.Event.buffer(e.onWindowUnmaximize,!0),this.onRecentlyOpenedChange=i.Event.buffer(e.onRecentlyOpenedChange,!0)}listen(e,t){switch(t){case"onWindowOpen":return this.onWindowOpen;case"onWindowFocus":return this.onWindowFocus;case"onWindowBlur":return this.onWindowBlur;case"onWindowMaximize":
return this.onWindowMaximize;case"onWindowUnmaximize":return this.onWindowUnmaximize;case"onRecentlyOpenedChange":return this.onRecentlyOpenedChange}throw new Error(`Event not found: ${t}`)}call(e,t,i){switch(t){case"pickFileFolderAndOpen":return this.service.pickFileFolderAndOpen(i);case"pickFileAndOpen":return this.service.pickFileAndOpen(i);case"pickFolderAndOpen":return this.service.pickFolderAndOpen(i);case"pickWorkspaceAndOpen":return this.service.pickWorkspaceAndOpen(i);case"showMessageBox":return this.service.showMessageBox(i[0],i[1]);case"showSaveDialog":return this.service.showSaveDialog(i[0],i[1]);case"showOpenDialog":return this.service.showOpenDialog(i[0],i[1]);case"reloadWindow":return this.service.reloadWindow(i[0],i[1]);case"openDevTools":return this.service.openDevTools(i[0],i[1]);case"toggleDevTools":return this.service.toggleDevTools(i);case"closeWorkspace":return this.service.closeWorkspace(i);case"enterWorkspace":return this.service.enterWorkspace(i[0],r.URI.revive(i[1]))
;case"toggleFullScreen":return this.service.toggleFullScreen(i);case"setRepresentedFilename":return this.service.setRepresentedFilename(i[0],i[1]);case"addRecentlyOpened":return this.service.addRecentlyOpened(i.map(e=>(o.isRecentFile(e)?e.fileUri=r.URI.revive(e.fileUri):o.isRecentFolder(e)?e.folderUri=r.URI.revive(e.folderUri):e.workspace=n.reviveWorkspaceIdentifier(e.workspace),e)));case"removeFromRecentlyOpened":return this.service.removeFromRecentlyOpened(i.map(r.URI.revive));case"clearRecentlyOpened":return this.service.clearRecentlyOpened();case"newWindowTab":return this.service.newWindowTab();case"showPreviousWindowTab":return this.service.showPreviousWindowTab();case"showNextWindowTab":return this.service.showNextWindowTab();case"moveWindowTabToNewWindow":return this.service.moveWindowTabToNewWindow();case"mergeAllWindowTabs":return this.service.mergeAllWindowTabs();case"toggleWindowTabsBar":return this.service.toggleWindowTabsBar();case"updateTouchBar":return this.service.updateTouchBar(i[0],i[1])
;case"getRecentlyOpened":return this.service.getRecentlyOpened(i);case"focusWindow":return this.service.focusWindow(i);case"closeWindow":return this.service.closeWindow(i);case"isFocused":return this.service.isFocused(i);case"isMaximized":return this.service.isMaximized(i);case"maximizeWindow":return this.service.maximizeWindow(i);case"unmaximizeWindow":return this.service.unmaximizeWindow(i);case"minimizeWindow":return this.service.minimizeWindow(i);case"onWindowTitleDoubleClick":return this.service.onWindowTitleDoubleClick(i);case"setDocumentEdited":return this.service.setDocumentEdited(i[0],i[1]);case"openWindow":{const e=i[1],t=i[2];return e.forEach(e=>(e.uri=r.URI.revive(e.uri),e)),t.waitMarkerFileURI=t.waitMarkerFileURI&&r.URI.revive(t.waitMarkerFileURI),this.service.openWindow(i[0],e,t)}case"openNewWindow":return this.service.openNewWindow(i);case"getWindows":return this.service.getWindows();case"getWindowCount":return this.service.getWindowCount();case"relaunch":return this.service.relaunch(i[0])
;case"whenSharedProcessReady":return this.service.whenSharedProcessReady();case"toggleSharedProcess":return this.service.toggleSharedProcess();case"quit":return this.service.quit();case"log":return this.service.log(i[0],i[1]);case"showItemInFolder":return this.service.showItemInFolder(r.URI.revive(i));case"getActiveWindowId":return this.service.getActiveWindowId();case"openExternal":return this.service.openExternal(i);case"startCrashReporter":return this.service.startCrashReporter(i);case"openAboutDialog":return this.service.openAboutDialog();case"resolveProxy":return this.service.resolveProxy(i[0],i[1])}throw new Error(`Call not found: ${t}`)}}t.WindowsChannel=s}),define(t[174],i([0,1,8,5,25,4,27,26,21,2]),function(e,t,i,n,r,o,s,a,c,l){"use strict";function u(e,t){let o=function(e,t){return e.map((e,o)=>{let s=null;if(a.isRawFileWorkspaceFolder(e))s=function(e,t){if(e){if(n.isAbsolute(e))return i.URI.file(e);if(t)return r.joinPath(t,e)}return null}(e.path,t);else if(a.isRawUriWorkspaceFolder(e))try{
"/"!==(s=i.URI.parse(e.uri)).path[0]&&(s=s.with({path:"/"+s.path}))}catch(e){console.warn(e)}if(s)return new h({uri:s,name:e.name,index:o},e)})}(e,t);return function(e){return c.distinct(e,e=>l.isLinux?e.uri.toString():e.uri.toString().toLowerCase())}(c.coalesce(o)).map(({uri:e,raw:t,name:i},n)=>new h({uri:e,name:i||r.basenameOrAuthority(e),index:n},t))}Object.defineProperty(t,"__esModule",{value:!0}),t.IWorkspaceContextService=o.createDecorator("contextService");!function(e){e[e.EMPTY=1]="EMPTY",e[e.FOLDER=2]="FOLDER",e[e.WORKSPACE=3]="WORKSPACE"}(t.WorkbenchState||(t.WorkbenchState={}));!function(e){e.isIWorkspace=function(e){return e&&"object"==typeof e&&"string"==typeof e.id&&Array.isArray(e.folders)}}(t.IWorkspace||(t.IWorkspace={}));!function(e){e.isIWorkspaceFolder=function(e){return e&&"object"==typeof e&&i.URI.isUri(e.uri)&&"string"==typeof e.name&&"function"==typeof e.toResource}}(t.IWorkspaceFolder||(t.IWorkspaceFolder={}));class d{constructor(e,t=[],i=null){this._id=e,this._configuration=i,
this._foldersMap=s.TernarySearchTree.forPaths(),this.folders=t}update(e){this._id=e.id,this._configuration=e.configuration,this.folders=e.folders}get folders(){return this._folders}set folders(e){this._folders=e,this.updateFoldersMap()}get id(){return this._id}get configuration(){return this._configuration}set configuration(e){this._configuration=e}getFolder(e){return e?this._foldersMap.findSubstr(e.toString())||null:null}updateFoldersMap(){this._foldersMap=s.TernarySearchTree.forPaths();for(const e of this.folders)this._foldersMap.set(e.uri.toString(),e)}toJSON(){return{id:this.id,folders:this.folders,configuration:this.configuration}}}t.Workspace=d;class h{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toResource(e){return r.joinPath(this.uri,e)}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}t.WorkspaceFolder=h,t.toWorkspaceFolders=u}),define(t[75],i([0,1,26,9,5,22,15,2,33,3,7,59,39,174,30,6,25]),function(e,t,i,n,r,a,c,l,u,d,h,f,p,g,m,v,w){"use strict"
;function y(e){return{configPath:e,id:function(e){let t=e.scheme===m.Schemas.file?w.originalFSPath(e):e.toString();return l.isLinux||(t=t.toLowerCase()),f.createHash("md5").update(t).digest("hex")}(e)}}Object.defineProperty(t,"__esModule",{value:!0});let S=class extends v.Disposable{constructor(e,t){super(),this.environmentService=e,this.logService=t,this._onUntitledWorkspaceDeleted=this._register(new d.Emitter),this.untitledWorkspacesHome=e.untitledWorkspacesHome}get onUntitledWorkspaceDeleted(){return this._onUntitledWorkspaceDeleted.event}resolveLocalWorkspaceSync(e){if(!this.isWorkspacePath(e))return null;if(e.scheme!==m.Schemas.file)return null;let t;try{t=c.readFileSync(e.fsPath,"utf8")}catch(e){return null}return this.doResolveWorkspace(e,t)}isWorkspacePath(e){return this.isInsideWorkspacesHome(e)||i.hasWorkspaceFileExtension(e.path)}doResolveWorkspace(e,t){try{const i=this.doParseStoredWorkspace(e,t),n=y(e);return{id:n.id,configPath:n.configPath,folders:g.toWorkspaceFolders(i.folders,w.dirname(e)),
remoteAuthority:i.remoteAuthority}}catch(e){this.logService.warn(e.toString())}return null}doParseStoredWorkspace(e,t){let n=p.parse(t);if(Array.isArray(n.folders)&&(n.folders=n.folders.filter(e=>i.isStoredWorkspaceFolder(e))),!Array.isArray(n.folders))throw new Error(`${e.toString()} looks like an invalid workspace file.`);return n}isInsideWorkspacesHome(e){return w.isEqualOrParent(e,this.environmentService.untitledWorkspacesHome)}createUntitledWorkspace(e,t){const{workspace:i,storedWorkspace:n}=this.newUntitledWorkspace(e,t),o=i.configPath.fsPath;return a.mkdirp(r.dirname(o)).then(()=>a.writeFile(o,JSON.stringify(n,null,"\t")).then(()=>i))}createUntitledWorkspaceSync(e,t){const{workspace:i,storedWorkspace:n}=this.newUntitledWorkspace(e,t),o=i.configPath.fsPath,s=r.dirname(o);if(!c.existsSync(s)){const e=r.dirname(s);c.existsSync(e)||c.mkdirSync(e),c.mkdirSync(s)}return u.writeFileAndFlushSync(o,JSON.stringify(n,null,"\t")),i}newUntitledWorkspace(e=[],t){
const n=(Date.now()+Math.round(1e3*Math.random())).toString(),r=w.joinPath(this.untitledWorkspacesHome,n),o=w.joinPath(r,i.UNTITLED_WORKSPACE_NAME),s=[];for(const t of e)s.push(i.getStoredWorkspaceFolder(t.uri,t.name,r));return{workspace:y(o),storedWorkspace:{folders:s,remoteAuthority:t}}}getWorkspaceIdentifier(e){return Promise.resolve(y(e))}isUntitledWorkspace(e){return this.isInsideWorkspacesHome(e.configPath)}deleteUntitledWorkspaceSync(e){this.isUntitledWorkspace(e)&&(this.doDeleteUntitledWorkspaceSync(e),this._onUntitledWorkspaceDeleted.fire(e))}deleteUntitledWorkspace(e){return this.deleteUntitledWorkspaceSync(e),Promise.resolve()}doDeleteUntitledWorkspaceSync(e){const t=w.originalFSPath(e.configPath);try{u.delSync(r.dirname(t));const i=r.join(this.environmentService.workspaceStorageHome,e.id);c.existsSync(i)&&c.writeFileSync(r.join(i,"obsolete"),"")}catch(e){this.logService.warn(`Unable to delete untitled workspace ${t} (${e}).`)}}getUntitledWorkspacesSync(){let e=[];try{
const t=u.readdirSync(this.untitledWorkspacesHome.fsPath).map(e=>w.joinPath(this.untitledWorkspacesHome,e,i.UNTITLED_WORKSPACE_NAME));for(const i of t){const t=y(i),n=this.resolveLocalWorkspaceSync(i);n?e.push({workspace:t,remoteAuthority:n.remoteAuthority}):this.doDeleteUntitledWorkspaceSync(t)}}catch(e){e&&"ENOENT"!==e.code&&this.logService.warn(`Unable to read folders in ${this.untitledWorkspacesHome} (${e}).`)}return e}};S=o([s(0,n.IEnvironmentService),s(1,h.ILogService)],S),t.WorkspacesMainService=S,t.getWorkspaceIdentifier=y}),define(t[176],i([0,1,8]),function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(e){this.service=e}listen(e,t){throw new Error(`Event not found: ${t}`)}call(e,t,n){switch(t){case"createUntitledWorkspace":{const e=n[0],t=n[1];let r=void 0;return Array.isArray(e)&&(r=e.map(e=>({uri:i.URI.revive(e.uri),name:e.name}))),this.service.createUntitledWorkspace(r,t)}case"deleteUntitledWorkspace":{const e=n
;return this.service.deleteUntitledWorkspace({id:e.id,configPath:i.URI.revive(e.configPath)})}case"getWorkspaceIdentifier":return this.service.getWorkspaceIdentifier(i.URI.revive(n))}throw new Error(`Call not found: ${t}`)}}t.WorkspacesChannel=n}),define(t[47],i([0,1,17,94,15,16,192,18]),function(e,t,i,r,o,s,a,c){"use strict";function l(t,o){let u;return(t.getRawRequest?Promise.resolve(t.getRawRequest(t)):Promise.resolve(function(t){return n(this,void 0,void 0,function*(){return("https:"===r.parse(t.url).protocol?yield new Promise((t,i)=>{e(["https"],t,i)}):yield new Promise((t,i)=>{e(["http"],t,i)})).request})}(t))).then(e=>new Promise((n,d)=>{const h=r.parse(t.url),f={hostname:h.hostname,port:h.port?parseInt(h.port):"https:"===h.protocol?443:80,protocol:h.protocol,path:h.path,method:t.type||"GET",headers:t.headers,agent:t.agent,rejectUnauthorized:!i.isBoolean(t.strictSSL)||t.strictSSL};if(t.user&&t.password&&(f.auth=t.user+":"+t.password),(u=e(f,e=>{const r=i.isNumber(t.followRedirects)?t.followRedirects:3
;if(e.statusCode&&e.statusCode>=300&&e.statusCode<400&&r>0&&e.headers.location)l(s.assign({},t,{url:e.headers.location,followRedirects:r-1}),o).then(n,d);else{let t=e;"gzip"===e.headers["content-encoding"]&&(t=t.pipe(a.createGunzip())),n({res:e,stream:t})}})).on("error",d),t.timeout&&u.setTimeout(t.timeout),t.data){if("string"!=typeof t.data)return void t.data.pipe(u);u.write(t.data)}u.end(),o.onCancellationRequested(()=>{u.abort(),d(c.canceled())})}))}function u(e){return e.res.statusCode&&e.res.statusCode>=200&&e.res.statusCode<300||1223===e.res.statusCode}function d(e){return 204===e.res.statusCode}Object.defineProperty(t,"__esModule",{value:!0}),t.request=l,t.download=function(e,t){return new Promise((i,n)=>{const r=o.createWriteStream(e);r.once("finish",()=>i(void 0)),t.stream.once("error",n),t.stream.pipe(r)})},t.asText=function(e){return new Promise((t,i)=>{if(!u(e))return i("Server returned "+e.res.statusCode);if(d(e))return t(null);const n=[];e.stream.on("data",e=>n.push(e)),
e.stream.on("end",()=>t(n.join(""))),e.stream.on("error",i)})},t.asJson=function(e){return new Promise((t,i)=>{if(!u(e))return i("Server returned "+e.res.statusCode);if(d(e))return t(null);const n=[];e.stream.on("data",e=>n.push(e)),e.stream.on("end",()=>{try{t(JSON.parse(n.join("")))}catch(e){i(e)}}),e.stream.on("error",i)})}}),define(t[178],i([0,1,23,5,21,18,100,76,16,41,31,47,49,20,119,9,22,33,28,27,34,7]),function(e,t,i,n,r,a,c,l,u,d,h,f,p,g,m,v,w,y,S,b,_,C){"use strict";function E(...e){return String(e.reduce((e,t)=>e|t,0))}function k(e,t){const i=(e||[]).filter(e=>e.statisticName===t)[0];return i?i.value:0}function I(e,t){return e.files.filter(e=>e.assetType===t)[0]?{uri:`${e.assetUri}/${t}`,fallbackUri:`${e.fallbackAssetUri}/${t}`}:null}function P(e,t){const i=e.properties?e.properties.filter(e=>e.key===t):[],n=i.length>0&&i[0].value;return n?n.split(",").map(e=>l.adoptToGalleryExtensionId(e)):[]}function M(e){const t=e.properties?e.properties.filter(e=>e.key===L.Engine):[]
;return t.length>0&&t[0].value||""}function A(t,i,n,r,o){const s={manifest:I(i,x.Manifest),readme:I(i,x.Details),changelog:I(i,x.Changelog),license:I(i,x.License),repository:function(e){if(e.properties){const t=e.properties.filter(e=>e.key===x.Repository),i=new RegExp("((git|ssh|http(s)?)|(git@[w.]+))(:(//)?)([w.@:/-~]+)(.git)(/)?"),n=t.filter(e=>i.test(e.value))[0];return n?{uri:n.value,fallbackUri:n.value}:null}return I(e,x.Repository)}(i),download:function(e){return{uri:`${e.fallbackAssetUri}/${x.VSIX}?redirect=true`,fallbackUri:`${e.fallbackAssetUri}/${x.VSIX}`}}(i),icon:function(t){const i=I(t,x.Icon);if(i)return i;const n=e.toUrl("./media/defaultIcon.png");return{uri:n,fallbackUri:n}}(i),coreTranslations:function(e){return e.files.filter(e=>0===e.assetType.indexOf("Microsoft.VisualStudio.Code.Translation.")).reduce((t,i)=>(t[i.assetType.substring("Microsoft.VisualStudio.Code.Translation.".length)]=I(e,i.assetType),t),{})}(i)};return{identifier:{
id:l.getGalleryExtensionId(t.publisher.publisherName,t.extensionName),uuid:t.extensionId},name:t.extensionName,version:i.version,date:i.lastUpdated,displayName:t.displayName,publisherId:t.publisher.publisherId,publisher:t.publisher.publisherName,publisherDisplayName:t.publisher.displayName,description:t.shortDescription||"",installCount:k(t.statistics,"install")+k(t.statistics,"updateCount"),rating:k(t.statistics,"averagerating"),ratingCount:k(t.statistics,"ratingcount"),assets:s,properties:{dependencies:P(i,L.Dependency),extensionPack:P(i,L.ExtensionPack),engine:M(i),localizedLanguages:function(e){const t=e.properties?e.properties.filter(e=>e.key===L.LocalizedLanguages):[],i=t.length>0&&t[0].value||"";return i?i.split(","):[]}(i)},telemetryData:{index:(r.pageNumber-1)*r.pageSize+n,searchText:r.searchText,querySource:o},preview:function(e){return-1!==e.indexOf("preview")}(t.flags)}}function O(e){const t=n.join(e.userDataPath,"machineid")
;return w.readFile(t,"utf8").then(e=>S.isUUID(e)?e:null,()=>null).then(e=>{if(!e){e=S.generateUuid();try{y.writeFileAndFlushSync(t,e)}catch(e){}}return{"X-Market-Client-Id":`VSCode ${p.default.version}`,"User-Agent":`VSCode ${p.default.version}`,"X-Market-User-Id":e}})}Object.defineProperty(t,"__esModule",{value:!0});var D;!function(e){e[e.None=0]="None",e[e.IncludeVersions=1]="IncludeVersions",e[e.IncludeFiles=2]="IncludeFiles",e[e.IncludeCategoryAndTags=4]="IncludeCategoryAndTags",e[e.IncludeSharedAccounts=8]="IncludeSharedAccounts",e[e.IncludeVersionProperties=16]="IncludeVersionProperties",e[e.ExcludeNonValidated=32]="ExcludeNonValidated",e[e.IncludeInstallationTargets=64]="IncludeInstallationTargets",e[e.IncludeAssetUri=128]="IncludeAssetUri",e[e.IncludeStatistics=256]="IncludeStatistics",e[e.IncludeLatestVersionOnly=512]="IncludeLatestVersionOnly",e[e.Unpublished=4096]="Unpublished"}(D||(D={}));var W;!function(e){e[e.Tag=1]="Tag",e[e.ExtensionId=4]="ExtensionId",e[e.Category=5]="Category",
e[e.ExtensionName=7]="ExtensionName",e[e.Target=8]="Target",e[e.Featured=9]="Featured",e[e.SearchText=10]="SearchText",e[e.ExcludeWithFlags=12]="ExcludeWithFlags"}(W||(W={}));const x={Icon:"Microsoft.VisualStudio.Services.Icons.Default",Details:"Microsoft.VisualStudio.Services.Content.Details",Changelog:"Microsoft.VisualStudio.Services.Content.Changelog",Manifest:"Microsoft.VisualStudio.Code.Manifest",VSIX:"Microsoft.VisualStudio.Services.VSIXPackage",License:"Microsoft.VisualStudio.Services.Content.License",Repository:"Microsoft.VisualStudio.Services.Links.Source"},L={Dependency:"Microsoft.VisualStudio.Code.ExtensionDependencies",ExtensionPack:"Microsoft.VisualStudio.Code.ExtensionPack",Engine:"Microsoft.VisualStudio.Code.Engine",LocalizedLanguages:"Microsoft.VisualStudio.Code.LocalizedLanguages"},T={pageNumber:1,pageSize:10,sortBy:0,sortOrder:0,flags:D.None,criteria:[],assetTypes:[]};class R{constructor(e=T){this.state=e}get pageNumber(){return this.state.pageNumber}get pageSize(){return this.state.pageSize
}get sortBy(){return this.state.sortBy}get sortOrder(){return this.state.sortOrder}get flags(){return this.state.flags}withPage(e,t=this.state.pageSize){return new R(u.assign({},this.state,{pageNumber:e,pageSize:t}))}withFilter(e,...t){const i=[...this.state.criteria,...t.map(t=>({filterType:e,value:t}))];return new R(u.assign({},this.state,{criteria:i}))}withSortBy(e){return new R(u.assign({},this.state,{sortBy:e}))}withSortOrder(e){return new R(u.assign({},this.state,{sortOrder:e}))}withFlags(...e){return new R(u.assign({},this.state,{flags:e.reduce((e,t)=>e|t,0)}))}withAssetTypes(...e){return new R(u.assign({},this.state,{assetTypes:e}))}get raw(){const{criteria:e,pageNumber:t,pageSize:i,sortBy:n,sortOrder:r,flags:o,assetTypes:s}=this.state;return{filters:[{criteria:e,pageNumber:t,pageSize:i,sortBy:n,sortOrder:r}],assetTypes:s,flags:o}}get searchText(){const e=this.state.criteria.filter(e=>e.filterType===W.SearchText)[0];return e&&e.value?e.value:""}}let U=class e{constructor(e,t,i,n){
this.requestService=e,this.logService=t,this.environmentService=i,this.telemetryService=n;const r=g.default.extensionsGallery;this.extensionsGalleryUrl=r&&r.serviceUrl,this.extensionsControlUrl=r&&r.controlUrl,this.commonHeadersPromise=O(this.environmentService)}api(e=""){return`${this.extensionsGalleryUrl}${e}`}isEnabled(){return!!this.extensionsGalleryUrl}getCompatibleExtension(e,t){const i=c.isIExtensionIdentifier(e)?null:e;if(i&&i.properties.engine&&m.isEngineValid(i.properties.engine))return Promise.resolve(i);const{id:n,uuid:r}=i?i.identifier:e;let o=(new R).withFlags(D.IncludeAssetUri,D.IncludeStatistics,D.IncludeFiles,D.IncludeVersionProperties,D.ExcludeNonValidated).withPage(1,1).withFilter(W.Target,"Microsoft.VisualStudio.Code").withFilter(W.ExcludeWithFlags,E(D.Unpublished));return o=r?o.withFilter(W.ExtensionId,r):o.withFilter(W.ExtensionName,n),this.queryGallery(o,_.CancellationToken.None).then(({galleryExtensions:e})=>{const[i]=e;if(!i||!i.versions.length)return null;if(t){
const e=i.versions.filter(e=>e.version===t)[0];if(e){const t=A(i,e,0,o);if(t.properties.engine&&m.isEngineValid(t.properties.engine))return t}return null}return this.getLastValidExtensionVersion(i,i.versions).then(e=>e?A(i,e,0,o):null)})}query(e,t){const i=_.CancellationToken.isCancellationToken(e)?{}:e,n=_.CancellationToken.isCancellationToken(e)?e:t;if(!this.isEnabled())return Promise.reject(new Error("No extension gallery service configured."));const r=i.names?"ids":i.text?"text":"all";let o=i.text||"";const s=u.getOrDefault(i,e=>e.pageSize,50);this.telemetryService.publicLog("galleryService:query",{type:r,text:o});let c=(new R).withFlags(D.IncludeLatestVersionOnly,D.IncludeAssetUri,D.IncludeStatistics,D.IncludeFiles,D.IncludeVersionProperties).withPage(1,s).withFilter(W.Target,"Microsoft.VisualStudio.Code").withFilter(W.ExcludeWithFlags,E(D.Unpublished));return o?((o=(o=(o=o.replace(/\bcategory:("([^"]*)"|([^"]\S*))(\s+|\b|$)/g,(e,t,i)=>(c=c.withFilter(W.Category,i||t),
""))).replace(/\btag:("([^"]*)"|([^"]\S*))(\s+|\b|$)/g,(e,t,i)=>(c=c.withFilter(W.Tag,i||t),""))).trim())&&(o=o.length<200?o:o.substring(0,200),c=c.withFilter(W.SearchText,o)),c=c.withSortBy(0)):c=i.ids?c.withFilter(W.ExtensionId,...i.ids):i.names?c.withFilter(W.ExtensionName,...i.names):c.withSortBy(4),"number"==typeof i.sortBy&&(c=c.withSortBy(i.sortBy)),"number"==typeof i.sortOrder&&(c=c.withSortOrder(i.sortOrder)),this.queryGallery(c,n).then(({galleryExtensions:e,total:t})=>{return{firstPage:e.map((e,t)=>A(e,e.versions[0],t,c,i.source)),total:t,pageSize:c.pageSize,getPage:(e,t)=>{if(t.isCancellationRequested)return Promise.reject(a.canceled());const n=c.withPage(e+1);return this.queryGallery(n,t).then(({galleryExtensions:e})=>e.map((e,t)=>A(e,e.versions[0],t,n,i.source)))}}})}queryGallery(e,t){return this.isEnabled()?this.commonHeadersPromise.then(i=>{const n=JSON.stringify(e.raw),r=u.assign({},i,{"Content-Type":"application/json",Accept:"application/json;api-version=3.0-preview.1",
"Accept-Encoding":"gzip","Content-Length":n.length});return this.requestService.request({type:"POST",url:this.api("/extensionquery"),data:n,headers:r},t).then(e=>e.res.statusCode&&e.res.statusCode>=400&&e.res.statusCode<500?{galleryExtensions:[],total:0}:f.asJson(e).then(e=>{if(e){const t=e.results[0],i=t.extensions,n=t.resultMetadata&&t.resultMetadata.filter(e=>"ResultCount"===e.metadataType)[0];return{galleryExtensions:i,total:n&&n.metadataItems.filter(e=>"TotalCount"===e.name)[0].count||0}}return{galleryExtensions:[],total:0}}))}):Promise.reject(new Error("No extension gallery service configured."))}reportStatistic(e,t,i,n){return this.isEnabled()?this.commonHeadersPromise.then(r=>{const o=Object.assign({},r,{Accept:"*/*;api-version=4.0-preview.1"});return this.requestService.request({type:"POST",url:this.api(`/publishers/${e}/extensions/${t}/${i}/stats?statType=${n}`),headers:o},_.CancellationToken.None).then(void 0,()=>void 0)}):Promise.resolve(void 0)}download(e,t){
this.logService.trace("ExtensionGalleryService#download",e.identifier.id);const r=n.join(i.tmpdir(),S.generateUuid()),o=l.getGalleryExtensionTelemetryData(e),s=(new Date).getTime(),a=1===t?"install":2===t?"update":"",c=a?{uri:`${e.assets.download.uri}&${a}=true`,fallbackUri:`${e.assets.download.fallbackUri}?${a}=true`}:e.assets.download;return this.getAsset(c).then(e=>f.download(r,e)).then(()=>(e=>this.telemetryService.publicLog("galleryService:downloadVSIX",u.assign(o,{duration:e})))((new Date).getTime()-s)).then(()=>r)}getReadme(e,t){return e.assets.readme?this.getAsset(e.assets.readme,{},t).then(e=>f.asText(e)).then(e=>e||""):Promise.resolve("")}getManifest(e,t){return e.assets.manifest?this.getAsset(e.assets.manifest,{},t).then(f.asText).then(JSON.parse):Promise.resolve(null)}getCoreTranslation(e,t){const i=e.assets.coreTranslations[t.toUpperCase()];return i?this.getAsset(i).then(f.asText).then(JSON.parse):Promise.resolve(null)}getChangelog(e,t){
return e.assets.changelog?this.getAsset(e.assets.changelog,{},t).then(e=>f.asText(e)).then(e=>e||""):Promise.resolve("")}loadAllDependencies(e,t){return this.getDependenciesReccursively(e.map(e=>e.id),[],t)}getAllVersions(e,t){let i=(new R).withFlags(D.IncludeVersions,D.IncludeFiles,D.IncludeVersionProperties,D.ExcludeNonValidated).withPage(1,1).withFilter(W.Target,"Microsoft.VisualStudio.Code").withFilter(W.ExcludeWithFlags,E(D.Unpublished));return i=e.identifier.uuid?i.withFilter(W.ExtensionId,e.identifier.uuid):i.withFilter(W.ExtensionName,e.identifier.id),this.queryGallery(i,_.CancellationToken.None).then(({galleryExtensions:e})=>e.length?t?Promise.all(e[0].versions.map(e=>this.getEngine(e).then(t=>m.isEngineValid(t)?e:null))).then(e=>e.filter(e=>!!e).map(e=>({version:e.version,date:e.lastUpdated}))):e[0].versions.map(e=>({version:e.version,date:e.lastUpdated})):[])}loadDependencies(e,t){if(!e||0===e.length)return Promise.resolve([])
;let i=(new R).withFlags(D.IncludeLatestVersionOnly,D.IncludeAssetUri,D.IncludeStatistics,D.IncludeFiles,D.IncludeVersionProperties).withPage(1,e.length).withFilter(W.Target,"Microsoft.VisualStudio.Code").withFilter(W.ExcludeWithFlags,E(D.Unpublished)).withAssetTypes(x.Icon,x.License,x.Details,x.Manifest,x.VSIX).withFilter(W.ExtensionName,...e);return this.queryGallery(i,t).then(e=>{const t=[],n=[];for(let r=0;r<e.galleryExtensions.length;r++){const o=e.galleryExtensions[r];-1===n.indexOf(o.extensionId)&&(t.push(A(o,o.versions[0],r,i,"dependencies")),n.push(o.extensionId))}return t})}getDependenciesReccursively(t,i,n){return t&&t.length&&(t=i.length?t.filter(t=>!e.hasExtensionByName(i,t)):t).length?this.loadDependencies(t,n).then(t=>{const o=new Set;for(const e of t)e.properties.dependencies&&e.properties.dependencies.forEach(e=>o.add(e));i=r.distinct(i.concat(t),e=>e.identifier.uuid);const s=[];return o.forEach(t=>!e.hasExtensionByName(i,t)&&s.push(t)),this.getDependenciesReccursively(s,i,n)
}):Promise.resolve(i)}getAsset(e,t={},i=_.CancellationToken.None){return this.commonHeadersPromise.then(n=>{const r=u.assign({},n,t.headers||{});t=u.assign({},t,{type:"GET"},{headers:r});const o=e.uri,s=e.fallbackUri,c=u.assign({},t,{url:o});return this.requestService.request(c,i).then(e=>200===e.res.statusCode?Promise.resolve(e):f.asText(e).then(t=>Promise.reject(new Error(`Expected 200, got back ${e.res.statusCode} instead.\n\n${t}`)))).then(void 0,e=>{if(a.isPromiseCanceledError(e))return Promise.reject(e);const n=a.getErrorMessage(e);this.telemetryService.publicLog("galleryService:requestError",{url:o,cdn:!0,message:n}),this.telemetryService.publicLog("galleryService:cdnFallback",{url:o,message:n});const r=u.assign({},t,{url:s});return this.requestService.request(r,i).then(void 0,e=>{if(a.isPromiseCanceledError(e))return Promise.reject(e);const t=a.getErrorMessage(e);return this.telemetryService.publicLog("galleryService:requestError",{url:s,cdn:!1,message:t}),Promise.reject(e)})})})}
getLastValidExtensionVersion(e,t){const i=this.getLastValidExtensionVersionFromProperties(e,t);return i||this.getLastValidExtensionVersionReccursively(e,t)}getLastValidExtensionVersionFromProperties(e,t){for(const e of t){const t=M(e);if(!t)return null;if(m.isEngineValid(t))return Promise.resolve(e)}return null}getEngine(e){const t=M(e);if(t)return Promise.resolve(t);const i=I(e,x.Manifest);if(!i)return Promise.reject("Manifest was not found");return this.getAsset(i,{headers:{"Accept-Encoding":"gzip"}}).then(e=>f.asJson(e)).then(e=>e?e.engines.vscode:Promise.reject("Error while reading manifest"))}getLastValidExtensionVersionReccursively(e,t){if(!t.length)return Promise.resolve(null);const i=t[0];return this.getEngine(i).then(n=>m.isEngineValid(n)?(i.properties=i.properties||[],i.properties.push({key:L.Engine,value:n}),i):this.getLastValidExtensionVersionReccursively(e,t.slice(1)))}static hasExtensionByName(e,t){for(const i of e)if(`${i.publisher}.${i.name}`===t)return!0;return!1}getExtensionsReport(){
return this.isEnabled()?this.extensionsControlUrl?this.requestService.request({type:"GET",url:this.extensionsControlUrl},_.CancellationToken.None).then(e=>200!==e.res.statusCode?Promise.reject(new Error("Could not get extensions report.")):f.asJson(e).then(e=>{const t=new Map;if(e)for(const i of e.malicious){const e=t.get(i)||{id:{id:i},malicious:!0,slow:!1};e.malicious=!0,t.set(i,e)}return Promise.resolve(b.values(t))})):Promise.resolve([]):Promise.reject(new Error("No extension gallery service configured."))}};U=o([s(0,d.IRequestService),s(1,C.ILogService),s(2,v.IEnvironmentService),s(3,h.ITelemetryService)],U),t.ExtensionGalleryService=U,t.resolveMarketplaceHeaders=O}),define(t[179],i([0,1,5,16,175,8,29,11,9,7,14,35,20,50,6,2,26,55,187,178,57,12,17]),function(e,t,i,n,r,a,c,l,u,d,h,f,p,g,m,v,w,y,S,b,_,C,E){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultWindowState=function(e=1){return{width:1024,height:768,mode:e}};let k=class o extends m.Disposable{constructor(e,t,i,n,r,o,s){
super(),this.logService=t,this.environmentService=i,this.configurationService=n,this.stateService=r,this.workspacesMainService=o,this.backupMainService=s,this.touchBarGroups=[],this._lastFocusTime=-1,this._readyState=0,this.whenReadyCallbacks=[],this.nodeless=!(!i.args.nodeless||i.isBuilt),this.createBrowserWindow(e),this.onConfigurationUpdated(),this.createTouchBar(),this.handleMarketplaceRequests(),this.registerListeners()}createBrowserWindow(e){this.windowState=this.restoreWindowState(e.state);const t=0===this.windowState.mode||3===this.windowState.mode,n={width:this.windowState.width,height:this.windowState.height,x:this.windowState.x,y:this.windowState.y,backgroundColor:this.nodeless?void 0:_.getBackgroundColor(this.stateService),minWidth:o.MIN_WIDTH,minHeight:o.MIN_HEIGHT,show:!t,title:p.default.nameLong,webPreferences:{backgroundThrottling:!1}};this.nodeless&&(n.webPreferences.nodeIntegration=!1),v.isLinux&&(n.icon=i.join(this.environmentService.appRoot,"resources/linux/code.png"))
;const r=this.configurationService.getValue("window");v.isMacintosh&&!this.useNativeFullScreen()&&(n.fullscreenable=!1),v.isMacintosh&&(n.acceptFirstMouse=!0,r&&!1===r.clickThroughInactive&&(n.acceptFirstMouse=!1)),v.isMacintosh&&r&&!0===r.nativeTabs&&(n.tabbingIdentifier=p.default.nameShort);const s="custom"===g.getTitleBarStyle(this.configurationService,this.environmentService,!!e.extensionDevelopmentPath);s&&(n.titleBarStyle="hidden",this.hiddenTitleBarStyle=!0,v.isMacintosh||(n.frame=!1)),this._win=new l.BrowserWindow(n),this._id=this._win.id,v.isMacintosh&&s&&this._win.setSheetOffset(22),t&&(this._win.maximize(),3===this.windowState.mode&&this.setFullScreen(!0),this._win.isVisible()||this._win.show()),this.nodeless&&this._win.webContents.toggleDevTools(),this._lastFocusTime=Date.now()}hasHiddenTitleBarStyle(){return this.hiddenTitleBarStyle}get isExtensionDevelopmentHost(){return!!this.config.extensionDevelopmentPath}get isExtensionTestHost(){return!!this.config.extensionTestsPath}
get extensionDevelopmentPath(){return this.config.extensionDevelopmentPath}get config(){return this.currentConfig}get id(){return this._id}get win(){return this._win}setRepresentedFilename(e){v.isMacintosh?this.win.setRepresentedFilename(e):this.representedFilename=e}getRepresentedFilename(){return v.isMacintosh?this.win.getRepresentedFilename():this.representedFilename}focus(){this._win&&(this._win.isMinimized()&&this._win.restore(),this._win.focus())}get lastFocusTime(){return this._lastFocusTime}get backupPath(){return this.currentConfig?this.currentConfig.backupPath:void 0}get openedWorkspace(){return this.currentConfig?this.currentConfig.workspace:void 0}get openedFolderUri(){return this.currentConfig?this.currentConfig.folderUri:void 0}get remoteAuthority(){return this.currentConfig?this.currentConfig.remoteAuthority:void 0}setReady(){for(this._readyState=3;this.whenReadyCallbacks.length;)this.whenReadyCallbacks.pop()(this)}ready(){return new Promise(e=>{if(this.isReady)return e(this)
;this.whenReadyCallbacks.push(e)})}get isReady(){return 3===this._readyState}handleMarketplaceRequests(){this.marketplaceHeadersPromise=b.resolveMarketplaceHeaders(this.environmentService);this._win.webContents.session.webRequest.onBeforeSendHeaders({urls:["https://marketplace.visualstudio.com/*","https://*.vsassets.io/*"]},(e,t)=>{this.marketplaceHeadersPromise.then(i=>{const r=n.assign(e.requestHeaders,i);t({cancel:!1,requestHeaders:r})})})}registerListeners(){if(this._win.webContents.session.webRequest.onBeforeRequest(null,(e,t)=>{if(e.url.indexOf(".svg")>0){const i=a.URI.parse(e.url);if(i&&!i.scheme.match(/file/i)&&i.path.endsWith(".svg"))return t({cancel:!0})}return t({})}),this._win.webContents.session.webRequest.onHeadersReceived(null,(e,t)=>{const i=e.responseHeaders["content-type"]||e.responseHeaders["Content-Type"];return t(i&&Array.isArray(i)&&i.some(e=>e.toLowerCase().indexOf("image/svg")>=0)?{cancel:!0}:{cancel:!1,responseHeaders:e.responseHeaders})}),
this._win.webContents.on("did-finish-load",()=>{this._readyState=1,this.pendingLoadConfig&&(this.currentConfig=this.pendingLoadConfig,this.pendingLoadConfig=void 0),this._win&&!this._win.isVisible()&&(0===this.windowState.mode&&this._win.maximize(),this._win.isVisible()||this._win.show())}),this.registerNavigationListenerOn("app-command","browser-backward","browser-forward",!1),this._win.on("focus",()=>{this._lastFocusTime=Date.now()}),v.isMacintosh){const e=this._register(new C.RunOnceScheduler(()=>{this._win&&!this.useNativeFullScreen()&&this.isFullScreen()&&(this.setFullScreen(!1),this.setFullScreen(!0))},100)),t=()=>e.schedule();l.screen.on("display-metrics-changed",t),this._register(m.toDisposable(()=>l.screen.removeListener("display-metrics-changed",t))),l.screen.on("display-added",t),this._register(m.toDisposable(()=>l.screen.removeListener("display-added",t))),l.screen.on("display-removed",t),this._register(m.toDisposable(()=>l.screen.removeListener("display-removed",t)))}this._win.on("maximize",e=>{
this.currentConfig&&(this.currentConfig.maximized=!0),l.app.emit("browser-window-maximize",e,this._win)}),this._win.on("unmaximize",e=>{this.currentConfig&&(this.currentConfig.maximized=!1),l.app.emit("browser-window-unmaximize",e,this._win)}),this._win.on("enter-full-screen",()=>{this.sendWhenReady("vscode:enterFullScreen")}),this._win.on("leave-full-screen",()=>{this.sendWhenReady("vscode:leaveFullScreen")}),this._win.webContents.on("did-fail-load",(e,t,i,n,r)=>{this.logService.warn("[electron event]: fail to load, ",i)}),this._register(this.configurationService.onDidChangeConfiguration(e=>this.onConfigurationUpdated())),this._register(this.workspacesMainService.onUntitledWorkspaceDeleted(e=>this.onUntitledWorkspaceDeleted(e)))}onUntitledWorkspaceDeleted(e){this.openedWorkspace&&this.openedWorkspace.id===e.id&&(this.currentConfig.workspace=void 0)}onConfigurationUpdated(){const e=this.getMenuBarVisibility();if(e!==this.currentMenuBarVisibility&&(this.currentMenuBarVisibility=e,this.setMenuBarVisibility(e)),
v.isMacintosh){const e=this.configurationService.getValue();e&&e.workbench&&e.workbench.editor&&e.workbench.editor.swipeToNavigate?this.registerNavigationListenerOn("swipe","left","right",!0):this._win.removeAllListeners("swipe")}}registerNavigationListenerOn(e,t,i,n){this._win.on(e,(e,r)=>{this.isReady&&(r===t?this.send("vscode:runAction",{id:n?"workbench.action.openPreviousRecentlyUsedEditor":"workbench.action.navigateBack",from:"mouse"}):r===i&&this.send("vscode:runAction",{id:n?"workbench.action.openNextRecentlyUsedEditor":"workbench.action.navigateForward",from:"mouse"}))})}addTabbedWindow(e){v.isMacintosh&&this._win.addTabbedWindow(e.win)}load(e,t,i){0===this._readyState?this.currentConfig=e:(this.pendingLoadConfig=e,this._readyState=2);const r=n.assign({},e);void 0!==i&&(r["disable-extensions"]=i),v.isMacintosh&&this._win.isDocumentEdited()&&(t&&this.backupMainService.isHotExitEnabled()||this._win.setDocumentEdited(!1)),t||(this.getRepresentedFilename()&&this.setRepresentedFilename(""),
this._win.setTitle(p.default.nameLong)),S.mark("main:loadWindow"),this._win.loadURL(this.getUrl(r)),this.environmentService.isBuilt||this.environmentService.extensionTestsLocationURI||(this.showTimeoutHandle=setTimeout(()=>{!this._win||this._win.isVisible()||this._win.isMinimized()||(this._win.show(),this._win.focus(),this._win.webContents.openDevTools())},1e4))}reload(e,t){const i=e||n.mixin({},this.currentConfig);delete i.filesToOpen,delete i.filesToCreate,delete i.filesToDiff,delete i.filesToWait,this.isExtensionDevelopmentHost&&t&&(i.verbose=t.verbose,i["inspect-extensions"]=t["inspect-extensions"],i["inspect-brk-extensions"]=t["inspect-brk-extensions"],i.debugId=t.debugId,i["extensions-dir"]=t["extensions-dir"]),i.isInitialStartup=!1;const r=t?t["disable-extensions"]:void 0;this.load(i,!0,r)}getUrl(e){e.windowId=this._win.id,e.logLevel=this.logService.getLevel();const t=this.configurationService.getValue("window"),r=t&&t.zoomLevel;"number"==typeof r&&(e.zoomLevel=r),e.fullscreen=this.isFullScreen()
;let s=!0;t&&!1===t.autoDetectHighContrast&&(s=!1),e.highContrast=v.isWindows&&s&&l.systemPreferences.isInvertedColorScheme(),e.accessibilitySupport=l.app.isAccessibilitySupportEnabled(),e.maximized=this._win.isMaximized(),e.frameless=this.hasHiddenTitleBarStyle()&&!v.isMacintosh,e.perfEntries=S.exportEntries(),e.partsSplashPath=i.join(this.environmentService.userDataPath,"rapid_render.json");const a=f.parseArgs(process.argv),c=n.assign(a,e);for(let e in c)void 0!==c[e]&&null!==c[e]&&""!==c[e]&&!1!==c[e]||delete c[e];let u=this.doGetUrl(c);return u.length>o.MAX_URL_LENGTH&&(delete c.userEnv,this.logService.warn("Application URL exceeds maximum of 2MB and was shortened."),(u=this.doGetUrl(c)).length>o.MAX_URL_LENGTH&&this.logService.error("Application URL exceeds maximum of 2MB and cannot be loaded.")),u}doGetUrl(t){
return this.nodeless?`${e.toUrl("vs/code/electron-browser/workbench/workbench.nodeless.html")}?config=${encodeURIComponent(JSON.stringify(t))}`:`${e.toUrl("vs/code/electron-browser/workbench/workbench.html")}?config=${encodeURIComponent(JSON.stringify(t))}`}serializeWindowState(){if(!this._win)return t.defaultWindowState();if(this.isFullScreen()){const e=l.screen.getDisplayMatching(this.getBounds()),i=t.defaultWindowState();return{mode:3,display:e?e.id:void 0,width:this.windowState.width||i.width,height:this.windowState.height||i.height,x:this.windowState.x||0,y:this.windowState.y||0}}const e=Object.create(null);let i;if(i=!v.isMacintosh&&this._win.isMaximized()?0:1,e.mode=0===i?0:1,1===i||0===i){const t=this.getBounds();e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height}return e}restoreWindowState(e){if(e)try{e=E.withNullAsUndefined(this.validateWindowState(e))}catch(e){this.logService.warn(`Unexpected error validating window state: ${e}\n${e.stack}`)}return e||(e=t.defaultWindowState()),e}
validateWindowState(e){if(!e)return null;if("number"!=typeof e.x||"number"!=typeof e.y||"number"!=typeof e.width||"number"!=typeof e.height)return null;if(e.width<=0||e.height<=0)return null;const i=l.screen.getAllDisplays();if(1===i.length){const n=i[0].bounds;return 0!==e.mode&&n.width>0&&n.height>0&&(e.x<n.x&&(e.x=n.x),e.y<n.y&&(e.y=n.y),e.x>n.x+n.width&&(e.x=n.x),e.y>n.y+n.height&&(e.y=n.y),e.width>n.width&&(e.width=n.width),e.height>n.height&&(e.height=n.height)),0===e.mode?t.defaultWindowState(0):e}if(e.display&&3===e.mode){const n=i.filter(t=>t.id===e.display)[0];if(n&&n.bounds&&"number"==typeof n.bounds.x&&"number"==typeof n.bounds.y){const e=t.defaultWindowState(3);return e.x=n.bounds.x,e.y=n.bounds.y,e}}const n={x:e.x,y:e.y,width:e.width,height:e.height},r=l.screen.getDisplayMatching(n);if(r&&n.x<r.bounds.x+r.bounds.width&&n.y<r.bounds.y+r.bounds.height&&n.x+n.width>r.bounds.x&&n.y+n.height>r.bounds.y){if(0===e.mode){const i=t.defaultWindowState(0);return i.x=e.x,i.y=e.y,i}return e}return null}
getBounds(){const e=this._win.getPosition(),t=this._win.getSize();return{x:e[0],y:e[1],width:t[0],height:t[1]}}toggleFullScreen(){this.setFullScreen(!this.isFullScreen())}setFullScreen(e){this.useNativeFullScreen()?this.setNativeFullScreen(e):this.setSimpleFullScreen(e),this.sendWhenReady(e?"vscode:enterFullScreen":"vscode:leaveFullScreen"),this.setMenuBarVisibility(this.currentMenuBarVisibility,!1)}isFullScreen(){return this._win.isFullScreen()||this._win.isSimpleFullScreen()}setNativeFullScreen(e){this._win.isSimpleFullScreen()&&this._win.setSimpleFullScreen(!1),this._win.setFullScreen(e)}setSimpleFullScreen(e){this._win.isFullScreen()&&this._win.setFullScreen(!1),this._win.setSimpleFullScreen(e),this._win.webContents.focus()}useNativeFullScreen(){const e=this.configurationService.getValue("window");return!e||"boolean"!=typeof e.nativeFullScreen||(!!e.nativeTabs||!1!==e.nativeFullScreen)}isMinimized(){return this._win.isMinimized()}getMenuBarVisibility(){const e=this.configurationService.getValue("window")
;if(!e||!e.menuBarVisibility)return"default";let t=e.menuBarVisibility;return["visible","toggle","hidden"].indexOf(t)<0&&(t="default"),t}setMenuBarVisibility(e,t=!0){v.isMacintosh||("toggle"===e&&t&&this.send("vscode:showInfoMessage",r.localize(0,null)),"hidden"===e?setTimeout(()=>{this.doSetMenuBarVisibility(e)}):this.doSetMenuBarVisibility(e))}doSetMenuBarVisibility(e){const t=this.isFullScreen();switch(e){case"default":this._win.setMenuBarVisibility(!t),this._win.setAutoHideMenuBar(t);break;case"visible":this._win.setMenuBarVisibility(!0),this._win.setAutoHideMenuBar(!1);break;case"toggle":this._win.setMenuBarVisibility(!1),this._win.setAutoHideMenuBar(!0);break;case"hidden":this._win.setMenuBarVisibility(!1),this._win.setAutoHideMenuBar(!1)}}onWindowTitleDoubleClick(){if(v.isMacintosh){switch(l.systemPreferences.getUserDefault("AppleActionOnDoubleClick","string")){case"Minimize":this.win.minimize();break;case"None":break;case"Maximize":default:
this.win.isMaximized()?this.win.unmaximize():this.win.maximize()}}else this.win.isMaximized()?this.win.unmaximize():this.win.maximize()}close(){this._win&&this._win.close()}sendWhenReady(e,...t){this.isReady?this.send(e,...t):this.ready().then(()=>this.send(e,...t))}send(e,...t){this._win&&this._win.webContents.send(e,...t)}updateTouchBar(e){v.isMacintosh&&this.touchBarGroups.forEach((t,i)=>{const n=e[i];t.segments=this.createTouchBarGroupSegments(n)})}createTouchBar(){if(v.isMacintosh){for(let e=0;e<10;e++){const e=this.createTouchBarGroup();this.touchBarGroups.push(e)}this._win.setTouchBar(new l.TouchBar({items:this.touchBarGroups}))}}createTouchBarGroup(e=[]){const t=this.createTouchBarGroupSegments(e),i=new l.TouchBar.TouchBarSegmentedControl({segments:t,mode:"buttons",segmentStyle:"automatic",change:e=>{this.sendWhenReady("vscode:runAction",{id:i.segments[e].id,from:"touchbar"})}});return i}createTouchBarGroupSegments(e=[]){return e.map(e=>{let t
;return e.iconLocation&&"file"===e.iconLocation.dark.scheme&&(t=l.nativeImage.createFromPath(a.URI.revive(e.iconLocation.dark).fsPath)).isEmpty()&&(t=void 0),{id:e.id,label:t?void 0:e.title,icon:t}})}dispose(){super.dispose(),this.showTimeoutHandle&&clearTimeout(this.showTimeoutHandle),this._win=null}};k.MIN_WIDTH=200,k.MIN_HEIGHT=120,k.MAX_URL_LENGTH=2097152,k=o([s(1,d.ILogService),s(2,u.IEnvironmentService),s(3,h.IConfigurationService),s(4,c.IStateService),s(5,w.IWorkspacesMainService),s(6,y.IBackupMainService)],k),t.CodeWindow=k}),define(t[180],i([0,1,15,5,177,21,16,55,9,29,179,35,11,74,24,14,7,167,3,20,31,37,2,26,4,42,30,70,8,12,22,25,73,137,75]),function(e,t,i,n,r,a,c,l,u,d,h,f,p,g,m,v,w,y,S,b,_,C,E,k,I,P,M,A,O,D,W,x,L,T,R){"use strict";function U(e){return!!e.folderUri}function F(e){return!!e.workspace}Object.defineProperty(t,"__esModule",{value:!0});var N;!function(e){e[e.UNRESPONSIVE=1]="UNRESPONSIVE",e[e.CRASHED=2]="CRASHED"}(N||(N={}));let B=class e{constructor(t,i,n,r,o,s,a,c,l,u,d){
this.machineId=t,this.logService=i,this.stateService=n,this.environmentService=r,this.lifecycleService=o,this.backupMainService=s,this.telemetryService=a,this.configurationService=c,this.historyMainService=l,this.workspacesMainService=u,this.instantiationService=d,this._onWindowReady=new S.Emitter,this.onWindowReady=this._onWindowReady.event,this._onWindowClose=new S.Emitter,this.onWindowClose=this._onWindowClose.event,this._onWindowLoad=new S.Emitter,this.onWindowLoad=this._onWindowLoad.event,this._onWindowsCountChanged=new S.Emitter,this.onWindowsCountChanged=this._onWindowsCountChanged.event;const h=this.stateService.getItem(e.windowsStateStorageKey);this.windowsState=T.restoreWindowsState(h),Array.isArray(this.windowsState.openedWindows)||(this.windowsState.openedWindows=[]),this.dialogs=new j(r,a,n,this),this.workspacesManager=new z(u,s,this)}ready(e){this.initialUserEnv=e,this.registerListeners()}registerListeners(){p.ipcMain.on("vscode:workbenchReady",(e,t)=>{
this.logService.trace("IPC#vscode-workbenchReady");const i=this.getWindowById(t);i&&(i.setReady(),this._onWindowReady.fire(i))}),E.isWindows&&p.systemPreferences.on("inverted-color-scheme-changed",()=>{p.systemPreferences.isInvertedColorScheme()?this.sendToAll("vscode:enterHighContrast"):this.sendToAll("vscode:leaveHighContrast")}),this.lifecycleService.onBeforeWindowClose(e=>this.onBeforeWindowClose(e)),this.lifecycleService.onBeforeShutdown(()=>this.onBeforeShutdown()),this.onWindowsCountChanged(e=>{e.newCount-e.oldCount>0&&(this.lastClosedWindowState=void 0)})}onBeforeShutdown(){const t={openedWindows:[],lastPluginDevelopmentHostWindow:this.windowsState.lastPluginDevelopmentHostWindow,lastActiveWindow:this.lastClosedWindowState};if(!t.lastActiveWindow){let i=this.getLastActiveWindow();i&&!i.isExtensionDevelopmentHost||(i=e.WINDOWS.filter(e=>!e.isExtensionDevelopmentHost)[0]),i&&(t.lastActiveWindow=this.toWindowState(i))}const i=e.WINDOWS.filter(e=>e.isExtensionDevelopmentHost&&!e.isExtensionTestHost)[0]
;i&&(t.lastPluginDevelopmentHostWindow=this.toWindowState(i)),this.getWindowCount()>1&&(t.openedWindows=e.WINDOWS.filter(e=>!e.isExtensionDevelopmentHost).map(e=>this.toWindowState(e))),this.stateService.setItem(e.windowsStateStorageKey,T.getWindowsStateStoreData(t))}onBeforeWindowClose(e){if(this.lifecycleService.quitRequested)return;const t=this.toWindowState(e);e.isExtensionDevelopmentHost&&!e.isExtensionTestHost?this.windowsState.lastPluginDevelopmentHostWindow=t:e.isExtensionDevelopmentHost||!e.openedWorkspace&&!e.openedFolderUri||this.windowsState.openedWindows.forEach(i=>{const n=e.openedWorkspace&&i.workspace&&i.workspace.id===e.openedWorkspace.id,r=e.openedFolderUri&&i.folderUri&&x.isEqual(i.folderUri,e.openedFolderUri);(n||r)&&(i.uiState=t.uiState)}),1===this.getWindowCount()&&(this.lastClosedWindowState=t)}toWindowState(e){return{workspace:e.openedWorkspace,folderUri:e.openedFolderUri,backupPath:e.backupPath,remoteAuthority:e.remoteAuthority,uiState:e.serializeWindowState()}}open(e){
this.logService.trace("windowsManager#open"),e=this.validateOpenConfig(e);const t=this.getPathsToOpen(e),r=[],o=[],s=[],a=[];let c,l=0;for(const i of t)U(i)?e.addMode?r.push(i):o.push(i):F(i)?s.push(i):i.fileUri?(c||(c={filesToCreate:[],filesToOpen:[],filesToDiff:[],remoteAuthority:i.remoteAuthority}),i.createFilePath?c.filesToCreate.push(i):c.filesToOpen.push(i)):i.backupPath?a.push({backupFolder:n.basename(i.backupPath),remoteAuthority:i.remoteAuthority}):l++;c&&e.diffMode&&2===c.filesToOpen.length&&(c.filesToDiff=c.filesToOpen,c.filesToOpen=[],c.filesToCreate=[]),c&&e.waitMarkerFileURI&&(c.filesToWait={paths:[...c.filesToDiff,...c.filesToOpen,...c.filesToCreate],waitMarkerFileUri:e.waitMarkerFileURI});let u=[],d=[];if(!e.initialStartup||e.cli.extensionDevelopmentPath||e.cli["disable-restore-windows"])a.length=0;else{let e=this.backupMainService.getFolderBackupPaths();r.push(...e.map(e=>({folderUri:e,remoteAuhority:L.getRemoteAuthority(e),isRestored:!0}))),
d=[...this.backupMainService.getWorkspaceBackups(),...this.workspacesMainService.getUntitledWorkspacesSync()],s.push(...d),a.push(...this.backupMainService.getEmptyWindowBackupPaths())}const h=this.doOpen(e,s,o,a,l,c,r);if(h.length>1){let t=!0,i=!0;if(this.windowsState.lastActiveWindow&&!e.forceEmpty&&!f.hasArgs(e.cli._)&&!f.hasArgs(e.cli["file-uri"])&&!f.hasArgs(e.cli["folder-uri"])&&!(e.urisToOpen&&e.urisToOpen.length)){const e=h.filter(e=>e.backupPath===this.windowsState.lastActiveWindow.backupPath);e.length&&(e[0].focus(),t=!1,i=!1)}if(t)for(let e=h.length-1;e>=0;e--){const t=h[e];if(!(t.openedWorkspace&&d.some(e=>e.workspace.id===t.openedWorkspace.id)||t.openedFolderUri&&u.some(e=>x.isEqual(e,t.openedFolderUri))||t.backupPath&&a.some(e=>e.backupFolder===n.basename(t.backupPath)))){t.focus(),i=!1;break}}i&&h[h.length-1].focus()}if(!h.some(e=>e.isExtensionDevelopmentHost)&&!e.diffMode&&!e.noRecentEntry){const e=[];for(let i of t)i.workspace?e.push({label:i.label,workspace:i.workspace}):i.folderUri?e.push({
label:i.label,folderUri:i.folderUri}):i.fileUri&&e.push({label:i.label,fileUri:i.fileUri});this.historyMainService.addRecentlyOpened(e)}const p=e.waitMarkerFileURI;return 0===e.context&&p&&1===h.length&&h[0]&&this.waitForWindowCloseOrLoad(h[0].id).then(()=>i.unlink(p.fsPath,e=>void 0)),h}validateOpenConfig(e){return!e.addMode||!e.initialStartup&&this.getLastActiveWindow()||(e.addMode=!1),e}doOpen(t,i,n,r,o,s,c){const l=[];let{openFolderInNewWindow:u,openFilesInNewWindow:d}=this.shouldOpenNewWindow(t);if(!t.initialStartup&&c.length>0){const e=c[0].remoteAuthority,t=this.getLastActiveWindowForAuthority(e);t&&l.push(this.doAddFoldersToExistingWindow(t,c.map(e=>e.folderUri)))}if(0===n.length+i.length+r.length&&s){const r=s.filesToOpen[0]||s.filesToCreate[0]||s.filesToDiff[0],o=e.WINDOWS.filter(e=>e.remoteAuthority===s.remoteAuthority),a=y.findBestWindowOrFolderForFile({windows:o,newWindow:d,context:t.context,fileUri:r&&r.fileUri,
localWorkspaceResolver:e=>e.configPath.scheme===M.Schemas.file?this.workspacesMainService.resolveLocalWorkspaceSync(e.configPath):null});a instanceof h.CodeWindow?a.openedWorkspace?i.push({workspace:a.openedWorkspace,remoteAuthority:a.remoteAuthority}):a.openedFolderUri?n.push({folderUri:a.openedFolderUri,remoteAuthority:a.remoteAuthority}):(l.push(this.doOpenFilesInExistingWindow(t,a,s)),s=void 0):(l.push(this.openInBrowserWindow({userEnv:t.userEnv,cli:t.cli,initialStartup:t.initialStartup,fileInputs:s,forceNewWindow:!0,remoteAuthority:s.remoteAuthority,forceNewTabbedWindow:t.forceNewTabbedWindow})),s=void 0)}const f=a.distinct(i,e=>e.workspace.id);if(f.length>0){const i=a.coalesce(f.map(t=>y.findWindowOnWorkspace(e.WINDOWS,t.workspace)));if(i.length>0){const e=i[0],n=s&&s.remoteAuthority===e.remoteAuthority?s:void 0;l.push(this.doOpenFilesInExistingWindow(t,e,n)),n&&(s=void 0),u=!0}f.forEach(e=>{if(i.some(t=>t.openedWorkspace.id===e.workspace.id))return
;const n=e.remoteAuthority,r=s&&s.remoteAuthority===n?s:void 0;l.push(this.doOpenFolderOrWorkspace(t,e,u,r)),r&&(s=void 0),u=!0})}const p=a.distinct(n,e=>x.getComparisonKey(e.folderUri));if(p.length>0){const i=a.coalesce(p.map(t=>y.findWindowOnWorkspace(e.WINDOWS,t.folderUri)));if(i.length>0){const e=i[0],n=s&&s.remoteAuthority===e.remoteAuthority?s:void 0;l.push(this.doOpenFilesInExistingWindow(t,e,n)),n&&(s=void 0),u=!0}p.forEach(e=>{if(i.some(t=>x.isEqual(t.openedFolderUri,e.folderUri)))return;const n=e.remoteAuthority,r=s&&s.remoteAuthority===n?s:void 0;l.push(this.doOpenFolderOrWorkspace(t,e,u,r)),r&&(s=void 0),u=!0})}const g=a.distinct(r,e=>e.backupFolder);if(g.length>0&&g.forEach(e=>{const i=e.remoteAuthority,n=s&&s.remoteAuthority===i?s:void 0;l.push(this.openInBrowserWindow({userEnv:t.userEnv,cli:t.cli,initialStartup:t.initialStartup,fileInputs:n,remoteAuthority:i,forceNewWindow:!0,forceNewTabbedWindow:t.forceNewTabbedWindow,emptyWindowBackupInfo:e})),n&&(s=void 0),u=!0}),0===l.length||s){s&&!o&&o++
;const e=s?s.remoteAuthority:t.cli&&t.cli.remote||void 0;for(let i=0;i<o;i++)l.push(this.openInBrowserWindow({userEnv:t.userEnv,cli:t.cli,initialStartup:t.initialStartup,remoteAuthority:e,forceNewWindow:u,forceNewTabbedWindow:t.forceNewTabbedWindow,fileInputs:s})),s=void 0,u=!0}return a.distinct(l)}doOpenFilesInExistingWindow(e,t,i){t.focus();const n={};return i&&(n.filesToOpen=i.filesToOpen,n.filesToCreate=i.filesToCreate,n.filesToDiff=i.filesToDiff,n.filesToWait=i.filesToWait),e.userEnv&&(n.termProgram=e.userEnv.TERM_PROGRAM),t.sendWhenReady("vscode:openFiles",n),t}doAddFoldersToExistingWindow(e,t){return e.focus(),e.sendWhenReady("vscode:addFolders",{foldersToAdd:t}),e}doOpenFolderOrWorkspace(e,t,i,n,r){i||r||"number"!=typeof e.contextWindowId||(r=this.getWindowById(e.contextWindowId));return this.openInBrowserWindow({userEnv:e.userEnv,cli:e.cli,initialStartup:e.initialStartup,workspace:t.workspace,folderUri:t.folderUri,fileInputs:n,remoteAuthority:t.remoteAuthority,forceNewWindow:i,
forceNewTabbedWindow:e.forceNewTabbedWindow,windowToUse:r})}getPathsToOpen(e){let t,i=!1;if(e.urisToOpen&&e.urisToOpen.length>0?(t=this.doExtractPathsFromAPI(e),i=!0):e.forceEmpty?t=[Object.create(null)]:f.hasArgs(e.cli._)||f.hasArgs(e.cli["folder-uri"])||f.hasArgs(e.cli["file-uri"])?(t=this.doExtractPathsFromCLI(e.cli),i=!0):t=this.doGetWindowsFromLastSession(),!e.addMode&&i){const e=t.filter(e=>!!e.folderUri);if(e.length>1){const i=e[0].remoteAuthority;if(e.every(e=>e.remoteAuthority===i)){const n=this.workspacesMainService.createUntitledWorkspaceSync(e.map(e=>({uri:e.folderUri})));t.push({workspace:n,remoteAuthority:i}),t=t.filter(e=>!e.folderUri)}}}return t}doExtractPathsFromAPI(e){const t=[],i=e.cli,n={gotoLineMode:i&&i.goto,forceOpenWorkspaceAsFile:e.forceOpenWorkspaceAsFile};for(const i of e.urisToOpen||[]){if(!i)continue;const e=this.parseUri(i.uri,i.typeHint,n);if(e)e.label=i.label,t.push(e);else{let e,t;i.uri.scheme===M.Schemas.file?(e=r.localize(0,null),
t=r.localize(1,null,i.uri.fsPath)):(e=r.localize(2,null),t=r.localize(3,null,i.uri.toString()));const n={title:b.default.nameLong,type:"info",buttons:[r.localize(4,null)],message:e,detail:t,noLink:!0};this.dialogs.showMessageBox(n,this.getFocusedWindow())}}return t}doExtractPathsFromCLI(e){const t=[],i={ignoreFileNotFound:!0,gotoLineMode:e.goto,remoteAuthority:e.remote||void 0},n=f.asArray(e["folder-uri"]);for(let e of n){const n=this.parseUri(this.argToUri(e),"folder",i);n&&t.push(n)}const r=f.asArray(e["file-uri"]);for(let e of r){const i=this.parseUri(this.argToUri(e),"file");i&&t.push(i)}const o=f.asArray(e._);for(let e of o){const n=this.parsePath(e,i);n&&t.push(n)}return t.length?t:[Object.create(null)]}doGetWindowsFromLastSession(){const e=this.getRestoreWindowsSetting();switch(e){case"none":return[Object.create(null)];case"one":case"all":case"folders":const t=[];"one"!==e&&t.push(...this.windowsState.openedWindows),this.windowsState.lastActiveWindow&&t.push(this.windowsState.lastActiveWindow)
;const i=[];for(const n of t)if(n.workspace){const e=this.parseUri(n.workspace.configPath,"file",{remoteAuthority:n.remoteAuthority});e&&e.workspace&&i.push(e)}else if(n.folderUri){const e=this.parseUri(n.folderUri,"folder",{remoteAuthority:n.remoteAuthority});e&&e.folderUri&&i.push(e)}else"folders"!==e&&n.backupPath&&i.push({backupPath:n.backupPath,remoteAuthority:n.remoteAuthority});if(i.length>0)return i}return[Object.create(null)]}getRestoreWindowsSetting(){let e;if(this.lifecycleService.wasRestarted)e="all";else{const t=this.configurationService.getValue("window");e=t&&t.restoreWindows||"one",-1===["all","folders","one","none"].indexOf(e)&&(e="one")}return e}argToUri(e){try{const t=O.URI.parse(e);return t.scheme?t:void this.logService.error(`Invalid URI input string, scheme missing: ${e}`)}catch(t){this.logService.error(`Invalid URI input string: ${e}, ${t.message}`)}}parseUri(e,t,i={}){if(!e||!e.scheme)return;if(e.scheme===M.Schemas.file)return this.parsePath(e.fsPath,i)
;const n=i.remoteAuthority||L.getRemoteAuthority(e);if(e=x.normalizePath(e),x.hasTrailingPathSeparator(e)&&(e=x.removeTrailingPathSeparator(e),t||(t="folder")),t||!k.hasWorkspaceFileExtension(e.path)&&!i.gotoLineMode||(t="file"),"file"===t){if(i.gotoLineMode){const t=g.parseLineAndColumnAware(e.path);return{fileUri:e.with({path:t.path}),lineNumber:t.line,columnNumber:t.column,remoteAuthority:n}}return k.hasWorkspaceFileExtension(e.path)&&!i.forceOpenWorkspaceAsFile?{workspace:R.getWorkspaceIdentifier(e),remoteAuthority:n}:{fileUri:e,remoteAuthority:n}}return{folderUri:e,remoteAuthority:n}}parsePath(e,t){if(!e)return;let r,o;if(t.gotoLineMode){const t=g.parseLineAndColumnAware(e);r=t.line,o=t.column,e=t.path}const s=t.remoteAuthority,a=n.normalize(e);try{const e=i.statSync(a);if(e){if(e.isFile()){if(!t.forceOpenWorkspaceAsFile){const e=this.workspacesMainService.resolveLocalWorkspaceSync(O.URI.file(a));if(e)return{workspace:{id:e.id,configPath:e.configPath},remoteAuthority:e.remoteAuthority}}return{
fileUri:O.URI.file(a),lineNumber:r,columnNumber:o,remoteAuthority:s}}if(e.isDirectory())return{folderUri:O.URI.file(a),remoteAuthority:s}}}catch(e){const i=O.URI.file(a);if(this.historyMainService.removeFromRecentlyOpened([i]),t&&t.ignoreFileNotFound)return{fileUri:i,createFilePath:!0,remoteAuthority:s}}}shouldOpenNewWindow(e){const t=this.configurationService.getValue("window"),i=t&&t.openFoldersInNewWindow||"default",n=t&&t.openFilesInNewWindow||"off";let r=(e.preferNewWindow||e.forceNewWindow)&&!e.forceReuseWindow;e.forceNewWindow||e.forceReuseWindow||"on"!==i&&"off"!==i||(r="on"===i);let o=!1;return e.forceNewWindow||e.forceReuseWindow?o=!!e.forceNewWindow&&!e.forceReuseWindow:(E.isMacintosh?1===e.context&&(o=!0):3!==e.context&&2!==e.context&&(o=!0),e.cli.extensionDevelopmentPath||"on"!==n&&"off"!==n||(o="on"===n)),{openFolderInNewWindow:!!r,openFilesInNewWindow:o}}openExtensionDevelopmentHostWindow(t,i){const n=y.findWindowOnExtensionDevelopmentPath(e.WINDOWS,t);if(n)return this.reload(n,i.cli),
void n.focus();let r=f.asArray(i.cli["folder-uri"]),o=f.asArray(i.cli["file-uri"]),s=i.cli._;if(!(s.length||r.length||o.length||i.cli.extensionTestsPath)){const e=this.windowsState.lastPluginDevelopmentHostWindow,t=e&&(e.workspace||e.folderUri);t&&(k.isSingleFolderWorkspaceIdentifier(t)?t.scheme===M.Schemas.file?s=[t.fsPath]:r=[t.toString()]:t.configPath.scheme===M.Schemas.file?s=[x.originalFSPath(t.configPath)]:o=[t.configPath.toString()])}s.length&&s.some(t=>!!y.findWindowOnWorkspaceOrFolderUri(e.WINDOWS,O.URI.file(t)))&&(s=[]),r.length&&r.some(t=>!!y.findWindowOnWorkspaceOrFolderUri(e.WINDOWS,this.argToUri(t)))&&(r=[]),o.length&&o.some(t=>!!y.findWindowOnWorkspaceOrFolderUri(e.WINDOWS,this.argToUri(t)))&&(o=[]),i.cli._=s,i.cli["folder-uri"]=r,i.cli["file-uri"]=o;t.match(/^vscode-remote:\/\/([^\/]+)/)&&(i.cli.remote=O.URI.parse(t).authority);const a={context:i.context,cli:i.cli,forceNewWindow:!0,forceEmpty:!s.length&&!r.length&&!o.length,userEnv:i.userEnv,noRecentEntry:!0,
waitMarkerFileURI:i.waitMarkerFileURI};this.open(a)}openInBrowserWindow(t){const i=c.mixin({},t.cli);i.appRoot=this.environmentService.appRoot,i.machineId=this.machineId,i.nodeCachedDataDir=this.environmentService.nodeCachedDataDir,i.mainPid=process.pid,i.execPath=process.execPath,i.userEnv=c.assign({},this.initialUserEnv,t.userEnv||{}),i.isInitialStartup=t.initialStartup,i.workspace=t.workspace,i.folderUri=t.folderUri,i.remoteAuthority=t.remoteAuthority;const r=t.fileInputs;r&&(i.filesToOpen=r.filesToOpen,i.filesToCreate=r.filesToCreate,i.filesToDiff=r.filesToDiff,i.filesToWait=r.filesToWait),t.emptyWindowBackupInfo&&(i.backupPath=n.join(this.environmentService.backupHome,t.emptyWindowBackupInfo.backupFolder));let o;if(t.forceNewWindow||t.forceNewTabbedWindow||(o=t.windowToUse||this.getLastActiveWindow())&&o.focus(),o){const e=o.config;!i.extensionDevelopmentPath&&e&&e.extensionDevelopmentPath&&(i.extensionDevelopmentPath=e.extensionDevelopmentPath,i.verbose=e.verbose,
i["inspect-brk-extensions"]=e["inspect-brk-extensions"],i.debugId=e.debugId,i["inspect-extensions"]=e["inspect-extensions"],i["extensions-dir"]=e["extensions-dir"])}else{const n=this.configurationService.getValue("window"),r=this.getNewWindowState(i);let s;if(s=r.hasDefaultState?n&&n.newWindowDimensions&&["fullscreen","inherit"].indexOf(n.newWindowDimensions)>=0:this.lifecycleService.wasRestarted||n&&n.restoreFullscreen,3!==r.mode||s||(r.mode=1),o=this.instantiationService.createInstance(h.CodeWindow,{state:r,extensionDevelopmentPath:i.extensionDevelopmentPath,isExtensionTestHost:!!i.extensionTestsPath}),t.forceNewTabbedWindow){const e=this.getLastActiveWindow();e&&e.addTabbedWindow(o)}e.WINDOWS.push(o),this._onWindowsCountChanged.fire({oldCount:e.WINDOWS.length-1,newCount:e.WINDOWS.length}),o.win.webContents.removeAllListeners("devtools-reload-page"),o.win.webContents.on("devtools-reload-page",()=>this.reload(o)),o.win.webContents.on("crashed",()=>this.onWindowError(o,2)),
o.win.on("unresponsive",()=>this.onWindowError(o,1)),o.win.on("closed",()=>this.onWindowClosed(o)),this.lifecycleService.registerWindow(o)}return o.isReady?this.lifecycleService.unload(o,4).then(e=>{e||this.doOpenInBrowserWindow(o,i,t)}):this.doOpenInBrowserWindow(o,i,t),o}doOpenInBrowserWindow(e,t,i){if(!t.extensionDevelopmentPath)if(t.workspace)t.backupPath=this.backupMainService.registerWorkspaceBackupSync({workspace:t.workspace,remoteAuthority:t.remoteAuthority});else if(t.folderUri)t.backupPath=this.backupMainService.registerFolderBackupSync(t.folderUri);else{const e=i.emptyWindowBackupInfo&&i.emptyWindowBackupInfo.backupFolder;t.backupPath=this.backupMainService.registerEmptyWindowBackupSync(e,t.remoteAuthority)}e.load(t),this._onWindowLoad.fire(e.id)}getNewWindowState(e){const t=this.getLastActiveWindow();if(!e.extensionTestsPath){if(e.extensionDevelopmentPath&&this.windowsState.lastPluginDevelopmentHostWindow)return this.windowsState.lastPluginDevelopmentHostWindow.uiState;const i=e.workspace;if(i){
const e=this.windowsState.openedWindows.filter(e=>e.workspace&&e.workspace.id===i.id).map(e=>e.uiState);if(e.length)return e[0]}if(e.folderUri){const t=this.windowsState.openedWindows.filter(t=>t.folderUri&&x.isEqual(t.folderUri,e.folderUri)).map(e=>e.uiState);if(t.length)return t[0]}else if(e.backupPath){const t=this.windowsState.openedWindows.filter(t=>t.backupPath===e.backupPath).map(e=>e.uiState);if(t.length)return t[0]}const n=this.lastClosedWindowState||this.windowsState.lastActiveWindow;if(!t&&n)return n.uiState}let i;const n=p.screen.getAllDisplays();if(1===n.length)i=n[0];else{if(E.isMacintosh){const e=p.screen.getCursorScreenPoint();i=p.screen.getDisplayNearestPoint(e)}!i&&t&&(i=p.screen.getDisplayMatching(t.getBounds())),i||(i=p.screen.getPrimaryDisplay()||n[0])}let r=h.defaultWindowState();r.x=Math.round(i.bounds.x+i.bounds.width/2-r.width/2),r.y=Math.round(i.bounds.y+i.bounds.height/2-r.height/2);const o=this.configurationService.getValue("window");let s=!0
;if(o&&o.newWindowDimensions)if("maximized"===o.newWindowDimensions)r.mode=0,s=!1;else if("fullscreen"===o.newWindowDimensions)r.mode=3,s=!1;else if("inherit"===o.newWindowDimensions&&t){const e=t.serializeWindowState();3===e.mode?r.mode=3:r=e,s=!1}return s&&(r=this.ensureNoOverlap(r)),r.hasDefaultState=!0,r}ensureNoOverlap(t){if(0===e.WINDOWS.length)return t;t.x="number"==typeof t.x?t.x:0,t.y="number"==typeof t.y?t.y:0;const i=e.WINDOWS.map(e=>e.getBounds());for(;i.some(e=>e.x===t.x||e.y===t.y);)t.x+=30,t.y+=30;return t}reload(e,t){this.lifecycleService.unload(e,3).then(i=>{i||e.reload(void 0,t)})}closeWorkspace(e){this.openInBrowserWindow({cli:this.environmentService.args,windowToUse:e,remoteAuthority:e.remoteAuthority})}enterWorkspace(e,t){return this.workspacesManager.enterWorkspace(e,t).then(t=>t?this.doEnterWorkspace(e,t):void 0)}doEnterWorkspace(e,t){return this.historyMainService.addRecentlyOpened([{workspace:t.workspace}]),this._onWindowReady.fire(e),t}pickWorkspaceAndOpen(e){
this.workspacesManager.pickWorkspaceAndOpen(e)}focusLastActive(e,t){const i=this.getLastActiveWindow();return i?(i.focus(),i):this.open({context:t,cli:e,forceEmpty:!0})[0]}getLastActiveWindow(){return y.getLastActiveWindow(e.WINDOWS)}getLastActiveWindowForAuthority(t){return y.getLastActiveWindow(e.WINDOWS.filter(e=>e.remoteAuthority===t))}openNewWindow(e,t){let i=this.environmentService.args;const n=t&&t.remoteAuthority||void 0;i&&i.remote!==n&&(i=Object.assign({},i,{remote:n}));const r=!(t&&t.reuseWindow);return this.open({context:e,cli:i,forceNewWindow:r,forceEmpty:!0})}openNewTabbedWindow(e){return this.open({context:e,cli:this.environmentService.args,forceNewTabbedWindow:!0,forceEmpty:!0})}waitForWindowCloseOrLoad(e){return new Promise(t=>{function i(i){i===e&&(n.dispose(),r.dispose(),t())}const n=this.onWindowClose(e=>i(e)),r=this.onWindowLoad(e=>i(e))})}sendToFocused(e,...t){const i=this.getFocusedWindow()||this.getLastActiveWindow();i&&i.sendWhenReady(e,...t)}sendToAll(t,i,n){e.WINDOWS.forEach(e=>{
n&&n.indexOf(e.id)>=0||e.sendWhenReady(t,i)})}getFocusedWindow(){const e=p.BrowserWindow.getFocusedWindow();if(e)return this.getWindowById(e.id)}getWindowById(t){const i=e.WINDOWS.filter(e=>e.id===t);if(i&&1===i.length)return i[0]}getWindows(){return e.WINDOWS}getWindowCount(){return e.WINDOWS.length}onWindowError(e,t){if(this.logService.error(2===t?"[VS Code]: render process crashed!":"[VS Code]: detected unresponsive"),this.telemetryService.publicLog("windowerror",{type:t}),1===t){if(e.isExtensionDevelopmentHost||e.isExtensionTestHost||e.win&&e.win.webContents&&e.win.webContents.isDevToolsOpened())return;this.dialogs.showMessageBox({title:b.default.nameLong,type:"warning",buttons:[P.mnemonicButtonLabel(r.localize(5,null)),P.mnemonicButtonLabel(r.localize(6,null)),P.mnemonicButtonLabel(r.localize(7,null))],message:r.localize(8,null),detail:r.localize(9,null),noLink:!0},e).then(t=>{e.win&&(0===t.button?e.reload():2===t.button&&(this.onBeforeWindowClose(e),e.win.destroy()))})}else this.dialogs.showMessageBox({
title:b.default.nameLong,type:"warning",buttons:[P.mnemonicButtonLabel(r.localize(10,null)),P.mnemonicButtonLabel(r.localize(11,null))],message:r.localize(12,null),detail:r.localize(13,null),noLink:!0},e).then(t=>{e.win&&(0===t.button?e.reload():1===t.button&&(this.onBeforeWindowClose(e),e.win.destroy()))})}onWindowClosed(t){t.dispose();const i=e.WINDOWS.indexOf(t);e.WINDOWS.splice(i,1),this._onWindowsCountChanged.fire({oldCount:e.WINDOWS.length+1,newCount:e.WINDOWS.length}),this._onWindowClose.fire(t.id)}pickFileFolderAndOpen(e){this.doPickAndOpen(e,!0,!0)}pickFolderAndOpen(e){this.doPickAndOpen(e,!0,!1)}pickFileAndOpen(e){this.doPickAndOpen(e,!1,!0)}doPickAndOpen(e,t,i){const n=e;n.pickFolders=t,n.pickFiles=i;const o=n.dialogOptions||Object.create(null);n.dialogOptions=o,n.dialogOptions.title||(n.dialogOptions.title=t&&i?r.localize(14,null):t?r.localize(15,null):r.localize(16,null)),n.telemetryEventName||(n.telemetryEventName=t&&i?"openFileFolder":t?"openFolder":"openFile"),this.dialogs.pickAndOpen(n)}
showMessageBox(e,t){return this.dialogs.showMessageBox(e,t)}showSaveDialog(e,t){return this.dialogs.showSaveDialog(e,t)}showOpenDialog(e,t){return this.dialogs.showOpenDialog(e,t)}quit(){const e=this.getFocusedWindow();e&&e.isExtensionDevelopmentHost&&this.getWindowCount()>1?e.win.close():setTimeout(()=>{this.lifecycleService.quit()},10)}};B.windowsStateStorageKey="windowsState",B.WINDOWS=[],B=o([s(1,w.ILogService),s(2,d.IStateService),s(3,u.IEnvironmentService),s(4,m.ILifecycleService),s(5,l.IBackupMainService),s(6,_.ITelemetryService),s(7,v.IConfigurationService),s(8,C.IHistoryMainService),s(9,k.IWorkspacesMainService),s(10,I.IInstantiationService)],B),t.WindowsManager=B;class j{constructor(e,t,i,n){this.environmentService=e,this.telemetryService=t,this.stateService=i,this.windowsMainService=n,this.mapWindowToDialogQueue=new Map,this.noWindowDialogQueue=new D.Queue}pickAndOpen(e){this.getFileOrFolderUris(e).then(t=>{const i=t?t.length:0
;e.telemetryEventName&&this.telemetryService.publicLog(e.telemetryEventName,Object.assign({},e.telemetryExtraData,{outcome:i?"success":"canceled",numberOfPaths:i})),i&&this.windowsMainService.open({context:3,contextWindowId:e.windowId,cli:this.environmentService.args,urisToOpen:t,forceNewWindow:e.forceNewWindow,forceOpenWorkspaceAsFile:e.dialogOptions&&!c.equals(e.dialogOptions.filters,k.WORKSPACE_FILTER)})})}getFileOrFolderUris(e){const t=e.dialogOptions||Object.create(null);e.dialogOptions=t,t.defaultPath||(t.defaultPath=this.stateService.getItem(j.workingDirPickerStorageKey)),"boolean"!=typeof e.pickFiles&&"boolean"!=typeof e.pickFolders||(t.properties=void 0,e.pickFiles&&e.pickFolders&&(t.properties=["multiSelections","openDirectory","openFile","createDirectory"])),t.properties||(t.properties=["multiSelections",e.pickFolders?"openDirectory":"openFile","createDirectory"]),E.isMacintosh&&t.properties.push("treatPackageAsDirectory")
;const i=("number"==typeof e.windowId?this.windowsMainService.getWindowById(e.windowId):void 0)||this.windowsMainService.getFocusedWindow();return this.showOpenDialog(t,i).then(e=>{if(e&&e.length>0){this.stateService.setItem(j.workingDirPickerStorageKey,n.dirname(e[0]));const t=[];for(const i of e)t.push({uri:O.URI.file(i)});return t}})}getDialogQueue(e){if(!e)return this.noWindowDialogQueue;let t=this.mapWindowToDialogQueue.get(e.id);return t||(t=new D.Queue,this.mapWindowToDialogQueue.set(e.id,t)),t}showMessageBox(e,t){return this.getDialogQueue(t).queue(()=>new Promise(i=>{const n=(e,t)=>{i({button:e,checkboxChecked:t})};t?p.dialog.showMessageBox(t.win,e,n):p.dialog.showMessageBox(e,n)}))}showSaveDialog(e,t){return this.getDialogQueue(t).queue(()=>new Promise(i=>{const n=e=>{i(function(e){return e&&E.isMacintosh&&(e=A.normalizeNFC(e)),e}(e))};t?p.dialog.showSaveDialog(t.win,e,n):p.dialog.showSaveDialog(e,n)}))}showOpenDialog(e,t){return this.getDialogQueue(t).queue(()=>new Promise(i=>{
let n=Promise.resolve();e.defaultPath&&(n=W.exists(e.defaultPath).then(t=>{t||(e.defaultPath=void 0)})),n.then(()=>{const n=e=>{i(function(e){return e&&e.length>0&&E.isMacintosh&&(e=e.map(e=>A.normalizeNFC(e))),e}(e))};t?p.dialog.showOpenDialog(t.win,e,n):p.dialog.showOpenDialog(e,n)})}))}}j.workingDirPickerStorageKey="pickerWorkingDir";class z{constructor(e,t,i){this.workspacesMainService=e,this.backupMainService=t,this.windowsMainService=i}enterWorkspace(e,t){return e&&e.win&&e.isReady?this.isValidTargetWorkspacePath(e,t).then(i=>{if(!i)return null;const n=R.getWorkspaceIdentifier(t);return this.doOpenWorkspace(e,n)}):Promise.resolve(null)}isValidTargetWorkspacePath(e,t){if(!t)return Promise.resolve(!0);if(e.openedWorkspace&&x.isEqual(e.openedWorkspace.configPath,t))return Promise.resolve(!1);if(y.findWindowOnWorkspace(this.windowsMainService.getWindows(),R.getWorkspaceIdentifier(t))){const e={title:b.default.nameLong,type:"info",buttons:[r.localize(17,null)],message:r.localize(18,null,x.basename(t)),
detail:r.localize(19,null),noLink:!0};return this.windowsMainService.showMessageBox(e,this.windowsMainService.getFocusedWindow()).then(()=>!1)}return Promise.resolve(!0)}doOpenWorkspace(e,t){e.focus();let i;return e.config.extensionDevelopmentPath||(i=this.backupMainService.registerWorkspaceBackupSync({workspace:t,remoteAuthority:e.remoteAuthority},e.config.backupPath)),e.openedWorkspace&&this.workspacesMainService.isUntitledWorkspace(e.openedWorkspace)&&this.workspacesMainService.deleteUntitledWorkspaceSync(e.openedWorkspace),e.config.folderUri=void 0,e.config.workspace=t,e.config.backupPath=i,{workspace:t,backupPath:i}}pickWorkspaceAndOpen(e){const t=("number"==typeof e.windowId?this.windowsMainService.getWindowById(e.windowId):void 0)||this.windowsMainService.getFocusedWindow()||this.windowsMainService.getLastActiveWindow();this.windowsMainService.pickFileAndOpen({windowId:t?t.id:void 0,dialogOptions:{buttonLabel:P.mnemonicButtonLabel(r.localize(20,null)),title:r.localize(21,null),
filters:k.WORKSPACE_FILTER,properties:["openFile"],defaultPath:e.dialogOptions&&e.dialogOptions.defaultPath},forceNewWindow:e.forceNewWindow,telemetryEventName:e.telemetryEventName,telemetryExtraData:e.telemetryExtraData})}}}),define(t[181],i([0,1,16,47,93,14,7]),function(e,t,i,n,r,a,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let l=class{constructor(e,t){this.logService=t,this.disposables=[],this.configure(e.getValue()),e.onDidChangeConfiguration(()=>this.configure(e.getValue()),this,this.disposables)}configure(e){this.proxyUrl=e.http&&e.http.proxy,this.strictSSL=!(!e.http||!e.http.proxyStrictSSL),this.authorization=e.http&&e.http.proxyAuthorization}request(e,t,o=n.request){this.logService.trace("RequestService#request",e.url);const{proxyUrl:s,strictSSL:a}=this;return(e.agent?Promise.resolve(e.agent):Promise.resolve(r.getProxyAgent(e.url||"",{proxyUrl:s,strictSSL:a}))).then(n=>(e.agent=n,e.strictSSL=a,this.authorization&&(e.headers=i.assign(e.headers||{},{
"Proxy-Authorization":this.authorization})),o(e,t)))}};l=o([s(0,a.IConfigurationService),s(1,c.ILogService)],l),t.RequestService=l}),define(t[182],i([0,1,47,181,16,11]),function(e,t,i,n,r,o){"use strict";function s(e){return o.net.request}Object.defineProperty(t,"__esModule",{value:!0});class a extends n.RequestService{request(e,t){return super.request(e,t,e=>i.request(r.assign({},e||{},{getRawRequest:s}),t))}}t.RequestService=a}),define(t[183],i([0,1,20,14,24,41,32,31,9,7,60,47,11,34]),function(e,t,i,r,a,c,l,u,d,h,f,p,g,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let v=class extends f.AbstractUpdateService{constructor(e,t,i,n,r,o){super(e,t,n,r,o),this.telemetryService=i}buildUpdateFeedUrl(e){return f.createUpdateURL(`linux-${process.arch}`,e)}doCheckForUpdates(e){this.url&&(this.setState(l.State.CheckingForUpdates(e)),this.requestService.request({url:this.url},m.CancellationToken.None).then(p.asJson).then(t=>{
t&&t.url&&t.version&&t.productVersion?this.setState(l.State.AvailableForDownload(t)):(this.telemetryService.publicLog("update:notAvailable",{explicit:!!e}),this.setState(l.State.Idle(1)))}).then(void 0,t=>{this.logService.error(t),this.telemetryService.publicLog("update:notAvailable",{explicit:!!e});const i=e?t.message||t:void 0;this.setState(l.State.Idle(1,i))}))}doDownloadUpdate(e){return n(this,void 0,void 0,function*(){i.default.downloadUrl&&i.default.downloadUrl.length>0?g.shell.openExternal(i.default.downloadUrl):e.update.url&&g.shell.openExternal(e.update.url),this.setState(l.State.Idle(1))})}};v=o([s(0,a.ILifecycleService),s(1,r.IConfigurationService),s(2,u.ITelemetryService),s(3,d.IEnvironmentService),s(4,c.IRequestService),s(5,h.ILogService)],v),t.LinuxUpdateService=v}),define(t[184],i([0,1,15,5,22,53,14,24,41,20,32,31,9,7,60,47,126,23,45,11,34,12]),function(e,t,i,r,a,c,l,u,d,h,f,p,g,m,v,w,y,S,b,_,C,E){"use strict";function k(){
return void 0===I&&(I=i.existsSync(r.join(r.dirname(process.execPath),"unins000.exe"))?0:1),I}Object.defineProperty(t,"__esModule",{value:!0});let I=void 0,P=class extends v.AbstractUpdateService{constructor(e,t,i,n,r,o){super(e,t,n,r,o),this.telemetryService=i,0===k()&&i.publicLog("update:win32SetupTarget",{target:h.default.target})}get cachePath(){const e=r.join(S.tmpdir(),`vscode-update-${h.default.target}-${process.arch}`);return a.mkdirp(e,void 0).then(()=>e)}buildUpdateFeedUrl(e){let t="win32";return"x64"===process.arch&&(t+="-x64"),1===k()?t+="-archive":"user"===h.default.target&&(t+="-user"),v.createUpdateURL(t,e)}doCheckForUpdates(e){this.url&&(this.setState(f.State.CheckingForUpdates(e)),this.requestService.request({url:this.url},C.CancellationToken.None).then(w.asJson).then(t=>{const i=k();return t&&t.url&&t.version&&t.productVersion?1===i?(this.setState(f.State.AvailableForDownload(t)),Promise.resolve(null)):(this.setState(f.State.Downloading(t)),
this.cleanup(t.version).then(()=>this.getUpdatePackagePath(t.version).then(e=>a.exists(e).then(i=>{if(i)return Promise.resolve(e);const n=t.url,r=t.hash,o=`${e}.tmp`;return this.requestService.request({url:n},C.CancellationToken.None).then(e=>w.download(o,e)).then(r?()=>y.checksum(o,t.hash):()=>void 0).then(()=>a.rename(o,e)).then(()=>e)})).then(e=>{const i=this.configurationService.getValue("update.enableWindowsBackgroundUpdates");this.availableUpdate={packagePath:e},i&&t.supportsFastUpdate?"user"===h.default.target?this.doApplyUpdate():this.setState(f.State.Downloaded(t)):this.setState(f.State.Ready(t))}))):(this.telemetryService.publicLog("update:notAvailable",{explicit:!!e}),this.setState(f.State.Idle(i)),Promise.resolve(null))}).then(void 0,t=>{this.logService.error(t),this.telemetryService.publicLog("update:notAvailable",{explicit:!!e});const i=e?t.message||t:void 0;this.setState(f.State.Idle(k(),i))}))}doDownloadUpdate(e){return n(this,void 0,void 0,function*(){
e.update.url&&_.shell.openExternal(e.update.url),this.setState(f.State.Idle(k()))})}getUpdatePackagePath(e){return n(this,void 0,void 0,function*(){const t=yield this.cachePath;return r.join(t,`CodeSetup-${h.default.quality}-${e}.exe`)})}cleanup(e=null){return n(this,void 0,void 0,function*(){const t=e?t=>!new RegExp(`${h.default.quality}-${e}\\.exe$`).test(t):()=>!0,i=yield this.cachePath,o=(yield a.readdir(i)).filter(t).map(e=>n(this,void 0,void 0,function*(){try{yield a.unlink(r.join(i,e))}catch(e){}}));yield Promise.all(o)})}doApplyUpdate(){return n(this,void 0,void 0,function*(){if("downloaded"!==this.state.type&&"downloading"!==this.state.type)return Promise.resolve(void 0);if(!this.availableUpdate)return Promise.resolve(void 0);const t=this.state.update;this.setState(f.State.Updating(t));const i=yield this.cachePath;this.availableUpdate.updateFilePath=r.join(i,`CodeSetup-${h.default.quality}-${t.version}.flag`),yield a.writeFile(this.availableUpdate.updateFilePath,"flag")
;b.spawn(this.availableUpdate.packagePath,["/verysilent",`/update="${this.availableUpdate.updateFilePath}"`,"/nocloseapplications","/mergetasks=runcode,!desktopicon,!quicklaunchicon"],{detached:!0,stdio:["ignore","ignore","ignore"],windowsVerbatimArguments:!0}).once("exit",()=>{this.availableUpdate=void 0,this.setState(f.State.Idle(k()))});const o=`${h.default.win32MutexName}-ready`,s=e.__$__nodeRequire("windows-mutex").isActive;(function(e,t=1e3){return n(this,void 0,void 0,function*(){for(;!e();)yield E.timeout(t)})})(()=>s(o)).then(()=>this.setState(f.State.Ready(t)))})}doQuitAndInstall(){"ready"===this.state.type&&this.availableUpdate&&(this.logService.trace("update#quitAndInstall(): running raw#quitAndInstall()"),this.state.update.supportsFastUpdate&&this.availableUpdate.updateFilePath?i.unlinkSync(this.availableUpdate.updateFilePath):b.spawn(this.availableUpdate.packagePath,["/silent","/mergetasks=runcode,!desktopicon,!quicklaunchicon"],{detached:!0,stdio:["ignore","ignore","ignore"]}))}getUpdateType(){
return k()}};o([c.memoize],P.prototype,"cachePath",null),P=o([s(0,u.ILifecycleService),s(1,l.IConfigurationService),s(2,p.ITelemetryService),s(3,g.IEnvironmentService),s(4,d.IRequestService),s(5,m.ILogService)],P),t.Win32UpdateService=P}),define(t[185],i([0,1,11,2,180,50,173,165,24,144,32,154,128,51,138,62,4,58,56,7,29,9,14,54,157,31,143,145,142,67,46,20,49,160,6,38,37,17,135,8,176,26,63,184,183,150,107,108,172,114,18,164,161,131,66,163,117,35,12,120,57,23,5,159,73,132,151,140,147,19,168,55,170,156,75,134]),function(e,t,i,r,a,c,l,u,d,h,f,p,g,m,v,w,y,S,b,_,C,E,k,I,P,M,A,O,D,W,x,L,T,R,U,F,N,B,j,z,K,$,q,H,V,G,Y,Q,J,X,Z,ee,te,ie,ne,re,oe,se,ae,ce,le,ue,de,he,fe,pe,ge,me,ve,we,ye,Se,be,_e,Ce,Ee){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let ke=class t extends U.Disposable{constructor(e,t,i,n,r,o,s,a){super(),this.mainIpcServer=e,this.userEnv=t,this.instantiationService=i,this.logService=n,this.environmentService=r,this.lifecycleService=o,this.configurationService=s,this.stateService=a,
this._register(e),this._register(s),this.registerListeners()}registerListeners(){Z.setUnexpectedErrorHandler(e=>this.onUnexpectedError(e)),process.on("uncaughtException",e=>this.onUnexpectedError(e)),process.on("unhandledRejection",(e,t)=>Z.onUnexpectedError(e)),ce.registerContextMenuListener(),this.lifecycleService.onWillShutdown(()=>this.dispose()),i.app.on("accessibility-support-changed",(e,t)=>{this.windowsMainService&&this.windowsMainService.sendToAll("vscode:accessibilitySupportChanged",t)}),i.app.on("activate",(e,t)=>{this.logService.trace("App#activate"),!t&&this.windowsMainService&&this.windowsMainService.openNewWindow(1)}),i.app.on("web-contents-created",(e,t)=>{t.on("will-attach-webview",(e,t,i)=>{const n=e=>{if(!e)return!1
;if("data:text/html;charset=utf-8,%3C%21DOCTYPE%20html%3E%0D%0A%3Chtml%20lang%3D%22en%22%20style%3D%22width%3A%20100%25%3B%20height%3A%20100%25%22%3E%0D%0A%3Chead%3E%0D%0A%09%3Ctitle%3EVirtual%20Document%3C%2Ftitle%3E%0D%0A%3C%2Fhead%3E%0D%0A%3Cbody%20style%3D%22margin%3A%200%3B%20overflow%3A%20hidden%3B%20width%3A%20100%25%3B%20height%3A%20100%25%22%3E%0D%0A%3C%2Fbody%3E%0D%0A%3C%2Fhtml%3E"===e)return!0;const t=z.URI.parse(e).fsPath.toLowerCase(),i=z.URI.file(this.environmentService.appRoot).fsPath.toLowerCase();return we.startsWith(t,i+de.sep)};delete t.preload,t.nodeIntegration=!1,n(i.src)&&n(t.preloadURL)||(delete t.preloadUrl,this.logService.error("webContents#web-contents-created: Prevented webview attach"),e.preventDefault())}),t.on("will-navigate",e=>{this.logService.error("webContents#will-navigate: Prevented webcontent navigation"),e.preventDefault()}),t.on("new-window",(e,t)=>{e.preventDefault(),i.shell.openExternal(t)})});let e=[],t=null;i.app.on("open-file",(i,n)=>{
this.logService.trace("App#open-file: ",n),i.preventDefault(),e.push({uri:z.URI.file(n)}),null!==t&&(clearTimeout(t),t=null),t=setTimeout(()=>{this.windowsMainService&&(this.windowsMainService.open({context:1,cli:this.environmentService.args,urisToOpen:e,preferNewWindow:!0}),e=[],t=null)},100)}),i.app.on("new-window-for-tab",()=>{this.windowsMainService.openNewWindow(4)}),i.ipcMain.on("vscode:exit",(e,t)=>{this.logService.trace("IPC#vscode:exit",t),this.dispose(),this.lifecycleService.kill(t)}),i.ipcMain.on("vscode:fetchShellEnv",e=>{const t=e.sender;h.getShellEnvironment().then(e=>{t.isDestroyed()||t.send("vscode:acceptShellEnv",e)},e=>{t.isDestroyed()||t.send("vscode:acceptShellEnv",{}),this.logService.error("Error fetching shell env",e)})}),i.ipcMain.on("vscode:broadcast",(e,t,i)=>{this.windowsMainService&&i.channel&&!B.isUndefinedOrNull(i.payload)&&(this.logService.trace("IPC#vscode:broadcast",i.channel,i.payload),this.onBroadcast(i.channel,i.payload),
this.windowsMainService.sendToAll("vscode:broadcast",i,[t]))}),i.ipcMain.on("vscode:toggleDevTools",e=>e.sender.toggleDevTools()),i.ipcMain.on("vscode:openDevTools",e=>e.sender.openDevTools()),i.ipcMain.on("vscode:reloadWindow",e=>e.sender.reload()),i.powerMonitor.on("resume",()=>{this.windowsMainService&&this.windowsMainService.sendToAll("vscode:osResume",void 0)})}onUnexpectedError(e){if(e){const t={message:e.message,stack:e.stack};this.windowsMainService&&this.windowsMainService.sendToFocused("vscode:reportError",JSON.stringify(t))}this.logService.error(`[uncaught exception in main]: ${e}`),e.stack&&this.logService.error(e.stack)}onBroadcast(e,t){"vscode:changeColorTheme"===e&&"string"==typeof t&&le.storeBackgroundColor(this.stateService,JSON.parse(t))}startup(){this.logService.debug("Starting VS Code"),this.logService.debug(`from: ${this.environmentService.appRoot}`),this.logService.debug("args:",this.environmentService.args),
r.isWindows&&L.default.win32AppUserModelId&&i.app.setAppUserModelId(L.default.win32AppUserModelId);try{r.isMacintosh&&!0===this.configurationService.getValue("window.nativeTabs")&&!i.systemPreferences.getUserDefault("NSUseImprovedLayoutPass","boolean")&&i.systemPreferences.setUserDefault("NSUseImprovedLayoutPass","boolean",!0)}catch(e){this.logService.error(e)}this.electronIpcServer=new g.Server;const e=e=>(this.logService.trace(`Resolved machine identifier: ${e}`),this.sharedProcess=this.instantiationService.createInstance(v.SharedProcess,e,this.userEnv),this.sharedProcessClient=this.sharedProcess.whenReady().then(()=>m.connect(this.environmentService.sharedIPCHandle,"main")),this.initServices(e).then(e=>{this.environmentService.driverHandle&&te.serve(this.electronIpcServer,this.environmentService.driverHandle,this.environmentService,e).then(e=>{this.logService.info("Driver started at:",this.environmentService.driverHandle),this._register(e)});const t=e.createInstance(R.ProxyAuthHandler);this._register(t)
;const i=e.invokeFunction(e=>this.openFirstWindow(e));e.invokeFunction(e=>this.afterWindowOpen(e)),this.environmentService.args.trace&&this.stopTracingEventually(i)}));this.logService.trace("Resolving machine identifier...");const t=this.resolveMachineId();return"string"==typeof t?e(t):t.then(t=>e(t))}resolveMachineId(){const e=this.stateService.getItem(t.MACHINE_ID_KEY);return e||q.getMachineId().then(e=>(this.stateService.setItem(t.MACHINE_ID_KEY,e),e))}stopTracingEventually(e){this.logService.info("Tracing: waiting for windows to get ready...");let t=!1;const n=e=>{t||(t=!0,i.contentTracing.stopRecording(de.join(ue.homedir(),`${L.default.applicationName}-${Math.random().toString(16).slice(-4)}.trace.txt`),t=>{e?this.logService.info(`Tracing: data recorded (after 30s timeout) to ${t}`):this.windowsMainService.showMessageBox({type:"info",message:he.localize(0,null),detail:he.localize(1,null,t),buttons:[he.localize(2,null)]},this.windowsMainService.getLastActiveWindow())}))},r=setTimeout(()=>n(!0),3e4)
;Promise.all(e.map(e=>e.ready())).then(()=>{clearTimeout(r),n(!1)})}initServices(e){const t=new S.ServiceCollection;if("win32"===process.platform?t.set(f.IUpdateService,new b.SyncDescriptor(H.Win32UpdateService)):"linux"===process.platform?process.env.SNAP&&process.env.SNAP_REVISION?t.set(f.IUpdateService,new b.SyncDescriptor(ge.SnapUpdateService,[process.env.SNAP,process.env.SNAP_REVISION])):t.set(f.IUpdateService,new b.SyncDescriptor(V.LinuxUpdateService)):"darwin"===process.platform&&t.set(f.IUpdateService,new b.SyncDescriptor(G.DarwinUpdateService)),t.set(F.IWindowsMainService,new b.SyncDescriptor(a.WindowsManager,[e])),t.set(c.IWindowsService,new b.SyncDescriptor(u.WindowsService,[this.sharedProcess])),t.set(w.ILaunchService,new b.SyncDescriptor(w.LaunchService)),t.set(Y.IIssueService,new b.SyncDescriptor(J.IssueService,[e,this.userEnv])),t.set(ne.IMenubarService,new b.SyncDescriptor(re.MenubarService)),t.set(me.IStorageMainService,new b.SyncDescriptor(me.StorageMainService)),
t.set(Se.IBackupMainService,new b.SyncDescriptor(ye.BackupMainService)),t.set(N.IHistoryMainService,new b.SyncDescriptor(be.HistoryMainService)),t.set(I.IURLService,new b.SyncDescriptor(_e.URLService)),t.set($.IWorkspacesMainService,new b.SyncDescriptor(Ce.WorkspacesMainService)),this.environmentService.isExtensionDevelopment||this.environmentService.args["disable-telemetry"]||!L.default.enableTelemetry)t.set(M.ITelemetryService,A.NullTelemetryService);else{const i=x.getDelayedChannel(this.sharedProcessClient.then(e=>e.getChannel("telemetryAppender"))),n={appender:A.combinedAppender(new O.TelemetryAppenderClient(i),new A.LogAppender(this.logService)),commonProperties:W.resolveCommonProperties(L.default.commit,T.default.version,e,this.environmentService.installSourcePath),piiPaths:[this.environmentService.appRoot,this.environmentService.extensionsPath]};t.set(M.ITelemetryService,new b.SyncDescriptor(D.TelemetryService,[n]))}const i=this.instantiationService.createChild(t)
;return i.invokeFunction(e=>Promise.all([this.initStorageService(e),this.initBackupService(e)])).then(()=>i)}initStorageService(e){const t=e.get(me.IStorageMainService);return this.lifecycleService.onWillShutdown(e=>e.join(t.close())),Promise.resolve()}initBackupService(e){return e.get(Se.IBackupMainService).initialize()}openFirstWindow(e){const t=e.get(y.IInstantiationService),i=e.get(w.ILaunchService),n=new w.LaunchChannel(i);this.mainIpcServer.registerChannel("launch",n);const o=e.get(f.IUpdateService),s=new p.UpdateChannel(o);this.electronIpcServer.registerChannel("update",s);const a=e.get(Y.IIssueService),u=new Q.IssueChannel(a);this.electronIpcServer.registerChannel("issue",u);const d=e.get($.IWorkspacesMainService),h=t.createInstance(K.WorkspacesChannel,d);this.electronIpcServer.registerChannel("workspaces",h);const g=e.get(c.IWindowsService),m=new l.WindowsChannel(g);this.electronIpcServer.registerChannel("windows",m),this.sharedProcessClient.then(e=>e.registerChannel("windows",m))
;const v=e.get(ne.IMenubarService),S=new oe.MenubarChannel(v);this.electronIpcServer.registerChannel("menubar",S);const b=e.get(I.IURLService),C=new P.URLServiceChannel(b);this.electronIpcServer.registerChannel("url",C);const k=e.get(me.IStorageMainService),M=this._register(new ve.GlobalStorageDatabaseChannel(this.logService,k));this.electronIpcServer.registerChannel("storage",M);const A=new X.LogLevelSetterChannel(e.get(_.ILogService));this.electronIpcServer.registerChannel("loglevel",A),this.sharedProcessClient.then(e=>e.registerChannel("loglevel",A)),this.lifecycleService.ready();const O=this.windowsMainService=e.get(F.IWindowsMainService),D=new c.ActiveWindowManager(g),W=new x.StaticRouter(e=>D.getActiveClientId().then(t=>e===t)),L=this.electronIpcServer.getChannel("urlHandler",W),T=new P.URLHandlerChannelClient(L);if(r.isMacintosh){const t=e.get(E.IEnvironmentService);b.registerHandler({handleURL(e){if(0===O.getWindowCount()){const i=Object.assign({},t.args,{goto:!0}),[n]=O.open({context:5,cli:i,
forceEmpty:!0});return n.ready().then(()=>b.open(e))}return Promise.resolve(!1)}})}b.registerHandler(T);const R=this.environmentService.args,U=R["open-url"]?R._urls:[],N=new ee.ElectronURLListener(U||[],b,this.windowsMainService);this._register(N),this.windowsMainService.ready(this.userEnv);const B=global.macOpenFiles,j=process.env.VSCODE_CLI?0:4,q=se.hasArgs(R._),H=se.hasArgs(R["folder-uri"]),V=se.hasArgs(R["file-uri"]),G=!0===R["skip-add-to-recently-opened"],J=R.wait&&R.waitMarkerFilePath?z.URI.file(R.waitMarkerFilePath):void 0;return!R["new-window"]||q||H||V?!B||!B.length||q||H||V?this.windowsMainService.open({context:j,cli:R,forceNewWindow:R["new-window"]||!q&&R["unity-launch"],diffMode:R.diff,noRecentEntry:G,waitMarkerFileURI:J,initialStartup:!0}):this.windowsMainService.open({context:1,cli:R,urisToOpen:B.map(e=>({uri:z.URI.file(e)})),noRecentEntry:G,waitMarkerFileURI:J,initialStartup:!0}):this.windowsMainService.open({context:j,cli:R,forceNewWindow:!0,forceEmpty:!0,noRecentEntry:G,waitMarkerFileURI:J,
initialStartup:!0})}afterWindowOpen(t){const i=t.get(F.IWindowsMainService),n=t.get(N.IHistoryMainService);if(r.isWindows){try{const t=new(0,e.__$__nodeRequire("windows-mutex").Mutex)(L.default.win32MutexName);this._register(U.toDisposable(()=>t.release()))}catch(e){this.environmentService.isBuilt||i.showMessageBox({title:L.default.nameLong,type:"warning",message:"Failed to load windows-mutex!",detail:e.toString(),noLink:!0})}try{e.__$__nodeRequire("windows-foreground-love")}catch(e){this.environmentService.isBuilt||i.showMessageBox({title:L.default.nameLong,type:"warning",message:"Failed to load windows-foreground-love!",detail:e.toString(),noLink:!0})}}this.handleRemoteAuthorities(),j.KeyboardLayoutMonitor.INSTANCE.onDidChangeKeyboardLayout(()=>{this.windowsMainService.sendToAll("vscode:keyboardLayoutChanged",!1)}),n.updateWindowsJumpList(),n.onRecentlyOpenedChange(()=>n.updateWindowsJumpList())
;this._register(new ae.RunOnceScheduler(()=>h.getShellEnvironment().then(e=>this.sharedProcess.spawn(e)),3e3)).schedule()}handleRemoteAuthorities(){const e=new Map,t=this.environmentService.isBuilt;class r{constructor(e,i,n){this._authority=e;const r={isBuilt:t,commit:L.default.commit,webSocketFactory:Ee.nodeWebSocketFactory,addressProvider:{getAddress:()=>Promise.resolve({host:i,port:n})}};this._connection=ie.connectRemoteAgentManagement(r,e,"main"),this._disposeRunner=new ae.RunOnceScheduler(()=>this.dispose(),5e3)}dispose(){this._disposeRunner.dispose(),e.delete(this._authority),this._connection.then(e=>{e.dispose()})}getClient(){return n(this,void 0,void 0,function*(){this._disposeRunner.schedule();return(yield this._connection).client})}}const o=new Map;i.ipcMain.on("vscode:remoteAuthorityResolved",(t,i)=>{this.logService.info("Received resolved authority",i.authority),o.set(i.authority,i),e.has(i.authority)&&e.get(i.authority).dispose()})
;i.protocol.registerBufferProtocol(fe.REMOTE_HOST_SCHEME,(t,i)=>n(this,void 0,void 0,function*(){if("GET"!==t.method)return i(void 0);const n=z.URI.parse(t.url);let s;if(e.has(n.authority))s=e.get(n.authority);else{const t=(e=>{if(this.logService.info("Resolving authority",e),e.indexOf("+")>=0)return o.has(e)?B.withUndefinedAsNull(o.get(e)):(this.logService.info("Didnot find resolved authority for",e),null);{const[t,i]=e.split(":");return{authority:e,host:t,port:parseInt(i,10)}}})(n.authority);if(!t)return void i(void 0);s=new r(n.authority,t.host,t.port),e.set(n.authority,s)}try{const t=yield s.getClient();if(e.has(n.authority)){const e=yield t.getChannel(pe.REMOTE_FILE_SYSTEM_CHANNEL_NAME).call("readFile",[n]);i(Buffer.from(e))}else i(void 0)}catch(e){Z.onUnexpectedError(e),i(void 0)}}))}};ke.MACHINE_ID_KEY="telemetry.machineId",ke=o([s(2,y.IInstantiationService),s(3,_.ILogService),s(4,E.IEnvironmentService),s(5,d.ILifecycleService),s(6,k.IConfigurationService),s(7,C.IStateService)],ke),t.CodeApplication=ke
}),define(t[189],i([0,1,11,16,2,20,102,35,22,74,24,51,62,4,106,58,56,7,139,29,9,123,14,130,41,182,15,185,10,42,115,68,113,121,18,153]),function(e,t,i,n,r,o,s,a,c,l,u,d,h,f,p,g,m,v,w,y,S,b,_,C,E,k,I,P,M,A,O,D,W,x,L){"use strict";function T(t){function n(t){return d.serve(a.mainIPCHandle).then(e=>{if(a.args.status)throw s.warn("Warning: The --status argument can only be used if Code is already running. Please run it again after Code has started."),new B("Terminating...");if(void 0!==a.args["upload-logs"])throw s.warn("Warning: The --upload-logs argument can only be used if Code is already running. Please run it again after Code has started."),new B("Terminating...");return r.isMacintosh&&i.app.dock.show(),process.env.VSCODE_PID=String(process.pid),e},l=>"EADDRINUSE"!==l.code?(U(a,l),Promise.reject(l)):(r.isMacintosh&&i.app.dock.hide(),d.connect(a.mainIPCHandle,"main").then(t=>{if(a.extensionTestsLocationURI&&!a.debugExtensionHost.break){
const e="Running extension tests from the command line is currently only supported if no other instance of Code is running.";return s.error(e),t.dispose(),Promise.reject(new Error(e))}let i;a.wait||a.status||a.args["upload-logs"]||(i=setTimeout(()=>{R(M.localize(0,null,o.default.nameShort),M.localize(1,null))},1e4));const n=t.getChannel("launch"),l=new h.LaunchChannelClient(n);return a.args.status?l.getMainProcessInfo().then(e=>c.invokeFunction(t=>t.get(D.IDiagnosticsService).getDiagnostics(e).then(e=>(console.log(e),Promise.reject(new B))))):void 0!==a.args["upload-logs"]?c.invokeFunction(e=>x.uploadLogs(l,e.get(E.IRequestService),a).then(()=>Promise.reject(new B))):(s.trace("Sending env to running instance..."),function(t){let i=Promise.resolve();return r.isWindows&&(i=t.getMainProcessId().then(t=>{s.trace("Sending some foreground love to the running instance:",t);try{const{allowSetForegroundWindow:i}=e.__$__nodeRequire("windows-foreground-love");i(t)}catch(e){}})),i
}(l).then(()=>l.start(a.args,process.env)).then(()=>t.dispose()).then(()=>(i&&clearTimeout(i),Promise.reject(new B("Sent env to running instance. Terminating...")))))},e=>{if(!t||r.isWindows||"ECONNREFUSED"!==e.code)return"EPERM"===e.code&&R(M.localize(2,null,o.default.nameShort),M.localize(3,null)),Promise.reject(e);try{I.unlinkSync(a.mainIPCHandle)}catch(e){return s.warn("Could not delete obsolete instance handle",e),Promise.reject(e)}return n(!1)})))}const s=t.get(v.ILogService),a=t.get(S.IEnvironmentService),c=t.get(f.IInstantiationService);return n(!0)}function R(e,t){i.dialog.showMessageBox({title:o.default.nameLong,type:"warning",buttons:[A.mnemonicButtonLabel(M.localize(4,null))],message:e,detail:t,noLink:!0})}function U(e,t){"EACCES"!==t.code&&"EPERM"!==t.code||R(M.localize(5,null),M.localize(6,null,e.userDataPath,e.extensionsPath))}function F(e,t){const i=e.get(v.ILogService),n=e.get(u.ILifecycleService);let r=0;t&&(t.isExpected?t.message&&i.trace(t.message):(r=1,
t.stack?i.error(t.stack):i.error(`Startup error: ${t.toString()}`))),n.kill(r)}function N(e){const t=new W.BufferLogService,i=function(e,t){const i=new g.ServiceCollection,n=new b.EnvironmentService(e,process.execPath),r=new v.MultiplexLogService([new v.ConsoleLogMainService(v.getLogLevel(n)),t]);return process.once("exit",()=>r.dispose()),i.set(S.IEnvironmentService,n),i.set(v.ILogService,r),i.set(u.ILifecycleService,new m.SyncDescriptor(u.LifecycleService)),i.set(y.IStateService,new m.SyncDescriptor(w.StateService)),i.set(_.IConfigurationService,new m.SyncDescriptor(C.ConfigurationService)),i.set(E.IRequestService,new m.SyncDescriptor(k.RequestService)),i.set(D.IDiagnosticsService,new m.SyncDescriptor(D.DiagnosticsService)),new p.InstantiationService(i,!0)}(e,t);i.invokeFunction(e=>{const r=e.get(S.IEnvironmentService),o=e.get(y.IStateService),s=function(e){const t={VSCODE_IPC_HOOK:e.mainIPCHandle,VSCODE_NLS_CONFIG:process.env.VSCODE_NLS_CONFIG,VSCODE_LOGS:process.env.VSCODE_LOGS}
;return process.env.VSCODE_PORTABLE&&(t.VSCODE_PORTABLE=process.env.VSCODE_PORTABLE),n.assign(process.env,t),t}(r);return function(e,t){const i=Promise.all([e.extensionsPath,e.nodeCachedDataDir,e.logsPath,e.globalStorageHome,e.workspaceStorageHome,e.backupHome].map(e=>e?c.mkdirp(e):void 0)),n=t.init();return Promise.all([i,n])}(r,o).then(()=>i.invokeFunction(T),e=>(U(r,e),Promise.reject(e))).then(e=>(t.logger=O.createSpdLogService("main",t.getLevel(),r.logsPath),i.createInstance(P.CodeApplication,e,s).startup()))}).then(null,e=>i.invokeFunction(F,e))}Object.defineProperty(t,"__esModule",{value:!0});class B extends Error{constructor(){super(...arguments),this.isExpected=!0}}!function(){L.setUnexpectedErrorHandler(e=>console.error(e));let e;try{e=s.parseMainProcessArgv(process.argv),e=l.validatePaths(e)}catch(e){return console.error(e.message),void i.app.exit(1)}if(e.wait&&!e.waitMarkerFilePath){const t=a.createWaitMarkerFile(e.verbose);t&&(a.addArg(process.argv,"--waitMarkerFilePath",t),e.waitMarkerFilePath=t)
}N(e)}()})}).call(this);
//# sourceMappingURL=https://ticino.blob.core.windows.net/sourcemaps/51b0b28134d51361cf996d2f0a1c698247aeabd8/core/vs/code/electron-main/main.js.map
